

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Feng Tao">
  <meta name="keywords" content="">
  
    <meta name="description" content="Ginæ¡†æ¶ç¤ºä¾‹">
<meta property="og:type" content="article">
<meta property="og:title" content="Ginæ¡†æ¶ç¤ºä¾‹">
<meta property="og:url" content="http://example.com/2023/04/11/Go/Gin%E6%A1%86%E6%9E%B6%E7%A4%BA%E4%BE%8B/index.html">
<meta property="og:site_name" content="èƒ¤å‡¯">
<meta property="og:description" content="Ginæ¡†æ¶ç¤ºä¾‹">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/gin.png">
<meta property="article:published_time" content="2023-04-11T06:09:26.000Z">
<meta property="article:modified_time" content="2023-04-21T06:24:27.024Z">
<meta property="article:author" content="Feng Tao">
<meta property="article:tag" content="åŸåˆ›">
<meta property="article:tag" content="Gin">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/images/gin.png">
  
  
  
  <title>Ginæ¡†æ¶ç¤ºä¾‹ - èƒ¤å‡¯</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/fluid-extension.css">
<link rel="stylesheet" href="/css/test.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"ğŸ‰","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"n0H6ZjcwsAdPc2zfOJM4bxV4-gzGzoHsz","app_key":"rwjeQIHfYJqQvjh2iWuPkYev","server_url":"https://n0h6zjcw.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>èƒ¤å‡¯çš„ä¸ªäººåšå®¢</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/none.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Ginæ¡†æ¶ç¤ºä¾‹"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-04-11 14:09" pubdate>
          2023å¹´4æœˆ11æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          74k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          617 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Ginæ¡†æ¶ç¤ºä¾‹</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Ginæ¡†æ¶ç¤ºä¾‹"><a href="#Ginæ¡†æ¶ç¤ºä¾‹" class="headerlink" title="Ginæ¡†æ¶ç¤ºä¾‹"></a>Ginæ¡†æ¶ç¤ºä¾‹<span id="more"></span></h1><h2 id="1ã€AsciiJSON"><a href="#1ã€AsciiJSON" class="headerlink" title="1ã€AsciiJSON"></a>1ã€AsciiJSON</h2><blockquote>
<p>â€‹	ä½¿ç”¨ AsciiJSON ç”Ÿæˆå…·æœ‰è½¬ä¹‰çš„é ASCII å­—ç¬¦çš„ ASCII-only JSONã€‚</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç " class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>	<span class="hljs-string">&quot;net/http&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“</span><br><br>	r.GET(<span class="hljs-string">&quot;/someJSON&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ª GET è·¯ç”±ï¼Œå¹¶å®šä¹‰å¤„ç†å‡½æ•°</span><br>		data := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;&#123; <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª map ç±»å‹çš„æ•°æ®ï¼Œç”¨äºæ„é€  JSON å“åº”</span><br>			<span class="hljs-string">&quot;lang&quot;</span>: <span class="hljs-string">&quot;GOè¯­è¨€&quot;</span>,   <span class="hljs-comment">// è®¾ç½® &quot;lang&quot; é”®çš„å€¼ä¸º &quot;GOè¯­è¨€&quot;</span><br>			<span class="hljs-string">&quot;tag&quot;</span>:  <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>, <span class="hljs-comment">// è®¾ç½® &quot;tag&quot; é”®çš„å€¼ä¸º &quot;&lt;br&gt;&quot;</span><br>		&#125;<br><br>		c.AsciiJSON(http.StatusOK, data) <span class="hljs-comment">// ä½¿ç”¨ c.AsciiJSON() æ–¹æ³•å°† map æ•°æ®è½¬æ¢ä¸º ASCII JSON æ ¼å¼ï¼Œå¹¶ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯</span><br>	&#125;)<br><br>	r.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ Gin web æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 8080 ç«¯å£</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><code>gin.Default()</code>: è¿™æ˜¯ Gin æ¡†æ¶çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå¸¦æœ‰é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±å¼•æ“ï¼ŒåŒ…æ‹¬äº† <code>logger</code> å’Œ <code>recovery</code> ä¸­é—´ä»¶ï¼Œç”¨äºè®°å½•è¯·æ±‚æ—¥å¿—å’Œåœ¨å‡ºç° panic æ—¶è¿›è¡Œæ¢å¤ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒã€‚</li>
<li><code>r.GET(&quot;/someJSON&quot;, ...)</code>ï¼šè·¯ç”±æ³¨å†Œæ–¹æ³•ï¼ŒæŒ‡å®šä¸€ä¸ªè·¯å¾„ä¸ºâ€&#x2F;someJSONâ€çš„GETè¯·æ±‚ï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚â€some&#x2F;JSONâ€è·¯å¾„æ—¶ï¼Œä¼šè°ƒç”¨åé¢çš„å¤„ç†å‡½æ•°æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚</li>
<li><code>fun(c *gin.Context) &#123;...&#125;</code>ï¼šè¿™æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä½œä¸ºè·¯ç”±å¤„ç†å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ª<code>gin.Context</code>å‚æ•°ã€‚</li>
<li><code>gin.Context</code>ï¼šæ˜¯Ginæ¡†æ¶çš„ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨äºåœ¨å¤„ç†<code>HTTP</code>è¯·æ±‚å’Œç”Ÿæˆ<code>HTTP</code>å“åº”æ—¶ä¼ é€’å’Œç®¡ç†æ•°æ®ã€‚æ¯å½“ Gin æ¡†æ¶å¤„ç†ä¸€ä¸ª<code> HTTP</code> è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>gin.Context</code> å¯¹è±¡ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ³¨å†Œçš„è·¯ç”±å¤„ç†å‡½æ•°ã€‚å®ƒåŒ…å«äº†å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•å’Œå±æ€§ï¼Œç”¨äºè®¿é—®HTTPè¯·æ±‚çš„å„ç§ä¿¡æ¯ï¼Œå¦‚è¯·æ±‚è·¯å¾„ã€HTTPæ–¹æ³•ã€çƒè¯·æ±‚å‚æ•°ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰ã€‚</li>
<li><code>data := map[string]interface&#123;&#125;&#123;...&#125;</code>ï¼šåˆ›å»ºäº†ä¸€ä¸ª<code>map[string]interface&#123;&#125;</code>ç±»å‹çš„å˜é‡<code>data</code>ï¼Œç”¨äºæ„é€ è¦è¿”å›çš„<code>JSON</code>æ•°æ®ã€‚è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„mapï¼ŒåŒ…å«äº†è¿ä¸ªé”®å€¼å¯¹ï¼Œåˆ†åˆ«æ˜¯â€langâ€å’Œâ€tagâ€ã€‚</li>
<li><code>c.AsciiJSON(http.StatusOK, data)</code>ï¼šè¿™æ˜¯<code>gin.Context</code>çš„æ–¹æ³•ï¼Œç”¨äºå°†dataå˜é‡çš„å†…å®¹ä½œä¸º<code>ASCII JSON</code>æ ¼å¼çš„å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<code>http.StatusOK</code>æ˜¯HTTPçŠ¶æ€ç ï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œè¿™é‡Œå°†å…¶ä½œä¸ºå“åº”çš„çŠ¶æ€ç ã€‚data å˜é‡ä½œä¸ºå“åº”çš„ä¸»ä½“å†…å®¹ï¼Œé€šè¿‡ <code>ASCII JSON</code> æ ¼å¼è¿›è¡Œåºåˆ—åŒ–ï¼Œå¹¶è®¾ç½®äº†å“åº”çš„ <code>Content-Type </code>ä¸º â€œapplication&#x2F;json; charset&#x3D;utf-8â€ã€‚æœ€ç»ˆï¼Œè¿™ä¸ªå¤„ç†å‡½æ•°ä¼šå°†ç”Ÿæˆçš„å“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å¯¼å…¥äº† <code>gin</code> å’Œ <code>net/http</code> åŒ…ï¼Œå¼•å…¥äº† Gin æ¡†æ¶å’Œæ ‡å‡†åº“ä¸­å¤„ç† HTTP è¯·æ±‚å’Œå“åº”çš„åŠŸèƒ½ã€‚</li>
<li>åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“ <code>r</code>ï¼Œä½œä¸º HTTP è¯·æ±‚çš„å…¥å£ã€‚</li>
<li>æ³¨å†Œäº†ä¸€ä¸ª GET è·¯ç”±ï¼Œè·¯å¾„ä¸º â€œ&#x2F;someJSONâ€ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå¤„ç†å‡½æ•°ä½¿ç”¨ <code>c.AsciiJSON()</code> æ–¹æ³•å°†ä¸€ä¸ªå®šä¹‰å¥½çš„ map æ•°æ®è½¬æ¢ä¸º ASCII JSON æ ¼å¼ï¼Œå¹¶ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>ä½¿ç”¨ <code>r.Run()</code> æ–¹æ³•å¯åŠ¨äº†ä¸€ä¸ª Gin web æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚ã€‚</li>
<li>å½“å®¢æˆ·ç«¯é€šè¿‡æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯è®¿é—® â€œ&#x2F;someJSONâ€ è·¯å¾„æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ª JSON æ ¼å¼çš„å“åº”ï¼ŒåŒ…å«äº†å®šä¹‰å¥½çš„ <code>data</code> æ•°æ®ï¼Œå…¶ä¸­ â€œlangâ€ é”®çš„å€¼ä¸º â€œGOè¯­è¨€â€ï¼Œâ€tagâ€ é”®çš„å€¼ä¸º â€œ<br>â€œã€‚è¿™ä¸ªå“åº”çš„å†…å®¹ç±»å‹ä¸º ASCII JSONã€‚</li>
</ol>
</blockquote>
<h2 id="2ã€ç»‘å®šè¡¨å•æ•°æ®è‡³è‡ªå®šä¹‰ç»“æ„ä½“"><a href="#2ã€ç»‘å®šè¡¨å•æ•°æ®è‡³è‡ªå®šä¹‰ç»“æ„ä½“" class="headerlink" title="2ã€ç»‘å®šè¡¨å•æ•°æ®è‡³è‡ªå®šä¹‰ç»“æ„ä½“"></a>2ã€ç»‘å®šè¡¨å•æ•°æ®è‡³è‡ªå®šä¹‰ç»“æ„ä½“</h2><blockquote>
<p>â€‹		ä¸‹è¿°ä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„Webåº”ç”¨ç¨‹åºï¼Œé€šè¿‡Ginæ¡†æ¶å¤„ç†HTTPè¯·æ±‚ï¼Œå°†ä»è¯·æ±‚ä¸­è·å–çš„æ•°æ®ç»‘å®šåˆ°ç»“æ„ä½“å˜é‡ï¼Œå¹¶ç”ŸæˆJSONæ ¼å¼çš„HTTPå“åº”ä½“ã€‚</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -1"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -1" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br><br><span class="hljs-keyword">type</span> StructA <span class="hljs-keyword">struct</span> &#123;<br>	FieldA <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;field_a&quot;`</span> <span class="hljs-comment">// FieldA æ˜¯ StructA çš„å­—æ®µï¼Œä½¿ç”¨ form æ ‡ç­¾ &quot;field_a&quot;</span><br>&#125;<br><br><span class="hljs-keyword">type</span> StructB <span class="hljs-keyword">struct</span> &#123;<br>	NestedStruct StructA <span class="hljs-comment">// NestedStruct æ˜¯ StructB çš„å­—æ®µï¼Œç±»å‹ä¸º StructA</span><br>	FieldB       <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;field_b&quot;`</span> <span class="hljs-comment">// FieldB æ˜¯ StructB çš„å­—æ®µï¼Œä½¿ç”¨ form æ ‡ç­¾ &quot;field_b&quot;</span><br>&#125;<br><br><span class="hljs-keyword">type</span> StructC <span class="hljs-keyword">struct</span> &#123;<br>	NestedStructPointer *StructA <span class="hljs-comment">// NestedStructPointer æ˜¯ StructC çš„æŒ‡é’ˆå­—æ®µï¼ŒæŒ‡å‘ StructA</span><br>	FieldC              <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;field_c&quot;`</span> <span class="hljs-comment">// FieldC æ˜¯ StructC çš„å­—æ®µï¼Œä½¿ç”¨ form æ ‡ç­¾ &quot;field_c&quot;</span><br>&#125;<br><br><span class="hljs-keyword">type</span> StructD <span class="hljs-keyword">struct</span> &#123;<br>	NestedAnonyStruct <span class="hljs-keyword">struct</span> &#123; <span class="hljs-comment">// NestedAnonyStruct æ˜¯ StructD çš„åŒ¿åç»“æ„ä½“å­—æ®µ</span><br>		FieldX <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;field_x&quot;`</span> <span class="hljs-comment">// FieldX æ˜¯åŒ¿åç»“æ„ä½“çš„å­—æ®µï¼Œä½¿ç”¨ form æ ‡ç­¾ &quot;field_x&quot;</span><br>	&#125;<br>	FieldD <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;field_d&quot;`</span> <span class="hljs-comment">// FieldD æ˜¯ StructD çš„å­—æ®µï¼Œä½¿ç”¨ form æ ‡ç­¾ &quot;field_d&quot;</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetDataB</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> b StructB<br>	c.Bind(&amp;b) <span class="hljs-comment">// å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° StructB</span><br>	c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>		<span class="hljs-string">&quot;a&quot;</span>: b.NestedStruct, <span class="hljs-comment">// è¿”å› NestedStruct çš„å€¼ä½œä¸ºå“åº”ï¼Œé”®åä¸º &quot;a&quot;</span><br>		<span class="hljs-string">&quot;b&quot;</span>: b.FieldB,       <span class="hljs-comment">// è¿”å› FieldB çš„å€¼ä½œä¸ºå“åº”ï¼Œé”®åä¸º &quot;b&quot;</span><br>	&#125;)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetDataC</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> b StructC<br>	c.Bind(&amp;b) <span class="hljs-comment">// å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° StructC</span><br>	c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>		<span class="hljs-string">&quot;a&quot;</span>: b.NestedStructPointer, <span class="hljs-comment">// è¿”å› NestedStructPointer çš„å€¼ä½œä¸ºå“åº”ï¼Œé”®åä¸º &quot;a&quot;</span><br>		<span class="hljs-string">&quot;c&quot;</span>: b.FieldC,              <span class="hljs-comment">// è¿”å› FieldC çš„å€¼ä½œä¸ºå“åº”ï¼Œé”®åä¸º &quot;c&quot;</span><br>	&#125;)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetDataD</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> b StructD<br>	c.Bind(&amp;b) <span class="hljs-comment">// å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° StructD</span><br>	c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>		<span class="hljs-string">&quot;x&quot;</span>: b.NestedAnonyStruct, <span class="hljs-comment">// è¿”å› NestedAnonyStruct çš„å€¼ä½œä¸ºå“åº”ï¼Œé”®åä¸º &quot;x&quot;</span><br>		<span class="hljs-string">&quot;d&quot;</span>: b.FieldD,            <span class="hljs-comment">// è¿”å› FieldD çš„å€¼ä½œä¸ºå“åº”ï¼Œé”®åä¸º &quot;d&quot;</span><br>	&#125;)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.GET(<span class="hljs-string">&quot;/getb&quot;</span>, GetDataB) <span class="hljs-comment">// æ³¨å†Œ GetDataB ä½œä¸º GET /getb è·¯ç”±çš„å¤„ç†å‡½æ•°</span><br>	r.GET(<span class="hljs-string">&quot;/getc&quot;</span>, GetDataC) <span class="hljs-comment">// æ³¨å†Œ GetDataC ä½œä¸º GET /getc è·¯ç”±çš„å¤„ç†å‡½æ•°</span><br>	r.GET(<span class="hljs-string">&quot;/getd&quot;</span>, GetDataD) <span class="hljs-comment">// æ³¨å†Œ GetDataD ä½œä¸º GET /getd è·¯ç”±çš„å¤„ç†å‡½æ•°</span><br><br>	r.Run() <span class="hljs-comment">// å¯åŠ¨ Gin web æœåŠ¡å™¨</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-1"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-1" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><code>c.Bind(&amp;b)</code>ï¼šä½¿ç”¨äº†Ginæ¡†æ¶çš„<code>Bind</code>æ–¹æ³•ï¼Œå°†ä»HTTPè¯·æ±‚ä¸­è·å–çš„æ•°æ®ç»‘å®šåˆ°<code>b</code>å˜é‡ã€‚<code>&amp;b</code>è¡¨ç¤ºä¼ é€’<code>b</code>çš„æŒ‡é’ˆï¼Œä»¥ä¾¿å°†æ•°æ®ç»‘å®šåˆ°<code>b</code>å˜é‡çš„å­—æ®µã€‚</li>
<li><code>c.JSON(200, gin.H&#123;&quot;a&quot;: b.NestedStruct, &quot;b&quot;: b.FieldB&#125;)</code>ï¼šä½¿ç”¨Ginæ¡†æ¶çš„<code>JSON</code>æ–¹æ³•ï¼Œç”ŸæˆHTTPå“åº”çš„JSONæ ¼å¼ã€‚<code>200</code>è¡¨ç¤ºHTTPå“åº”çš„çŠ¶æ€ç ä¸º200ï¼Œ<code>gin.H</code>æ˜¯Ginæ¡†æ¶æä¾›çš„ä¸€ç§å¿«æ·æ–¹å¼ï¼Œè¡¨ç¤ºä¸€ä¸ª<code>map[string]interface&#123;&#125;</code>ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œç”¨äºæ„é€ <code>JSON</code>å“åº”ä½“ã€‚åœ¨è¿™é‡Œï¼Œæ„é€ äº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé”®å€¼å¯¹çš„<code>JSON</code>å“åº”ä½“ï¼Œå…¶ä¸­é”®ä¸º<code>a</code>å’Œ<code>b</code>ï¼Œå€¼åˆ†åˆ«ä¸º<code>b.NestedStruct</code>å’Œ<code>b.FieldB</code>ï¼Œè¿™äº›å€¼æ¥è‡ªä¹‹å‰ç»‘å®šçš„<code>b</code>å˜é‡çš„å­—æ®µã€‚</li>
<li>JSONï¼ˆJavaScript Object Notationï¼‰æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œé€šå¸¸ç”¨äºåœ¨ä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ã€‚JSONé‡‡ç”¨é”®å€¼å¯¹çš„å½¢å¼è¡¨ç¤ºæ•°æ®ï¼Œä½¿ç”¨æ–‡æœ¬æ ¼å¼è¿›è¡Œåºåˆ—åŒ–ï¼Œå…·æœ‰ç®€æ´ã€æ˜“è¯»ã€æ˜“è§£æçš„ç‰¹ç‚¹ã€‚</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-1"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-1" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å®šä¹‰äº†å››ä¸ªç»“æ„ä½“ç±»å‹ï¼š<code>StructA</code>ã€<code>StructB</code>ã€<code>StructC</code>ã€<code>StructD</code>ï¼Œåˆ†åˆ«åŒ…å«äº†ä¸åŒçš„å­—æ®µå’Œæ ‡ç­¾ã€‚</li>
<li>åœ¨<code>GetDataB</code>å¤„ç†å‡½æ•°ä¸­ï¼Œä»HTTPè¯·æ±‚ä¸­ç»‘å®šæ•°æ®åˆ°<code>StructB</code>ç±»å‹çš„å˜é‡<code>b</code>ï¼Œç„¶åç”ŸæˆJSONå“åº”ä½“ï¼ŒåŒ…å«äº†<code>b.NestedStruct</code>å’Œ<code>b.FieldB</code>å­—æ®µçš„å€¼ã€‚</li>
<li>åœ¨<code>GetDataC</code>å¤„ç†å‡½æ•°ä¸­ï¼Œä»HTTPè¯·æ±‚ä¸­ç»‘å®šæ•°æ®åˆ°<code>StructC</code>ç±»å‹çš„å˜é‡<code>b</code>ï¼Œç„¶åç”ŸæˆJSONå“åº”ä½“ï¼ŒåŒ…å«äº†<code>b.NestedStructPointer</code>å’Œ<code>b.FieldC</code>å­—æ®µçš„å€¼ã€‚</li>
<li>åœ¨<code>GetDataD</code>å¤„ç†å‡½æ•°ä¸­ï¼Œä»HTTPè¯·æ±‚ä¸­ç»‘å®šæ•°æ®åˆ°<code>StructD</code>ç±»å‹çš„å˜é‡<code>b</code>ï¼Œç„¶åç”ŸæˆJSONå“åº”ä½“ï¼ŒåŒ…å«äº†<code>b.NestedAnonyStruct</code>å’Œ<code>b.FieldD</code>å­—æ®µçš„å€¼ã€‚</li>
<li>åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªGinçš„é»˜è®¤è·¯ç”±å™¨ï¼Œå¹¶æ³¨å†Œäº†ä¸‰ä¸ªè·¯ç”±ï¼ˆ<code>/getb</code>ã€<code>/getc</code>ã€<code>/getd</code>ï¼‰ï¼Œå¹¶å°†å¯¹åº”çš„å¤„ç†å‡½æ•°ï¼ˆ<code>GetDataB</code>ã€<code>GetDataC</code>ã€<code>GetDataD</code>ï¼‰ä½œä¸ºå¤„ç†å‡½æ•°ã€‚æœ€åè°ƒç”¨<code>r.Run()</code>å¯åŠ¨Ginçš„webæœåŠ¡å™¨ï¼Œç›‘å¬å¹¶å¤„ç†HTTPè¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h4 id="ï¼ˆ4ï¼‰ä½¿ç”¨-curl-å‘½ä»¤ç»“æœï¼š"><a href="#ï¼ˆ4ï¼‰ä½¿ç”¨-curl-å‘½ä»¤ç»“æœï¼š" class="headerlink" title="ï¼ˆ4ï¼‰ä½¿ç”¨ curl å‘½ä»¤ç»“æœï¼š"></a>ï¼ˆ4ï¼‰ä½¿ç”¨ <code>curl</code> å‘½ä»¤ç»“æœï¼š</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go">å‘½ä»¤è¡Œè¾“å…¥ï¼š	curl <span class="hljs-string">&quot;http://localhost:8080/getb?field_a=hello&amp;field_b=world&quot;</span><br>ç»ˆç«¯æ˜¾ç¤ºï¼š	&#123;<span class="hljs-string">&quot;a&quot;</span>:&#123;<span class="hljs-string">&quot;FieldA&quot;</span>:<span class="hljs-string">&quot;hello&quot;</span>&#125;,<span class="hljs-string">&quot;b&quot;</span>:<span class="hljs-string">&quot;world&quot;</span>&#125;<br>å‘½ä»¤è¡Œè¾“å…¥ï¼š	curl <span class="hljs-string">&quot;http://localhost:8080/getc?field_a=hello&amp;field_c=world&quot;</span><br>ç»ˆç«¯æ˜¾ç¤ºï¼š	&#123;<span class="hljs-string">&quot;a&quot;</span>:&#123;<span class="hljs-string">&quot;FieldA&quot;</span>:<span class="hljs-string">&quot;hello&quot;</span>&#125;,<span class="hljs-string">&quot;c&quot;</span>:<span class="hljs-string">&quot;world&quot;</span>&#125;<br>å‘½ä»¤è¡Œè¾“å…¥ï¼š	curl <span class="hljs-string">&quot;http://localhost:8080/getd?field_x=hello&amp;field_d=world&quot;</span><br>ç»ˆç«¯æ˜¾ç¤ºï¼š	&#123;<span class="hljs-string">&quot;d&quot;</span>:<span class="hljs-string">&quot;world&quot;</span>,<span class="hljs-string">&quot;x&quot;</span>:&#123;<span class="hljs-string">&quot;FieldX&quot;</span>:<span class="hljs-string">&quot;hello&quot;</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<h2 id="3ã€ç»‘å®š-HTML-å¤é€‰æ¡†"><a href="#3ã€ç»‘å®š-HTML-å¤é€‰æ¡†" class="headerlink" title="3ã€ç»‘å®š HTML å¤é€‰æ¡†"></a>3ã€ç»‘å®š HTML å¤é€‰æ¡†</h2><h4 id="ï¼ˆ1ï¼‰å‰ç½®æ¡ä»¶"><a href="#ï¼ˆ1ï¼‰å‰ç½®æ¡ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰å‰ç½®æ¡ä»¶"></a>ï¼ˆ1ï¼‰å‰ç½®æ¡ä»¶</h4><blockquote>
<p>â€‹	åœ¨main.goæ–‡ä»¶çš„åŒç›®å½•ä¸‹ï¼Œå­˜åœ¨<code>views/form.html</code>ç›®å½•ï¼Œä¸”<code>form.html</code>æ–‡ä»¶é‡Œå­˜æ”¾äº†HTMLæ¨¡æ¿æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>My Form Template<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Check some colors<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span>Red<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;colors[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;red&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;green&quot;</span>&gt;</span>Green<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;colors[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;green&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;green&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;blue&quot;</span>&gt;</span>Blue<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;colors[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;blue&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;blue&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰å®Œæ•´ä»£ç "><a href="#ï¼ˆ2ï¼‰å®Œæ•´ä»£ç " class="headerlink" title="ï¼ˆ2ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ2ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> myForm <span class="hljs-keyword">struct</span> &#123;<br>	Colors []<span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;colors[]&quot;`</span> <span class="hljs-comment">/* å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ myFormï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª Colors å­—æ®µï¼Œ</span><br><span class="hljs-comment">    ç”¨äºæ¥æ”¶è¡¨å•æäº¤çš„ colors[] å‚æ•°*/</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br><br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;views/*&quot;</span>) <span class="hljs-comment">// åŠ è½½ views ç›®å½•ä¸‹çš„ HTML æ¨¡æ¿æ–‡ä»¶</span><br><br>	r.GET(<span class="hljs-string">&quot;/&quot;</span>, indexHandler) <span class="hljs-comment">// å¤„ç†æ ¹è·¯å¾„çš„ GET è¯·æ±‚ï¼Œè°ƒç”¨ indexHandler å‡½æ•°</span><br>	r.POST(<span class="hljs-string">&quot;/&quot;</span>, formHandler) <span class="hljs-comment">// å¤„ç†æ ¹è·¯å¾„çš„ POST è¯·æ±‚ï¼Œè°ƒç”¨ formHandler å‡½æ•°</span><br><br>	r.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ Gin æœåŠ¡å™¨ç›‘å¬åœ¨ 8080 ç«¯å£</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">indexHandler</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	c.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;form.html&quot;</span>, <span class="hljs-literal">nil</span>) <span class="hljs-comment">// åœ¨å“åº”ä¸­æ¸²æŸ“ form.html æ¨¡æ¿å¹¶è¿”å› 200 çŠ¶æ€ç </span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">formHandler</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> fakeForm myForm<br>	c.Bind(&amp;fakeForm)                 <span class="hljs-comment">// ç»‘å®šè¯·æ±‚å‚æ•°åˆ° myForm ç»“æ„ä½“</span><br>	c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;color&quot;</span>: fakeForm.Colors&#125;) <span class="hljs-comment">/* è¿”å› JSON æ ¼å¼çš„å“åº”ï¼Œ</span><br><span class="hljs-comment">	åŒ…å« fakeForm ç»“æ„ä½“ä¸­çš„ Colors å­—æ®µå€¼*/</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ3ï¼‰çŸ¥è¯†ç‚¹"><a href="#ï¼ˆ3ï¼‰çŸ¥è¯†ç‚¹" class="headerlink" title="ï¼ˆ3ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ3ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><code>r.LoadHTMLGlob(&quot;views/*&quot;)</code>: åŠ è½½<code>views</code>ç›®å½•ä¸‹çš„HTMLæ¨¡æ¿æ–‡ä»¶ï¼Œç”¨äºåç»­çš„HTMLæ¨¡æ¿æ¸²æŸ“ã€‚<code>LoadHTMLGlob()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶è·¯å¾„çš„å‚æ•°ï¼Œä½¿ç”¨é€šé…ç¬¦<code>*</code>å¯ä»¥åŒ¹é…æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚</li>
<li><code>r.GET(&quot;/&quot;, indexHandler)</code>: æ³¨å†Œä¸€ä¸ªå¤„ç†æ ¹è·¯å¾„çš„GETè¯·æ±‚çš„è·¯ç”±ï¼Œå½“å®¢æˆ·ç«¯å‘é€GETè¯·æ±‚åˆ°æ ¹è·¯å¾„â€&#x2F;â€œæ—¶ï¼ŒGinä¼šè°ƒç”¨<code>indexHandler</code>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚<code>indexHandler</code>å‡½æ•°æ˜¯è‡ªå®šä¹‰çš„å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç†æ ¹è·¯å¾„çš„GETè¯·æ±‚ã€‚</li>
<li><code>r.POST(&quot;/&quot;, formHandler)</code>: æ³¨å†Œä¸€ä¸ªå¤„ç†æ ¹è·¯å¾„çš„POSTè¯·æ±‚çš„è·¯ç”±ï¼Œå½“å®¢æˆ·ç«¯å‘é€POSTè¯·æ±‚åˆ°æ ¹è·¯å¾„â€&#x2F;â€œæ—¶ï¼ŒGinä¼šè°ƒç”¨<code>formHandler</code>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚<code>formHandler</code>å‡½æ•°æ˜¯è‡ªå®šä¹‰çš„å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç†æ ¹è·¯å¾„çš„POSTè¯·æ±‚ã€‚</li>
</ul>
<h4 id="ï¼ˆ4ï¼‰ç¤ºä¾‹å¤§æ„"><a href="#ï¼ˆ4ï¼‰ç¤ºä¾‹å¤§æ„" class="headerlink" title="ï¼ˆ4ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ4ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>myForm</code>çš„ç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª<code>Colors</code>å­—æ®µï¼Œç”¨äºæ¥æ”¶è¡¨å•æäº¤çš„<code>colors[]</code>å‚æ•°ã€‚<code>Colors</code>å­—æ®µä½¿ç”¨äº†<code>form:&quot;colors[]&quot;</code>æ ‡ç­¾ï¼Œè¡¨ç¤ºåœ¨è¡¨å•ä¸­ä½¿ç”¨<code>colors[]</code>ä½œä¸ºå‚æ•°åã€‚</li>
<li>åœ¨<code>main()</code>å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªGinå¼•æ“å®ä¾‹ï¼Œå¹¶è®¾ç½®äº†é»˜è®¤çš„ä¸­é—´ä»¶ã€‚</li>
<li>ä½¿ç”¨<code>r.LoadHTMLGlob(&quot;views/*&quot;)</code>åŠ è½½äº†<code>views</code>ç›®å½•ä¸‹çš„HTMLæ¨¡æ¿æ–‡ä»¶ï¼Œç”¨äºåç»­çš„HTMLæ¨¡æ¿æ¸²æŸ“ã€‚</li>
<li>ä½¿ç”¨<code>r.GET(&quot;/&quot;, indexHandler)</code>æ³¨å†Œäº†ä¸€ä¸ªå¤„ç†æ ¹è·¯å¾„çš„GETè¯·æ±‚çš„è·¯ç”±ï¼Œå½“å®¢æˆ·ç«¯å‘é€GETè¯·æ±‚åˆ°æ ¹è·¯å¾„â€&#x2F;â€œæ—¶ï¼ŒGinä¼šè°ƒç”¨<code>indexHandler</code>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</li>
<li>ä½¿ç”¨<code>r.POST(&quot;/&quot;, formHandler)</code>æ³¨å†Œäº†ä¸€ä¸ªå¤„ç†æ ¹è·¯å¾„çš„POSTè¯·æ±‚çš„è·¯ç”±ï¼Œå½“å®¢æˆ·ç«¯å‘é€POSTè¯·æ±‚åˆ°æ ¹è·¯å¾„â€&#x2F;â€œæ—¶ï¼ŒGinä¼šè°ƒç”¨<code>formHandler</code>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</li>
<li>å®šä¹‰äº†<code>indexHandler</code>å‡½æ•°ï¼Œç”¨äºå¤„ç†æ ¹è·¯å¾„çš„GETè¯·æ±‚ã€‚è¯¥å‡½æ•°é€šè¿‡è°ƒç”¨<code>c.HTML()</code>æ–¹æ³•ï¼Œåœ¨å“åº”ä¸­æ¸²æŸ“åä¸º<code>form.html</code>çš„HTMLæ¨¡æ¿ï¼Œå¹¶è¿”å›200çŠ¶æ€ç ã€‚</li>
<li>å®šä¹‰äº†<code>formHandler</code>å‡½æ•°ï¼Œç”¨äºå¤„ç†æ ¹è·¯å¾„çš„POSTè¯·æ±‚ã€‚è¯¥å‡½æ•°é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªåä¸º<code>fakeForm</code>çš„<code>myForm</code>ç±»å‹çš„å˜é‡ï¼Œç„¶åé€šè¿‡è°ƒç”¨<code>c.Bind()</code>æ–¹æ³•ï¼Œå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°<code>fakeForm</code>ç»“æ„ä½“ä¸­ã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨<code>c.JSON()</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªJSONæ ¼å¼çš„å“åº”ï¼ŒåŒ…å«<code>fakeForm</code>ç»“æ„ä½“ä¸­çš„<code>Colors</code>å­—æ®µå€¼ã€‚</li>
</ol>
</blockquote>
<h2 id="4ã€ç»‘å®šæŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•æ•°æ®"><a href="#4ã€ç»‘å®šæŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•æ•°æ®" class="headerlink" title="4ã€ç»‘å®šæŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•æ•°æ®"></a>4ã€ç»‘å®šæŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•æ•°æ®</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -2"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -2" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;log&quot;</span><br>    <span class="hljs-string">&quot;time&quot;</span><br><br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> &#123;<br>    Name     <span class="hljs-type">string</span>    <span class="hljs-string">`form:&quot;name&quot;`</span>                     <span class="hljs-comment">// è¡¨å•å‚æ•° &quot;name&quot;</span><br>    Address  <span class="hljs-type">string</span>    <span class="hljs-string">`form:&quot;address&quot;`</span>                  <span class="hljs-comment">// è¡¨å•å‚æ•° &quot;address&quot;</span><br>    Birthday time.Time <span class="hljs-string">`form:&quot;birthday&quot; time_format:&quot;2006-01-02&quot; time_utc:&quot;1&quot;`</span> <br>    <span class="hljs-comment">// è¡¨å•å‚æ•° &quot;birthday&quot;ï¼Œä½¿ç”¨æŒ‡å®šçš„æ—¶é—´æ ¼å¼å’Œè½¬æ¢ä¸º UTC æ—¶é—´</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    route := gin.Default() <span class="hljs-comment">// åˆ›å»ºé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“</span><br><br>    route.GET(<span class="hljs-string">&quot;/testing&quot;</span>, startPage) <span class="hljs-comment">// æ³¨å†Œ GET è¯·æ±‚å¤„ç†å‡½æ•° &quot;/testing&quot;</span><br><br>    route.Run(<span class="hljs-string">&quot;:8085&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ Gin æœåŠ¡å¹¶ç›‘å¬åœ¨ 8085 ç«¯å£</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">startPage</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>    <span class="hljs-keyword">var</span> person Person <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Person ç»“æ„ä½“å˜é‡ç”¨äºå­˜å‚¨è¯·æ±‚å‚æ•°</span><br><br>    <span class="hljs-comment">// ä½¿ç”¨ Gin çš„ ShouldBind æ–¹æ³•å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ° Person ç»“æ„ä½“å˜é‡ä¸Š</span><br>    <span class="hljs-comment">// å¦‚æœè¯·æ±‚æ˜¯ GET è¯·æ±‚ï¼Œåˆ™ä½¿ç”¨ Form ç»‘å®šå¼•æ“ï¼ˆqueryï¼‰è¿›è¡Œå‚æ•°ç»‘å®š</span><br>    <span class="hljs-comment">// å¦‚æœè¯·æ±‚æ˜¯ POST è¯·æ±‚ï¼Œåˆ™é¦–å…ˆæ£€æŸ¥ content-type æ˜¯å¦ä¸º JSON æˆ– XMLï¼Œç„¶åå†ä½¿ç”¨ Formï¼ˆform-dataï¼‰ç»‘å®šå¼•æ“</span><br>    <span class="hljs-comment">// è¯¦ç»†ç»‘å®šè§„åˆ™å¯ä»¥å‚è€ƒï¼šhttps://github.com/gin-gonic/gin/blob/master/binding/binding.go#L48</span><br>    <span class="hljs-keyword">if</span> err := c.ShouldBind(&amp;person); err == <span class="hljs-literal">nil</span> &#123;<span class="hljs-comment">//ç»‘å®šæˆåŠŸæ—¶è¿”å›nilï¼Œåä¹‹è¿”å›é”™è¯¯ä¿¡æ¯</span><br>		log.Println(person.Name)	<span class="hljs-comment">// è¾“å‡ºç»‘å®šåçš„ Name å­—æ®µå€¼</span><br>		log.Println(person.Address)	<span class="hljs-comment">// è¾“å‡ºç»‘å®šåçš„ Address å­—æ®µå€¼</span><br>		log.Println(person.Birthday)<span class="hljs-comment">// è¾“å‡ºç»‘å®šåçš„ Birthday å­—æ®µå€¼</span><br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		log.Println(<span class="hljs-string">&quot;Error:&quot;</span>, err)<br>	&#125;<br><br>    c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;Success&quot;</span>) <span class="hljs-comment">// è¿”å› &quot;Success&quot; å­—ç¬¦ä¸²ä½œä¸ºå“åº”</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-2"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-2" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li>â€‹	<code>ShouldBind</code> æ˜¯ Gin æ¡†æ¶æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå°† HTTP è¯·æ±‚ä¸­çš„å‚æ•°ç»‘å®šåˆ°ä¸€ä¸ªç»“æ„ä½“å˜é‡ä¸Šã€‚<code>ShouldBind</code> æ–¹æ³•ä¼šæ ¹æ®è¯·æ±‚ä¸­çš„å‚æ•°åç§°å’Œç›®æ ‡ç»“æ„ä½“çš„å­—æ®µåç§°è¿›è¡Œè‡ªåŠ¨åŒ¹é…ï¼Œå¹¶å°†å¯¹åº”çš„å‚æ•°å€¼ç»‘å®šåˆ°ç»“æ„ä½“å­—æ®µä¸Šã€‚åœ¨ç¤ºä¾‹ä»£ç ä¸­çš„ <code>Person</code> ç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨äº† <code>form</code> æ ‡ç­¾æ¥æŒ‡å®šå‚æ•°çš„æ¥æºå’Œç»‘å®šè§„åˆ™ï¼Œå¦‚ <code>form:&quot;name&quot;</code>ã€<code>form:&quot;address&quot;</code> å’Œ <code>form:&quot;birthday&quot; time_format:&quot;2006-01-02&quot; time_utc:&quot;1&quot;</code>ã€‚è¿™æ ·ï¼Œåœ¨è°ƒç”¨ <code>ShouldBind</code> æ–¹æ³•æ—¶ï¼ŒGin ä¼šæ ¹æ®è¯·æ±‚ä¸­çš„è¡¨å•å‚æ•°åç§°å’Œç»“æ„ä½“å­—æ®µçš„æ ‡ç­¾è¿›è¡Œè‡ªåŠ¨åŒ¹é…å’Œç»‘å®šã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>ShouldBind</code> æ–¹æ³•åœ¨ç»‘å®šå‚æ•°æ—¶ä¼šæ ¹æ®ç›®æ ‡ç»“æ„ä½“å­—æ®µçš„ç±»å‹å’Œæ ‡ç­¾è¿›è¡Œè‡ªåŠ¨è½¬æ¢å’ŒéªŒè¯ï¼Œå¦‚æœç»‘å®šå¤±è´¥ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ <code>ShouldBind</code> æ–¹æ³•æ—¶ï¼Œéœ€è¦è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œå¯ä»¥é€šè¿‡åˆ¤æ–­è¿”å›çš„é”™è¯¯æ˜¯å¦ä¸º <code>nil</code> æ¥åˆ¤æ–­å‚æ•°ç»‘å®šæ˜¯å¦æˆåŠŸã€‚å¦‚æœç»‘å®šå¤±è´¥ï¼Œå¯ä»¥é€šè¿‡é”™è¯¯ä¿¡æ¯æ¥è·å–è¯¦ç»†çš„é”™è¯¯åŸå› ï¼Œå¹¶åšç›¸åº”çš„å¤„ç†ã€‚</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ä»£ç å¤§æ„"><a href="#ï¼ˆ3ï¼‰ä»£ç å¤§æ„" class="headerlink" title="ï¼ˆ3ï¼‰ä»£ç å¤§æ„"></a>ï¼ˆ3ï¼‰ä»£ç å¤§æ„</h4><blockquote>
<ol>
<li>å®šä¹‰äº†ä¸€ä¸ª <code>Person</code> ç»“æ„ä½“ï¼Œç”¨äºå­˜å‚¨è¯·æ±‚å‚æ•°ã€‚<code>Person</code> ç»“æ„ä½“åŒ…å«äº†ä¸‰ä¸ªå­—æ®µï¼š<code>Name</code>ã€<code>Address</code> å’Œ <code>Birthday</code>ï¼Œåˆ†åˆ«å¯¹åº”è¯·æ±‚ä¸­çš„è¡¨å•å‚æ•° â€œnameâ€ã€â€addressâ€ å’Œ â€œbirthdayâ€ã€‚</li>
<li>åˆ›å»ºäº†ä¸€ä¸ª Gin è·¯ç”±å¼•æ“ <code>route</code>ï¼Œä½¿ç”¨äº†é»˜è®¤çš„ä¸­é—´ä»¶ã€‚</li>
<li>æ³¨å†Œäº†ä¸€ä¸ª HTTP GET è¯·æ±‚çš„å¤„ç†å‡½æ•° <code>startPage</code>ï¼Œè¯¥å¤„ç†å‡½æ•°é€šè¿‡è°ƒç”¨ Gin çš„ <code>ShouldBind</code> æ–¹æ³•å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ° <code>Person</code> ç»“æ„ä½“å˜é‡ <code>person</code> ä¸Šã€‚<code>ShouldBind</code> æ–¹æ³•ä¼šæ ¹æ®è¯·æ±‚çš„ç±»å‹ï¼ˆGET æˆ– POSTï¼‰å’Œè¯·æ±‚çš„ content-type è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç»‘å®šå¼•æ“ï¼ˆForm æˆ– JSON&#x2F;XML ç»‘å®šå¼•æ“ï¼‰è¿›è¡Œå‚æ•°ç»‘å®šã€‚</li>
<li>åœ¨ <code>startPage</code> å‡½æ•°ä¸­ï¼Œé€šè¿‡æ‰“å° <code>person</code> ç»“æ„ä½“çš„å­—æ®µå€¼æ¥éªŒè¯å‚æ•°ç»‘å®šæ˜¯å¦æˆåŠŸã€‚</li>
<li>æœ€åï¼Œè¿”å›äº†ä¸€ä¸ª HTTP 200 OK å“åº”ï¼Œå†…å®¹ä¸º â€œSuccessâ€ å­—ç¬¦ä¸²ã€‚</li>
</ol>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„ HTTP GET è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œä½¿ç”¨ Gin æ¡†æ¶æ¥ç»‘å®šè¯·æ±‚å‚æ•°å¹¶å¤„ç†è¯·æ±‚ã€‚å½“è¯·æ±‚åˆ°è¾¾ <code>/testing</code> è·¯å¾„æ—¶ï¼Œä¼šè§¦å‘ <code>startPage</code> å‡½æ•°ï¼Œå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ° <code>Person</code> ç»“æ„ä½“å˜é‡ï¼Œå¹¶è¾“å‡ºå­—æ®µå€¼ã€‚å¦‚æœå‚æ•°ç»‘å®šå¤±è´¥ï¼Œåˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚æœ€åè¿”å›ä¸€ä¸ª â€œSuccessâ€ å­—ç¬¦ä¸²ä½œä¸ºå“åº”ã€‚</p>
</blockquote>
<h4 id="ï¼ˆ4ï¼‰æµ‹è¯•"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•"></a>ï¼ˆ4ï¼‰æµ‹è¯•</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">http:<span class="hljs-comment">//localhost:8085/testing?name=ft&amp;address=China&amp;birthday=2023-04-11</span><br></code></pre></td></tr></table></figure>

<p>è‹¥å“åº”æˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢ä¸­ä¼šæ˜¾ç¤º<code>Success</code>ï¼›</p>
<p>è‹¥å“åº”æˆåŠŸï¼Œä¸”ä¿¡æ¯åŒ¹é…æˆåŠŸï¼Œç»ˆç«¯ä¸­ä¼šæ‰“å°å‡ºä¿¡æ¯ã€‚</p>
<h2 id="5ã€ç»‘å®š-Uri"><a href="#5ã€ç»‘å®š-Uri" class="headerlink" title="5ã€ç»‘å®š Uri"></a>5ã€ç»‘å®š Uri</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -3"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -3" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-comment">// Person ç»“æ„ä½“ç”¨äºç»‘å®š URI å‚æ•°</span><br><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> &#123;<br>	ID   <span class="hljs-type">string</span> <span class="hljs-string">`uri:&quot;id&quot; binding:&quot;required,uuid&quot;`</span> <span class="hljs-comment">// å°† URI ä¸­çš„ id å‚æ•°ç»‘å®šåˆ° ID å­—æ®µï¼Œå¹¶æŒ‡å®šå¿…å¡«å’Œ UUID æ ¼å¼éªŒè¯</span><br>	Name <span class="hljs-type">string</span> <span class="hljs-string">`uri:&quot;name&quot; binding:&quot;required&quot;`</span>    <span class="hljs-comment">// å°† URI ä¸­çš„ name å‚æ•°ç»‘å®šåˆ° Name å­—æ®µï¼Œå¹¶æŒ‡å®šå¿…å¡«éªŒè¯</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	route := gin.Default()	<span class="hljs-comment">// åˆ›å»ºé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“</span><br><br>	<span class="hljs-comment">// å®šä¹‰è·¯ç”±å¤„ç†å‡½æ•°</span><br>	route.GET(<span class="hljs-string">&quot;/:name/:id&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		<span class="hljs-keyword">var</span> person Person<br>		<span class="hljs-comment">// ä½¿ç”¨ ShouldBindUri æ–¹æ³•å°† URI å‚æ•°ç»‘å®šåˆ° Person ç»“æ„ä½“</span><br>		<span class="hljs-keyword">if</span> err := c.ShouldBindUri(&amp;person); err != <span class="hljs-literal">nil</span> &#123;	<span class="hljs-comment">//ç»‘å®šæˆåŠŸï¼Œè¿”å›nil</span><br>			c.JSON(<span class="hljs-number">400</span>, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: err.Error()&#125;) <span class="hljs-comment">// å¦‚æœç»‘å®šå¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯</span><br>			<span class="hljs-keyword">return</span><br>		&#125;<br>		c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;name&quot;</span>: person.Name, <span class="hljs-string">&quot;uuid&quot;</span>: person.ID&#125;) <span class="hljs-comment">// å¦‚æœç»‘å®šæˆåŠŸï¼Œè¿”å›ç»‘å®šåçš„å€¼</span><br>	&#125;)<br><br>	route.Run(<span class="hljs-string">&quot;:8088&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-3"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-3" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><code>c.ShouldBindUri(&amp;person)</code>: è¿™æ˜¯ <code>*gin.Context</code> ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºå°† URI å‚æ•°ç»‘å®šåˆ°ç»“æ„ä½“å˜é‡ <code>person</code> ä¸Šã€‚<code>ShouldBindUri</code> æ–¹æ³•ä¼šè‡ªåŠ¨æ ¹æ®ç»“æ„ä½“å­—æ®µçš„ <code>uri</code> æ ‡ç­¾å’Œ URI è·¯å¾„ä¸­çš„å‚æ•°åç§°è¿›è¡ŒåŒ¹é…å’Œç»‘å®šã€‚åœ¨ç¤ºä¾‹ä»£ç ä¸­ï¼Œ<code>ID</code> å­—æ®µçš„ <code>uri</code> æ ‡ç­¾æŒ‡å®šäº†å‚æ•°åç§°ä¸º <code>id</code>ï¼Œ<code>Name</code> å­—æ®µçš„ <code>uri</code> æ ‡ç­¾æŒ‡å®šäº†å‚æ•°åç§°ä¸º <code>name</code>ã€‚åŒæ—¶ï¼Œç»“æ„ä½“å­—æ®µçš„ <code>binding</code> æ ‡ç­¾è¿˜æŒ‡å®šäº†å‚æ•°çš„éªŒè¯è§„åˆ™ï¼Œä¾‹å¦‚ <code>required</code> è¡¨ç¤ºå‚æ•°å¿…å¡«ï¼Œ<code>uuid</code> è¡¨ç¤ºå‚æ•°çš„å€¼å¿…é¡»æ˜¯ UUID æ ¼å¼ã€‚</li>
<li><code>c.JSON(400, gin.H&#123;&quot;msg&quot;: err.Error()&#125;)</code>: è¿™æ˜¯ <code>*gin.Context</code> ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºæ„å»ºä¸€ä¸ª JSON æ ¼å¼çš„ HTTP å“åº”ã€‚å…¶ä¸­ï¼Œ<code>400</code> è¡¨ç¤º HTTP çŠ¶æ€ç ä¸º 400ï¼ˆBad Requestï¼‰ï¼Œ<code>gin.H&#123;&quot;msg&quot;: err.Error()&#125;</code> è¡¨ç¤ºå“åº”çš„ JSON æ•°æ®ï¼ŒåŒ…å«ä¸€ä¸ªåä¸º <code>msg</code> çš„å­—æ®µï¼Œå€¼ä¸ºé”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚</li>
<li><code>c.JSON(200, gin.H&#123;&quot;name&quot;: person.Name, &quot;uuid&quot;: person.ID&#125;)</code>: è¿™æ˜¯ <code>*gin.Context</code> ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºæ„å»ºä¸€ä¸ª JSON æ ¼å¼çš„ HTTP å“åº”ã€‚å…¶ä¸­ï¼Œ<code>200</code> è¡¨ç¤º HTTP çŠ¶æ€ç ä¸º 200ï¼ˆOKï¼‰ï¼Œ<code>gin.H&#123;&quot;name&quot;: person.Name, &quot;uuid&quot;: person.ID&#125;</code> è¡¨ç¤ºå“åº”çš„ JSON æ•°æ®ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º <code>name</code> å’Œ <code>uuid</code>ï¼Œå€¼åˆ†åˆ«ä¸º <code>person.Name</code> å’Œ <code>person.ID</code> çš„å€¼ï¼Œå³ç»‘å®šåçš„ URI å‚æ•°å€¼ã€‚</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-2"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-2" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<p>ä¸Šè¿°ä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶æ¥åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ª GET è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œè¯¥å¤„ç†å‡½æ•°ç»‘å®šäº†ä¸¤ä¸ª URI å‚æ•°ï¼ˆ<code>:name</code> å’Œ <code>:id</code>ï¼‰åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„ç»“æ„ä½“ <code>Person</code> çš„å­—æ®µä¸Šã€‚å…·ä½“è€Œè¨€ï¼Œä»£ç å®ç°äº†ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li>å¯¼å…¥äº† <code>github.com/gin-gonic/gin</code> åŒ…ï¼Œè¯¥åŒ…æ˜¯ Gin æ¡†æ¶çš„æ ¸å¿ƒåº“ï¼Œæä¾›äº†ç”¨äºæ„å»º Web åº”ç”¨çš„ HTTP è·¯ç”±å’Œä¸­é—´ä»¶åŠŸèƒ½ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Person</code> çš„ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“åŒ…å«äº†ä¸¤ä¸ªå­—æ®µ <code>ID</code> å’Œ <code>Name</code>ï¼Œåˆ†åˆ«ç”¨äºç»‘å®š URI å‚æ•° <code>id</code> å’Œ <code>name</code>ã€‚</li>
<li>åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ <code>route</code>ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œè·¯ç”±ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªè·¯ç”±å¤„ç†å‡½æ•°ï¼Œå¤„ç† HTTP GET è¯·æ±‚ï¼Œè¯¥å¤„ç†å‡½æ•°ç»‘å®šäº†è·¯ç”±è·¯å¾„ä¸­çš„ <code>:name</code> å’Œ <code>:id</code> å‚æ•°åˆ° <code>Person</code> ç»“æ„ä½“çš„å­—æ®µä¸Šï¼Œå¹¶åœ¨ç»‘å®šæˆåŠŸåè¿”å›ç»‘å®šåçš„å€¼ï¼Œå¦åˆ™è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</li>
<li>ä½¿ç”¨ <code>c.ShouldBindUri(&amp;person)</code> æ–¹æ³•å°† URI å‚æ•°ç»‘å®šåˆ° <code>Person</code> ç»“æ„ä½“çš„å­—æ®µä¸Šã€‚<code>ShouldBindUri</code> æ–¹æ³•ä¼šæ ¹æ®ç»“æ„ä½“å­—æ®µçš„æ ‡ç­¾ä¿¡æ¯æ¥è§£æå’ŒéªŒè¯ URI å‚æ•°ï¼Œå¹¶å°†è§£æåçš„å€¼èµ‹ç»™ç»“æ„ä½“å­—æ®µã€‚</li>
<li>å¦‚æœ URI å‚æ•°ç»‘å®šå¤±è´¥ï¼ˆä¾‹å¦‚ï¼Œç¼ºå°‘å¿…å¡«å‚æ•°æˆ–å‚æ•°æ ¼å¼ä¸ç¬¦åˆé¢„æœŸï¼‰ï¼Œåˆ™é€šè¿‡ <code>c.JSON</code> æ–¹æ³•è¿”å› HTTP çŠ¶æ€ç  400ï¼ˆBad Requestï¼‰å’Œé”™è¯¯ä¿¡æ¯ã€‚</li>
<li>å¦‚æœ URI å‚æ•°ç»‘å®šæˆåŠŸï¼Œåˆ™é€šè¿‡ <code>c.JSON</code> æ–¹æ³•è¿”å› HTTP çŠ¶æ€ç  200ï¼ˆOKï¼‰å’Œç»‘å®šåçš„å€¼ï¼ŒåŒ…æ‹¬ <code>Person</code> ç»“æ„ä½“ä¸­çš„ <code>Name</code> å’Œ <code>ID</code> å­—æ®µçš„å€¼ã€‚</li>
<li>æœ€åï¼Œé€šè¿‡ <code>route.Run(&quot;:8088&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨æœ¬åœ°çš„ 8088 ç«¯å£ä¸Šã€‚ä¸€æ—¦æœ‰è¯·æ±‚åˆ°è¾¾è¯¥ç«¯å£ï¼Œå°†ä¼šç”± Gin è·¯ç”±å¼•æ“å¤„ç†å¹¶è°ƒç”¨ç›¸åº”çš„è·¯ç”±å¤„ç†å‡½æ•°ã€‚</li>
</ol>
</blockquote>
<h4 id="ï¼ˆ4ï¼‰æµ‹è¯•-1"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•-1" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•"></a>ï¼ˆ4ï¼‰æµ‹è¯•</h4><p>ç½‘é¡µï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">http:<span class="hljs-comment">//localhost:8088/thinkerou/987fbc97-4bed-5078-9f07-9141ba07c9f3</span><br>http:<span class="hljs-comment">//localhost:8088/thinkerou/not-uuid</span><br></code></pre></td></tr></table></figure>

<p>ç»ˆç«¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">Invoke-WebRequest -Uri <span class="hljs-string">&quot;http://localhost:8088/thinkerou/987fbc97-4bed-5078-9f07-9141ba07c9f3&quot;</span> -Method GET<br><br>Invoke-WebRequest -Uri <span class="hljs-string">&quot;http://localhost:8088/thinkerou/not-uuid&quot;</span> -Method GET<br></code></pre></td></tr></table></figure>



<h2 id="6ã€æ§åˆ¶Logé«˜äº®è¾“å‡º"><a href="#6ã€æ§åˆ¶Logé«˜äº®è¾“å‡º" class="headerlink" title="6ã€æ§åˆ¶Logé«˜äº®è¾“å‡º"></a>6ã€æ§åˆ¶Logé«˜äº®è¾“å‡º</h2><blockquote>
<p>é»˜è®¤æ˜¯ä¼šé«˜äº®ï¼ˆå½“ç„¶è¿™åŸºäºä½ ä½¿ç”¨çš„ TTYï¼‰ã€‚</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -4"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -4" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><blockquote>
<p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨æ—¥å¿—é«˜äº®ï¼š</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// å…³é—­é«˜äº®</span><br>    gin.DisableConsoleColor()<br><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é»˜è®¤ä¸­é—´ä»¶ï¼ˆloggerå’Œrecoveryï¼‰çš„ginè·¯ç”±å™¨</span><br>    router := gin.Default()<br><br>    <span class="hljs-comment">// å¤„ç†GETè¯·æ±‚ï¼Œè·¯å¾„ä¸º&quot;/ping&quot;</span><br>    router.GET(<span class="hljs-string">&quot;/ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;pong&quot;</span>) <span class="hljs-comment">// å‘å®¢æˆ·ç«¯è¿”å›å­—ç¬¦ä¸²&quot;pong&quot;ï¼ŒçŠ¶æ€ç ä¸º200</span><br>    &#125;)<br><br>    <span class="hljs-comment">// å¯åŠ¨HTTPæœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ç«¯å£8080ä¸Šï¼Œç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚</span><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>æ‰‹åŠ¨è®¾ç½®é«˜äº®ï¼š</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// å¼ºåˆ¶å¼€å¯æ—¥å¿—é«˜äº®æ˜¾ç¤º</span><br>    gin.ForceConsoleColor()<br><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é»˜è®¤ä¸­é—´ä»¶ï¼ˆloggerå’Œrecoveryï¼‰çš„ginè·¯ç”±å™¨</span><br>    router := gin.Default()<br><br>    <span class="hljs-comment">// å¤„ç†GETè¯·æ±‚ï¼Œè·¯å¾„ä¸º&quot;/ping&quot;</span><br>    router.GET(<span class="hljs-string">&quot;/ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;pong&quot;</span>) <span class="hljs-comment">// å‘å®¢æˆ·ç«¯è¿”å›å­—ç¬¦ä¸²&quot;pong&quot;ï¼ŒçŠ¶æ€ç ä¸º200</span><br>    &#125;)<br><br>    <span class="hljs-comment">// å¯åŠ¨HTTPæœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ç«¯å£8080ä¸Šï¼Œç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚</span><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-4"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-4" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><code>gin.ForceConsoleColor()</code>: è¿™æ˜¯ Gin æ¡†æ¶çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå¼ºåˆ¶å¼€å¯æ—¥å¿—çš„é«˜äº®æ˜¾ç¤ºã€‚å®ƒå¯ä»¥è®© Gin æ¡†æ¶åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯æ›´åŠ é†’ç›®å’Œæ˜“è¯»ã€‚</li>
<li><code>gin.DisableConsoleColor()</code>: è¿™æ˜¯ Gin æ¡†æ¶çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå…³é—­æ—¥å¿—çš„é«˜äº®æ˜¾ç¤ºã€‚å½“è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•åï¼ŒGin æ¡†æ¶åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯å°†ä¸å†å…·æœ‰é«˜äº®æ•ˆæœï¼Œå˜ä¸ºæ™®é€šçš„æ–‡æœ¬æ˜¾ç¤ºã€‚</li>
</ul>
<h2 id="7ã€è‡ªå®šä¹‰HTTPé…ç½®"><a href="#7ã€è‡ªå®šä¹‰HTTPé…ç½®" class="headerlink" title="7ã€è‡ªå®šä¹‰HTTPé…ç½®"></a>7ã€è‡ªå®šä¹‰HTTPé…ç½®</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -5"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -5" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><blockquote>
<p>â€‹	ç›´æ¥ä½¿ç”¨</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼Œä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶ï¼šæ—¥å¿—å’Œæ¢å¤ä¸­é—´ä»¶</span><br>    http.ListenAndServe(<span class="hljs-string">&quot;:8080&quot;</span>, router) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ç«¯å£ 8080 ä¸Šï¼Œä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚</span><br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>æˆ–</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼Œä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶ï¼šæ—¥å¿—å’Œæ¢å¤ä¸­é—´ä»¶</span><br><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ http.Server å®ä¾‹</span><br>    s := &amp;http.Server&#123;<br>        Addr:           <span class="hljs-string">&quot;:8080&quot;</span>,                        <span class="hljs-comment">// ç›‘å¬çš„åœ°å€å’Œç«¯å£</span><br>        Handler:        router,                         <span class="hljs-comment">// ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚</span><br>        ReadTimeout:    <span class="hljs-number">10</span> * time.Second,               <span class="hljs-comment">// è¯»å–è¯·æ±‚è¶…æ—¶æ—¶é—´</span><br>        WriteTimeout:   <span class="hljs-number">10</span> * time.Second,               <span class="hljs-comment">// å†™å…¥å“åº”è¶…æ—¶æ—¶é—´</span><br>        MaxHeaderBytes: <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">20</span>,                         <span class="hljs-comment">// æœ€å¤§è¯·æ±‚å¤´å¤§å°</span><br>    &#125;<br><br>    s.ListenAndServe() <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-5"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-5" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><p><code>http.ListenAndServe(&quot;:8080&quot;, router)</code>: è¿™æ˜¯ Go æ ‡å‡†åº“ <code>net/http</code> æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå¯åŠ¨ä¸€ä¸ª HTTP æœåŠ¡å™¨å¹¶ç›‘å¬æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä½¿ç”¨ä¼ å…¥çš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šç›‘å¬åœ°å€ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰å¯ç”¨çš„ç½‘å¡ï¼Œç«¯å£ä¸º 8080ã€‚<code>router</code> æ˜¯ä¹‹å‰åˆ›å»ºçš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼Œç”¨äºå¤„ç†è¯·æ±‚ã€‚</p>
</li>
<li><p><code>s := &amp;http.Server&#123;...&#125;</code>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ª <code>http.Server</code> å®ä¾‹ï¼Œå¹¶è®¾ç½®äº†ä»¥ä¸‹é…ç½®é¡¹ï¼š</p>
</li>
<li><ol>
<li><code>Addr</code>ï¼šæŒ‡å®šæœåŠ¡å™¨ç›‘å¬çš„åœ°å€å’Œç«¯å£ï¼Œè¿™é‡Œè®¾ç½®ä¸º <code>:8080</code>ï¼Œè¡¨ç¤ºç›‘å¬åœ¨æœ¬åœ°çš„ 8080 ç«¯å£ã€‚</li>
<li><code>Handler</code>ï¼šè®¾ç½®å¤„ç†è¯·æ±‚çš„è·¯ç”±å¼•æ“ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¹‹å‰åˆ›å»ºçš„ <code>router</code>ï¼Œå³ Gin è·¯ç”±å¼•æ“ã€‚</li>
<li><code>ReadTimeout</code>ï¼šè®¾ç½®è¯»å–è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œè¿™é‡Œè®¾ç½®ä¸º 10 ç§’ï¼Œè¡¨ç¤ºå¦‚æœåœ¨ 10 ç§’å†…æ²¡æœ‰è¯»å–åˆ°å®Œæ•´çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šå…³é—­è¿æ¥ã€‚</li>
<li><code>WriteTimeout</code>ï¼šè®¾ç½®å†™å…¥å“åº”çš„è¶…æ—¶æ—¶é—´ï¼Œè¿™é‡Œè®¾ç½®ä¸º 10 ç§’ï¼Œè¡¨ç¤ºå¦‚æœåœ¨ 10 ç§’å†…æ²¡æœ‰å®Œæˆå“åº”çš„å†™å…¥æ“ä½œï¼ŒæœåŠ¡å™¨ä¼šå…³é—­è¿æ¥ã€‚</li>
<li><code>MaxHeaderBytes</code>ï¼šè®¾ç½®æœ€å¤§è¯·æ±‚å¤´çš„å¤§å°ï¼Œè¿™é‡Œè®¾ç½®ä¸º 1 &lt;&lt; 20ï¼Œå³ 1MBï¼Œè¡¨ç¤ºè¯·æ±‚å¤´çš„å¤§å°ä¸è¶…è¿‡ 1MBã€‚</li>
</ol>
</li>
<li><p>è¿™äº›é…ç½®é¡¹å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œç”¨äºè‡ªå®šä¹‰ HTTP æœåŠ¡å™¨çš„è¡Œä¸ºï¼Œä¾‹å¦‚è®¾ç½®è¶…æ—¶æ—¶é—´ã€é™åˆ¶è¯·æ±‚å¤´å¤§å°ç­‰ã€‚åœ¨åˆ›å»ºå®Œ <code>http.Server</code> å®ä¾‹åï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ <code>ListenAndServe()</code> æ–¹æ³•æ¥å¯åŠ¨æœåŠ¡å™¨ï¼Œå¼€å§‹ç›‘å¬æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä½¿ç”¨è®¾ç½®çš„è·¯ç”±å¼•æ“æ¥å¤„ç†è¯·æ±‚ã€‚</p>
</li>
<li><p><code>s.ListenAndServe()</code>: è¿™æ˜¯ http.Server çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬åœ¨æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚ã€‚åœ¨è¿™é‡Œï¼Œ<code>s</code> æ˜¯ä¹‹å‰åˆ›å»ºçš„è‡ªå®šä¹‰ http.Server å®ä¾‹ï¼Œé€šè¿‡è°ƒç”¨ <code>ListenAndServe()</code> æ–¹æ³•æ¥å¯åŠ¨æœåŠ¡å™¨ã€‚</p>
</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-3"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-3" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼Œä½¿ç”¨äº†é»˜è®¤çš„ä¸­é—´ä»¶åŒ…æ‹¬æ—¥å¿—å’Œæ¢å¤ä¸­é—´ä»¶ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>http.Server</code> å®ä¾‹ï¼Œè®¾ç½®äº†ç›‘å¬çš„åœ°å€å’Œç«¯å£ä¸º <code>:8080</code>ï¼Œä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„è·¯ç”±å¼•æ“ <code>router</code> æ¥å¤„ç†è¯·æ±‚ï¼Œè®¾ç½®äº†è¯»å–è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ä¸º 10 ç§’ï¼Œå†™å…¥å“åº”çš„è¶…æ—¶æ—¶é—´ä¸º 10 ç§’ï¼Œæœ€å¤§è¯·æ±‚å¤´å¤§å°ä¸º 1MBã€‚</li>
<li>è°ƒç”¨ <code>ListenAndServe()</code> æ–¹æ³•å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œå¼€å§‹ç›‘å¬æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“æ¥å¤„ç†è¯·æ±‚ã€‚</li>
</ol>
<p>è¿™æ®µä»£ç çš„ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ HTTP æœåŠ¡å™¨ï¼Œä½¿ç”¨ Gin æ¡†æ¶æ¥å¤„ç†è¯·æ±‚ï¼Œå¹¶è®¾ç½®äº†ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®é¡¹ï¼Œå¦‚è¶…æ—¶æ—¶é—´å’Œæœ€å¤§è¯·æ±‚å¤´å¤§å°ã€‚æœ€åé€šè¿‡è°ƒç”¨ <code>ListenAndServe()</code> æ–¹æ³•å¯åŠ¨æœåŠ¡å™¨ï¼Œä½¿å…¶å¼€å§‹ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p>
</blockquote>
<h2 id="8ã€-è‡ªå®šä¹‰-Log-æ–‡ä»¶"><a href="#8ã€-è‡ªå®šä¹‰-Log-æ–‡ä»¶" class="headerlink" title="8ã€ è‡ªå®šä¹‰ Log æ–‡ä»¶"></a>8ã€ è‡ªå®šä¹‰ Log æ–‡ä»¶</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -6"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -6" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;fmt&quot;</span><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>	<span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.New() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶</span><br><br>	<span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰çš„æ—¥å¿—ä¸­é—´ä»¶ï¼Œå°†æ—¥å¿—æ ¼å¼åŒ–ä¸ºè‡ªå®šä¹‰æ ¼å¼</span><br>	router.Use(gin.LoggerWithFormatter(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(param gin.LogFormatterParams)</span></span> <span class="hljs-type">string</span> &#123;<br>		<span class="hljs-comment">// è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼</span><br>		<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;%s - [%s] \&quot;%s %s %s %d %s \&quot;%s\&quot; %s\&quot;\n&quot;</span>,<br>			param.ClientIP,                       <span class="hljs-comment">//å®¢æˆ·ç«¯ IP åœ°å€</span><br>			param.TimeStamp.Format(time.RFC1123), <span class="hljs-comment">//æ—¶é—´æˆ³</span><br>			param.Method,                         <span class="hljs-comment">//è¯·æ±‚æ–¹æ³•</span><br>			param.Path,                           <span class="hljs-comment">//è¯·æ±‚è·¯å¾„</span><br>			param.Request.Proto,                  <span class="hljs-comment">//è¯·æ±‚åè®®ç‰ˆæœ¬</span><br>			param.StatusCode,                     <span class="hljs-comment">//å“åº”çŠ¶æ€ç </span><br>			param.Latency,                        <span class="hljs-comment">//è¯·æ±‚è€—æ—¶</span><br>			param.Request.UserAgent(),            <span class="hljs-comment">//å®¢æˆ·ç«¯ UserAgent ä¿¡æ¯</span><br>			param.ErrorMessage,                   <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯ï¼ˆè‹¥æœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼‰</span><br>		)<br>	&#125;))<br><br>	router.Use(gin.Recovery()) <span class="hljs-comment">// æ·»åŠ æ¢å¤ä¸­é—´ä»¶ï¼Œç”¨äºæ¢å¤ä» panic ä¸­æ¢å¤</span><br><br>	router.GET(<span class="hljs-string">&quot;/ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;pong&quot;</span>)<br>	&#125;)<br><br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-6"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-6" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><p><code>router.Use()</code>: æ­¤æ–¹æ³•ç”¨äºå‘ Gin è·¯ç”±å¼•æ“æ·»åŠ ä¸­é—´ä»¶ã€‚ä¸­é—´ä»¶æ˜¯å¤„ç† HTTP è¯·æ±‚çš„å‡½æ•°ï¼Œåœ¨è¯·æ±‚åˆ°è¾¾å®é™…çš„è·¯ç”±å¤„ç†å™¨ä¹‹å‰è¢«æ‰§è¡Œã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½¿ç”¨ <code>router.Use()</code> æ·»åŠ äº†ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼š</p>
</li>
<li><p><code>router.Use()</code>: æ­¤æ–¹æ³•ç”¨äºå‘ Gin è·¯ç”±å¼•æ“æ·»åŠ ä¸­é—´ä»¶ã€‚ä¸­é—´ä»¶æ˜¯å¤„ç† HTTP è¯·æ±‚çš„å‡½æ•°ï¼Œåœ¨è¯·æ±‚åˆ°è¾¾å®é™…çš„è·¯ç”±å¤„ç†å™¨ä¹‹å‰è¢«æ‰§è¡Œã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½¿ç”¨ <code>router.Use()</code> æ·»åŠ äº†ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼š</p>
</li>
<li><p><code>gin.LoggerWithFormatter()</code>: è¿™ä¸ªä¸­é—´ä»¶å‡½æ•°ç”¨äºä»¥è‡ªå®šä¹‰æ ¼å¼è®°å½• HTTP è¯·æ±‚æ—¥å¿—ã€‚<code>param</code> å‚æ•°æ˜¯ <code>gin.LogFormatterParams</code> ç±»å‹çš„å®ä¾‹ï¼ŒåŒ…å«äº†æœ‰å…³ HTTP è¯·æ±‚å’Œå“åº”çš„ä¿¡æ¯ã€‚åœ¨ç»™å®šçš„ä»£ç ä¸­ï¼Œ<code>param</code> è¢«ç”¨äºæ ¼å¼åŒ–ä¸€ä¸ªè‡ªå®šä¹‰çš„æ—¥å¿—å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å®¢æˆ·ç«¯ IP åœ°å€ã€æ—¶é—´æˆ³ã€HTTP æ–¹æ³•ã€è¯·æ±‚è·¯å¾„ã€åè®®ç‰ˆæœ¬ã€å“åº”çŠ¶æ€ç ã€è¯·æ±‚è€—æ—¶ã€å®¢æˆ·ç«¯ UserAgent ä¿¡æ¯å’Œé”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p>
</li>
<li><p><code>gin.Recovery()</code>: è¿™ä¸ªä¸­é—´ä»¶å‡½æ•°ç”¨äºä»å¯èƒ½åœ¨å¤„ç† HTTP è¯·æ±‚æ—¶å‘ç”Ÿçš„ panic ä¸­æ¢å¤ã€‚å¦‚æœå‘ç”Ÿ panicï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¼šä»ä¸­æ¢å¤ï¼Œå¹¶å‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ª 500 å†…éƒ¨æœåŠ¡å™¨é”™è¯¯çš„å“åº”ã€‚</p>
</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-4"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-4" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li><p>å¯¼å…¥äº† <code>fmt</code>ã€<code>github.com/gin-gonic/gin</code> å’Œ <code>time</code> åŒ…ã€‚</p>
</li>
<li><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ <code>router</code>ï¼Œå¹¶ä½¿ç”¨ <code>gin.New()</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªä¸ä½¿ç”¨é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±å¼•æ“ã€‚</p>
</li>
<li><p>ä½¿ç”¨ <code>router.Use()</code> æ–¹æ³•æ·»åŠ äº†ä¸¤ä¸ªè‡ªå®šä¹‰ä¸­é—´ä»¶ï¼š</p>
<p>a. <code>gin.LoggerWithFormatter()</code> ä¸­é—´ä»¶ï¼Œç”¨äºå°†æ—¥å¿—æ ¼å¼åŒ–ä¸ºè‡ªå®šä¹‰æ ¼å¼ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>gin.LogFormatterParams</code> å‚æ•°è·å–äº†è¯·æ±‚å’Œå“åº”çš„ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨è‡ªå®šä¹‰çš„æ ¼å¼å°†è¿™äº›ä¿¡æ¯ç»„åˆæˆä¸€ä¸ªæ—¥å¿—å­—ç¬¦ä¸²ã€‚</p>
<p>b. <code>gin.Recovery()</code> ä¸­é—´ä»¶ï¼Œç”¨äºä» panic ä¸­æ¢å¤ã€‚è¿™å°†ç¡®ä¿åœ¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿ panic æ—¶ï¼ŒæœåŠ¡å™¨ä¸ä¼šå´©æºƒï¼Œè€Œæ˜¯èƒ½å¤Ÿä»ä¸­æ¢å¤ï¼Œå¹¶è¿”å›ä¸€ä¸ª 500 å†…éƒ¨æœåŠ¡å™¨é”™è¯¯çš„å“åº”ã€‚</p>
</li>
<li><p>ä½¿ç”¨ <code>router.GET()</code> æ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªå¤„ç† HTTP GET è¯·æ±‚çš„è·¯ç”±ï¼Œè·¯å¾„ä¸º â€œ&#x2F;pingâ€ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>c.String()</code> æ–¹æ³•å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªçŠ¶æ€ç ä¸º 200 çš„ â€œpongâ€ å­—ç¬¦ä¸²å“åº”ã€‚</p>
</li>
<li><p>æœ€åï¼Œä½¿ç”¨ <code>router.Run()</code> æ–¹æ³•å¯åŠ¨äº† HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨åœ°å€ â€œ:8080â€ ä¸Šï¼Œå¹¶ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†ä¼ å…¥çš„è¯·æ±‚ã€‚</p>
</li>
</ol>
<p>è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ç«¯å£ 8080ï¼Œå½“è®¿é—® â€œ&#x2F;pingâ€ è·¯å¾„æ—¶ï¼Œè¿”å›ä¸€ä¸ª â€œpongâ€ çš„å“åº”ã€‚åŒæ—¶ï¼Œè¿˜æ·»åŠ äº†è‡ªå®šä¹‰çš„æ—¥å¿—ä¸­é—´ä»¶å’Œæ¢å¤ä¸­é—´ä»¶ï¼Œä»¥å¢å¼ºæœåŠ¡å™¨çš„å¥å£®æ€§å’Œå¯é æ€§ã€‚</p>
</blockquote>
<h2 id="9ã€è‡ªå®šä¹‰ä¸­é—´ä»¶"><a href="#9ã€è‡ªå®šä¹‰ä¸­é—´ä»¶" class="headerlink" title="9ã€è‡ªå®šä¹‰ä¸­é—´ä»¶"></a>9ã€è‡ªå®šä¹‰ä¸­é—´ä»¶</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -7"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -7" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Logger</span><span class="hljs-params">()</span></span> gin.HandlerFunc &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        t := time.Now() <span class="hljs-comment">// è®°å½•å½“å‰æ—¶é—´</span><br><br>        c.Set(<span class="hljs-string">&quot;example&quot;</span>, <span class="hljs-string">&quot;12345&quot;</span>) <span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªåä¸º &quot;example&quot; çš„è‡ªå®šä¹‰å˜é‡åˆ° Gin ä¸Šä¸‹æ–‡ä¸­</span><br><br>        <span class="hljs-comment">// è¯·æ±‚å‰çš„å¤„ç†é€»è¾‘</span><br><br>        c.Next() <span class="hljs-comment">// æ‰§è¡Œä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°</span><br><br>        <span class="hljs-comment">// è¯·æ±‚åçš„å¤„ç†é€»è¾‘</span><br>        latency := time.Since(t) <span class="hljs-comment">// è®¡ç®—è¯·æ±‚è€—æ—¶</span><br>        log.Print(latency) <span class="hljs-comment">// æ‰“å°è¯·æ±‚è€—æ—¶</span><br><br>        status := c.Writer.Status() <span class="hljs-comment">// è·å–å“åº”çŠ¶æ€ç </span><br>        log.Println(status) <span class="hljs-comment">// æ‰“å°å“åº”çŠ¶æ€ç </span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.New() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br><br>    r.Use(Logger()) <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰çš„ Logger ä¸­é—´ä»¶</span><br><br>    r.GET(<span class="hljs-string">&quot;/test&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        example := c.MustGet(<span class="hljs-string">&quot;example&quot;</span>).(<span class="hljs-type">string</span>) <span class="hljs-comment">// ä» Gin ä¸Šä¸‹æ–‡ä¸­è·å–ä¹‹å‰è®¾ç½®çš„ &quot;example&quot; å˜é‡</span><br><br>        <span class="hljs-comment">// æ‰“å°ï¼š&quot;12345&quot;</span><br>        log.Println(example)<br>    &#125;)<br><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“å¤„ç†è¯·æ±‚</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-7"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-7" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><ul>
<li><p><code>time.Now()</code>: è¿™æ˜¯ Go è¯­è¨€ä¸­çš„æ—¶é—´åŒ… <code>time</code> ä¸­çš„å‡½æ•°ï¼Œç”¨äºè·å–å½“å‰æ—¶é—´ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œç”¨äºè®°å½•è¯·æ±‚å¤„ç†å¼€å§‹çš„æ—¶é—´ <code>t</code>ï¼Œä»¥ä¾¿åç»­è®¡ç®—è¯·æ±‚è€—æ—¶ã€‚</p>
</li>
<li><p><code>c.Set(key string, value interface&#123;&#125;)</code>: è¿™æ˜¯ Gin æ¡†æ¶ä¸­ <code>Context</code> å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºåœ¨ Gin ä¸Šä¸‹æ–‡ä¸­è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„é”®å€¼å¯¹ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½¿ç”¨è¯¥æ–¹æ³•å°†ä¸€ä¸ªåä¸º â€œexampleâ€ çš„è‡ªå®šä¹‰å˜é‡è®¾ç½®åˆ° Gin ä¸Šä¸‹æ–‡ä¸­ï¼Œå€¼ä¸ºå­—ç¬¦ä¸² â€œ12345â€ã€‚</p>
</li>
<li><p><code>c.Next()</code>: è¿™æ˜¯ Gin æ¡†æ¶ä¸­ <code>Context</code> å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºæ‰§è¡Œä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œç”¨äºå°†è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œé€šå¸¸åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨ï¼Œç¡®ä¿è¯·æ±‚èƒ½å¤Ÿç»§ç»­å‘åå¤„ç†ã€‚</p>
</li>
<li><p><code>time.Since(t)</code>: è¿™æ˜¯ Go è¯­è¨€ä¸­çš„æ—¶é—´åŒ… <code>time</code> ä¸­çš„å‡½æ•°ï¼Œç”¨äºè®¡ç®—å½“å‰æ—¶é—´ä¸ç»™å®šæ—¶é—´ <code>t</code> çš„æ—¶é—´å·®ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œç”¨äºè®¡ç®—è¯·æ±‚è€—æ—¶ï¼Œå³å½“å‰æ—¶é—´ä¸è¯·æ±‚å¤„ç†å¼€å§‹æ—¶é—´ <code>t</code> çš„æ—¶é—´å·®ã€‚</p>
</li>
<li><p><code>log.Print(v ...interface&#123;&#125;)</code>: è¿™æ˜¯ Go è¯­è¨€ä¸­çš„æ—¥å¿—åŒ… <code>log</code> ä¸­çš„å‡½æ•°ï¼Œç”¨äºå°†æ—¥å¿—æ¶ˆæ¯æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œç”¨äºæ‰“å°è¯·æ±‚è€—æ—¶ <code>latency</code>å’Œç”¨äºæ‰“å°å“åº”çŠ¶æ€ç ã€‚</p>
</li>
<li><p><code>c.Writer.Status()</code>: è¿™æ˜¯ Gin æ¡†æ¶ä¸­ <code>Context</code> å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºè·å–å“åº”çŠ¶æ€ç ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œç”¨äºè·å–å“åº”çŠ¶æ€ç ï¼Œä»¥ä¾¿åç»­æ‰“å°åˆ°æ—¥å¿—ä¸­ã€‚</p>
</li>
</ul>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹æ‰§è¡Œè¿‡ç¨‹"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹æ‰§è¡Œè¿‡ç¨‹"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹æ‰§è¡Œè¿‡ç¨‹</h4><blockquote>
<ol>
<li>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ <code>r</code>ã€‚</li>
<li>ä½¿ç”¨ <code>r.Use(Logger())</code> å°†è‡ªå®šä¹‰çš„ <code>Logger</code> ä¸­é—´ä»¶æ³¨å†Œåˆ°è·¯ç”±å¼•æ“ <code>r</code> ä¸­ï¼Œä»¥ä¾¿åœ¨å¤„ç†è¯·æ±‚æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªå¤„ç† HTTP GET è¯·æ±‚çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼Œè·¯å¾„ä¸º â€œ&#x2F;testâ€ã€‚åœ¨è¿™ä¸ªå¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>c.MustGet(&quot;example&quot;)</code> ä» Gin ä¸Šä¸‹æ–‡ä¸­è·å–ä¹‹å‰åœ¨ <code>Logger</code> ä¸­é—´ä»¶ä¸­è®¾ç½®çš„åä¸º â€œexampleâ€ çš„è‡ªå®šä¹‰å˜é‡ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚</li>
<li>åœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨æ—¥å¿—åŒ… <code>log</code> å°†è·å–åˆ°çš„ â€œexampleâ€ å˜é‡æ‰“å°åˆ°æ—¥å¿—ä¸­ã€‚</li>
<li>ä½¿ç”¨ <code>r.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨åœ°å€ â€œ:8080â€ å¹¶ä½¿ç”¨åˆ›å»ºçš„è·¯ç”±å¼•æ“ <code>r</code> å¤„ç†è¯·æ±‚ã€‚</li>
<li>å½“æœ‰è¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒGin æ¡†æ¶ä¼šä¾æ¬¡æ‰§è¡Œæ³¨å†Œåˆ°è·¯ç”±å¼•æ“çš„ä¸­é—´ä»¶å’Œè·¯ç”±å¤„ç†å‡½æ•°ã€‚</li>
<li><code>Logger()</code> ä¸­é—´ä»¶ä¼šåœ¨è¯·æ±‚å‰è®°å½•å½“å‰æ—¶é—´ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªåä¸º â€œexampleâ€ çš„è‡ªå®šä¹‰å˜é‡åˆ° Gin ä¸Šä¸‹æ–‡ä¸­ã€‚ç„¶åï¼Œå®ƒä¼šè°ƒç”¨ <code>c.Next()</code> æ‰§è¡Œä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå³è·¯ç”±å¤„ç†å‡½æ•°ã€‚</li>
<li>è·¯ç”±å¤„ç†å‡½æ•°ä¼šä» Gin ä¸Šä¸‹æ–‡ä¸­è·å– â€œexampleâ€ å˜é‡ï¼Œå¹¶å°†å…¶æ‰“å°åˆ°æ—¥å¿—ä¸­ã€‚</li>
<li>å½“è·¯ç”±å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œæ§åˆ¶æƒä¼šè¿”å›åˆ° <code>Logger()</code> ä¸­é—´ä»¶ï¼Œå®ƒä¼šè®¡ç®—è¯·æ±‚è€—æ—¶ï¼Œå¹¶å°†è¯·æ±‚è€—æ—¶å’Œå“åº”çŠ¶æ€ç æ‰“å°åˆ°æ—¥å¿—ä¸­ã€‚</li>
<li>æœ€åï¼ŒHTTP æœåŠ¡å™¨ä¼šæ ¹æ®å®šä¹‰çš„è·¯ç”±å¼•æ“ <code>r</code> å¤„ç†è¯·æ±‚ï¼Œå¹¶åœ¨æŒ‡å®šçš„åœ°å€å’Œç«¯å£ä¸Šç›‘å¬ã€‚</li>
</ol>
</blockquote>
<h2 id="10ã€è‡ªå®šä¹‰éªŒè¯å™¨"><a href="#10ã€è‡ªå®šä¹‰éªŒè¯å™¨" class="headerlink" title="10ã€è‡ªå®šä¹‰éªŒè¯å™¨"></a>10ã€è‡ªå®šä¹‰éªŒè¯å™¨</h2><blockquote>
<p>å¯èƒ½æœ‰é—®é¢˜ã€‚ç•¥</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -8"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -8" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;net/http&quot;</span><br>    <span class="hljs-string">&quot;time&quot;</span><br><br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin/binding&quot;</span><br>    <span class="hljs-string">&quot;github.com/go-playground/validator/v10&quot;</span><br>)<br><br><span class="hljs-comment">// Booking contains binded and validated data.</span><br><span class="hljs-keyword">type</span> Booking <span class="hljs-keyword">struct</span> &#123;<br>    CheckIn  time.Time <span class="hljs-string">`form:&quot;check_in&quot; binding:&quot;required,bookabledate&quot; time_format:&quot;2006-01-02&quot;`</span><br>    CheckOut time.Time <span class="hljs-string">`form:&quot;check_out&quot; binding:&quot;required,gtfield=CheckIn,bookabledate&quot; time_format:&quot;2006-01-02&quot;`</span><br>&#125;<br><br><span class="hljs-keyword">var</span> bookableDate validator.Func = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(fl validator.FieldLevel)</span></span> <span class="hljs-type">bool</span> &#123;<br>    date, ok := fl.Field().Interface().(time.Time)<br>    <span class="hljs-keyword">if</span> ok &#123;<br>        today := time.Now()<br>        <span class="hljs-keyword">if</span> today.After(date) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    route := gin.Default()<br><br>    <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•°</span><br>    <span class="hljs-keyword">if</span> v, ok := binding.Validator.Engine().(*validator.Validate); ok &#123;<br>        v.RegisterValidation(<span class="hljs-string">&quot;bookabledate&quot;</span>, bookableDate)<br>    &#125;<br><br>    <span class="hljs-comment">// å®šä¹‰è·¯ç”±</span><br>    route.GET(<span class="hljs-string">&quot;/bookable&quot;</span>, getBookable)<br><br>    <span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span><br>    route.Run(<span class="hljs-string">&quot;:8085&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getBookable</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>    <span class="hljs-keyword">var</span> b Booking<br>    <span class="hljs-keyword">if</span> err := c.ShouldBindWith(&amp;b, binding.Query); err == <span class="hljs-literal">nil</span> &#123;<br>        c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Booking dates are valid!&quot;</span>&#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        c.JSON(http.StatusBadRequest, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err.Error()&#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-8"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-8" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><p><code>type Booking struct</code>: å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ç±»å‹ <code>Booking</code>ï¼Œç”¨äºå­˜å‚¨ä»è¯·æ±‚ä¸­ç»‘å®šå’ŒéªŒè¯åçš„æ•°æ®ã€‚</p>
</li>
<li><p><code>var bookableDate validator.Func</code>: å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•° <code>bookableDate</code>ï¼Œç”¨äºéªŒè¯æ—¥æœŸæ˜¯å¦å¯é¢„è®¢ã€‚è¯¥å‡½æ•°ä¼šåœ¨åç»­çš„éªŒè¯ä¸­ä½¿ç”¨ã€‚</p>
</li>
<li><p><code>binding.Validator.Engine()</code>: è·å– Gin æ¡†æ¶ä¸­çš„éªŒè¯å™¨å¼•æ“å®ä¾‹ï¼Œç”¨äºæ³¨å†Œè‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•°ã€‚</p>
</li>
<li><p><code>v.RegisterValidation(&quot;bookabledate&quot;, bookableDate)</code>: ä½¿ç”¨ <code>v.RegisterValidation()</code> æ–¹æ³•å°†è‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•° <code>bookableDate</code> æ³¨å†Œåˆ° Gin çš„éªŒè¯å™¨å¼•æ“ä¸­ï¼Œå¹¶æŒ‡å®šäº†éªŒè¯å™¨çš„åç§°ä¸º â€œbookabledateâ€ã€‚è¿™æ ·ï¼Œåœ¨åç»­çš„éªŒè¯ä¸­å°±å¯ä»¥é€šè¿‡è¯¥åç§°æ¥ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•°ã€‚</p>
</li>
<li><p><code>var bookableDate validator.Func</code>: å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•° <code>bookableDate</code>ï¼Œç”¨äºéªŒè¯æ—¥æœŸæ˜¯å¦å¯é¢„è®¢ã€‚è¯¥å‡½æ•°ä¼šåœ¨åç»­çš„éªŒè¯ä¸­ä½¿ç”¨ã€‚</p>
</li>
<li><p><code>c.ShouldBindWith(&amp;b, binding.Query)</code>: åœ¨ <code>getBookable</code> å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>c.ShouldBindWith()</code> æ–¹æ³•å°†è¯·æ±‚ä¸­çš„æ•°æ®ç»‘å®šåˆ° <code>b</code> å˜é‡ï¼Œå¹¶ä½¿ç”¨ <code>binding.Query</code> æ ‡ç­¾æŒ‡å®šäº†ä»æŸ¥è¯¢å‚æ•°ä¸­è·å–æ•°æ®ã€‚è¿™æ ·ï¼Œè¯·æ±‚ä¸­çš„æ•°æ®å°±ä¼šè¢«ç»‘å®šåˆ° <code>Booking</code> ç»“æ„ä½“çš„å­—æ®µï¼Œå¹¶ä¸”ä¼šè¿›è¡Œåç»­çš„éªŒè¯ã€‚</p>
</li>
<li><p><code>c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: err.Error()&#125;)</code>: åœ¨éªŒè¯å¤±è´¥æ—¶ï¼Œä½¿ç”¨ <code>c.JSON()</code> æ–¹æ³•å°†ä¸€ä¸ª JSON æ ¼å¼çš„é”™è¯¯å“åº”å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®ä¸º â€œerrorâ€ï¼Œå€¼ä¸ºéªŒè¯å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ã€‚HTTP çŠ¶æ€ç è¢«è®¾ç½®ä¸º <code>http.StatusBadRequest</code>ï¼Œè¡¨ç¤ºè¯·æ±‚å‚æ•°é”™è¯¯ã€‚</p>
</li>
<li><p>è‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•°ï¼Œç”¨äºéªŒè¯æ—¥æœŸæ˜¯å¦å¯é¢„è®¢ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>func(fl validator.FieldLevel) bool</code>: è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå‚æ•°ä¸º <code>validator.FieldLevel</code>ï¼Œè¿”å›å€¼ä¸º <code>bool</code>ã€‚<code>validator.FieldLevel</code> æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåœ¨éªŒè¯å™¨ä¸­è·å–å­—æ®µçš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚å­—æ®µçš„å€¼ã€å­—æ®µçš„æ ‡ç­¾ç­‰ã€‚</li>
<li><code>fl.Field().Interface().(time.Time)</code>: ä½¿ç”¨ <code>fl.Field()</code> æ–¹æ³•è·å–å­—æ®µçš„å€¼ï¼Œå¹¶ä½¿ç”¨ <code>Interface()</code> æ–¹æ³•å°†å…¶è½¬æ¢ä¸º <code>interface&#123;&#125;</code> ç±»å‹ã€‚ç„¶åä½¿ç”¨ç±»å‹æ–­è¨€å°†å…¶è½¬æ¢ä¸º <code>time.Time</code> ç±»å‹çš„å€¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨å­—æ®µçš„å®é™…å€¼è¿›è¡ŒéªŒè¯ã€‚</li>
<li><code>today := time.Now()</code>: ä½¿ç”¨ <code>time.Now()</code> å‡½æ•°è·å–å½“å‰çš„æ—¶é—´ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ <code>today</code> å˜é‡ï¼Œè¡¨ç¤ºå½“å‰çš„æ—¥æœŸæ—¶é—´ã€‚</li>
<li><code>if today.After(date) &#123; return false &#125;</code>: ä½¿ç”¨ <code>today.After()</code> æ–¹æ³•æ¯”è¾ƒå½“å‰æ—¶é—´å’Œå­—æ®µå€¼çš„æ—¶é—´ï¼Œå¦‚æœå½“å‰æ—¶é—´æ™šäºå­—æ®µå€¼çš„æ—¶é—´ï¼Œåˆ™è¿”å› <code>false</code>ï¼Œè¡¨ç¤ºéªŒè¯å¤±è´¥ï¼Œæ—¥æœŸä¸å¯é¢„è®¢ã€‚</li>
<li><code>return true</code>: å¦‚æœéªŒè¯é€šè¿‡ï¼Œå³å½“å‰æ—¶é—´ä¸æ™šäºå­—æ®µå€¼çš„æ—¶é—´ï¼Œè¿”å› <code>true</code>ï¼Œè¡¨ç¤ºæ—¥æœŸå¯é¢„è®¢ã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªå‡½æ•°çš„å®ç°é€»è¾‘æ˜¯é€šè¿‡æ¯”è¾ƒå½“å‰æ—¶é—´å’Œå­—æ®µå€¼çš„æ—¶é—´æ¥åˆ¤æ–­æ—¥æœŸæ˜¯å¦å¯é¢„è®¢ï¼Œå¦‚æœå½“å‰æ—¶é—´æ™šäºå­—æ®µå€¼çš„æ—¶é—´ï¼Œåˆ™è®¤ä¸ºæ—¥æœŸä¸å¯é¢„è®¢ï¼Œè¿”å› <code>false</code>ï¼Œå¦åˆ™è¿”å› <code>true</code>ã€‚</p>
</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-5"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-5" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å®šä¹‰äº†ä¸€ä¸ª <code>Booking</code> ç»“æ„ä½“ï¼ŒåŒ…å«äº†ä¸¤ä¸ªå­—æ®µ <code>CheckIn</code> å’Œ <code>CheckOut</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºå…¥ä½æ—¥æœŸå’Œç¦»åº—æ—¥æœŸã€‚è¿™ä¸¤ä¸ªå­—æ®µä½¿ç”¨äº† Gin çš„ <code>form</code> æ ‡ç­¾æŒ‡å®šäº†å®ƒä»¬åœ¨è¯·æ±‚å‚æ•°ä¸­çš„åç§°ï¼Œå¹¶ä½¿ç”¨äº† <code>binding</code> æ ‡ç­¾æ¥æŒ‡å®šäº†éªŒè¯è§„åˆ™ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>bookableDate</code> çš„è‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•°ï¼Œç”¨äºéªŒè¯æ—¥æœŸæ˜¯å¦å¯é¢„è®¢ã€‚è¿™ä¸ªå‡½æ•°åœ¨éªŒè¯å™¨ä¸­æ³¨å†Œä¸º <code>bookabledate</code>ï¼Œå¹¶åœ¨éªŒè¯è¿‡ç¨‹ä¸­è·å–å­—æ®µçš„å®é™…å€¼ï¼Œæ¯”è¾ƒå½“å‰æ—¶é—´å’Œå­—æ®µå€¼çš„æ—¶é—´æ¥åˆ¤æ–­æ—¥æœŸæ˜¯å¦å¯é¢„è®¢ã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Gin çš„é»˜è®¤å¼•æ“ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ã€‚ç„¶åä½¿ç”¨ <code>binding.Validator.Engine()</code> æ–¹æ³•è·å–åˆ°éªŒè¯å™¨å¼•æ“ï¼Œå¹¶ä½¿ç”¨ <code>v.RegisterValidation()</code> æ–¹æ³•æ³¨å†Œäº†è‡ªå®šä¹‰éªŒè¯å™¨å‡½æ•° <code>bookableDate</code>ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>getBookable</code> çš„å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç† <code>/bookable</code> è·¯ç”±çš„ GET è¯·æ±‚ã€‚åœ¨è¿™ä¸ªå¤„ç†å‡½æ•°ä¸­ï¼Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code>Booking</code> ç»“æ„ä½“å®ä¾‹ <code>b</code>ï¼Œç„¶åä½¿ç”¨ <code>c.ShouldBindWith()</code> æ–¹æ³•å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ° <code>b</code> ä¸Šï¼Œå¹¶è¿›è¡ŒéªŒè¯ã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™è¿”å› HTTP çŠ¶æ€ç ä¸º 200 çš„ JSON å“åº”ï¼Œè¡¨ç¤ºé¢„è®¢æ—¥æœŸæœ‰æ•ˆï¼›å¦åˆ™ï¼Œè¿”å› HTTP çŠ¶æ€ç ä¸º 400 çš„ JSON å“åº”ï¼Œè¡¨ç¤ºéªŒè¯å¤±è´¥å¹¶è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</li>
<li>å¯åŠ¨äº† Gin æœåŠ¡ï¼Œå¹¶ç›‘å¬åœ¨ 8085 ç«¯å£ä¸Šã€‚</li>
</ol>
</blockquote>
<h2 id="11ã€å®šä¹‰è·¯ç”±æ—¥å¿—çš„æ ¼å¼"><a href="#11ã€å®šä¹‰è·¯ç”±æ—¥å¿—çš„æ ¼å¼" class="headerlink" title="11ã€å®šä¹‰è·¯ç”±æ—¥å¿—çš„æ ¼å¼"></a>11ã€å®šä¹‰è·¯ç”±æ—¥å¿—çš„æ ¼å¼</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -9"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -9" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;log&quot;</span><br>	<span class="hljs-string">&quot;net/http&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin å®ä¾‹ä½œä¸ºè·¯ç”±å¼•æ“</span><br><br>	<span class="hljs-comment">// è®¾ç½® DebugPrintRouteFunc å‡½æ•°ï¼Œç”¨äºåœ¨æ§åˆ¶å°æ‰“å°è·¯ç”±ä¿¡æ¯</span><br>	gin.DebugPrintRouteFunc = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(httpMethod, absolutePath, handlerName <span class="hljs-type">string</span>, nuHandlers <span class="hljs-type">int</span>)</span></span> &#123;<br>		log.Printf(<span class="hljs-string">&quot;endpoint %v %v %v %v\n&quot;</span>, httpMethod, absolutePath, handlerName, nuHandlers)<br>	&#125;<br><br>	<span class="hljs-comment">// å®šä¹‰ POST /foo è·¯ç”±ï¼Œå¤„ç†å‡½æ•°è¿”å› JSON å“åº” &quot;foo&quot;</span><br>	r.POST(<span class="hljs-string">&quot;/foo&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.JSON(http.StatusOK, <span class="hljs-string">&quot;foo&quot;</span>)<br>	&#125;)<br><br>	<span class="hljs-comment">// å®šä¹‰ GET /bar è·¯ç”±ï¼Œå¤„ç†å‡½æ•°è¿”å› JSON å“åº” &quot;bar&quot;</span><br>	r.GET(<span class="hljs-string">&quot;/bar&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.JSON(http.StatusOK, <span class="hljs-string">&quot;bar&quot;</span>)<br>	&#125;)<br><br>	<span class="hljs-comment">// å®šä¹‰ GET /status è·¯ç”±ï¼Œå¤„ç†å‡½æ•°è¿”å› JSON å“åº” &quot;ok&quot;</span><br>	r.GET(<span class="hljs-string">&quot;/status&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.JSON(http.StatusOK, <span class="hljs-string">&quot;ok&quot;</span>)<br>	&#125;)<br><br>	<span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-9"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-9" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>gin.DebugPrintRouteFunc</code>: è¿™æ˜¯ Gin æ¡†æ¶ä¸­çš„ä¸€ä¸ªå˜é‡ï¼Œç”¨äºè®¾ç½®åœ¨æ§åˆ¶å°æ‰“å°è·¯ç”±ä¿¡æ¯çš„å‡½æ•°ã€‚æ‚¨åœ¨ä»£ç ä¸­é€šè¿‡ç»™è¯¥å˜é‡èµ‹å€¼ä¸€ä¸ªå‡½æ•°æ¥è‡ªå®šä¹‰è·¯ç”±ä¿¡æ¯çš„æ‰“å°æ–¹å¼ã€‚åœ¨æ‚¨çš„ç¤ºä¾‹ä¸­ï¼Œè®¾ç½®äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‰“å°å‡½æ•°ï¼Œç”¨äºåœ¨æ§åˆ¶å°è¾“å‡º HTTP æ–¹æ³•ã€URL è·¯å¾„ã€å¤„ç†å‡½æ•°åå’Œå¤„ç†å‡½æ•°çš„æ•°é‡ã€‚å…¶ä¸­ï¼Œ<code>httpMethod</code> æ˜¯ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚ â€œGETâ€ã€â€POSTâ€ ç­‰ï¼‰ï¼Œ<code>absolutePath</code> æ˜¯è·¯ç”±çš„å®Œæ•´è·¯å¾„ï¼Œ<code>handlerName</code> æ˜¯å¤„ç†å‡½æ•°çš„åç§°ï¼Œ<code>nuHandlers</code> æ˜¯å¤„ç†å‡½æ•°çš„æ•°é‡ï¼Œé€šè¿‡è°ƒç”¨ <code>log.Printf</code> å‡½æ•°å°†è·¯ç”±è°ƒè¯•æ‰“å°çš„ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</li>
<li><code>r.GET(&quot;/bar&quot;, func(c *gin.Context) &#123; ... &#125;)</code>: è¿™æ˜¯ Gin æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå®šä¹‰ä¸€ä¸ªå¤„ç† HTTP GET è¯·æ±‚çš„è·¯ç”±ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å®šä¹‰äº†ä¸€ä¸ªå¤„ç† <code>/bar</code> è·¯å¾„çš„ GET è¯·æ±‚çš„è·¯ç”±ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºå¤„ç†å‡½æ•°ã€‚å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€<code>[localhost:8080/bar](http://localhost:8080/bar)</code>è®¿é—®ã€‚</li>
<li><code>r.POST(&quot;/foo&quot;, func(c *gin.Context) &#123; ... &#125;)</code>: è¿™æ˜¯ Gin æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå®šä¹‰ä¸€ä¸ªå¤„ç† HTTP POST è¯·æ±‚çš„è·¯ç”±ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å®šä¹‰äº†ä¸€ä¸ªå¤„ç† <code>/foo</code> è·¯å¾„çš„ POST è¯·æ±‚çš„è·¯ç”±ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºå¤„ç†å‡½æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°ä¼šåœ¨è¯·æ±‚åˆ°è¾¾æ—¶è¢«è°ƒç”¨ï¼Œå…¶ä¸­ <code>c *gin.Context</code> æ˜¯å¤„ç†å‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºå½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ã€‚ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¾“å…¥ç½‘å€è®¿é—®ï¼Œå› ä¸ºè¿™é‡Œçš„æ˜¯POSTè¯·æ±‚ï¼Œéœ€è¦åœ¨å®¢æˆ·ç«¯è¾“å…¥<code>curl -X POST http://localhost:8080/foo</code>æˆ–è€…åœ¨ PowerShell ä¸­å‘é€ HTTP è¯·æ±‚å¹¶æŒ‡å®šè¯·æ±‚æ–¹æ³•è®¿é—®<code>Invoke-RestMethod -Uri &#39;http://localhost:8080/foo&#39; -Method Post</code></li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-6"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-6" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å¯¼å…¥äº†æ‰€éœ€çš„åŒ…ï¼ŒåŒ…æ‹¬æ—¥å¿—å¤„ç†ã€HTTP ç›¸å…³çš„åŒ…ä»¥åŠ Gin æ¡†æ¶çš„åŒ…ã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ª Gin å®ä¾‹ <code>r</code>ï¼Œä½œä¸ºè·¯ç”±å¼•æ“ã€‚</li>
<li>ä½¿ç”¨ <code>gin.DebugPrintRouteFunc</code> å‡½æ•°è®¾ç½®äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„è·¯ç”±è°ƒè¯•æ‰“å°å‡½æ•°ï¼Œç”¨äºåœ¨æ§åˆ¶å°æ‰“å°è·¯ç”±ä¿¡æ¯ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªå¤„ç† POST è¯·æ±‚çš„è·¯ç”± <code>/foo</code>ï¼Œå½“è¯¥è·¯ç”±æ¥æ”¶åˆ° POST è¯·æ±‚æ—¶ï¼Œä¼šæ‰§è¡Œä¼ å…¥çš„åŒ¿åå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ HTTP å“åº”ä¸­è¿”å› JSON æ ¼å¼çš„å“åº” â€œfooâ€ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªå¤„ç† GET è¯·æ±‚çš„è·¯ç”± <code>/bar</code>ï¼Œå½“è¯¥è·¯ç”±æ¥æ”¶åˆ° GET è¯·æ±‚æ—¶ï¼Œä¼šæ‰§è¡Œä¼ å…¥çš„åŒ¿åå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ HTTP å“åº”ä¸­è¿”å› JSON æ ¼å¼çš„å“åº” â€œbarâ€ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªå¤„ç† GET è¯·æ±‚çš„è·¯ç”± <code>/status</code>ï¼Œå½“è¯¥è·¯ç”±æ¥æ”¶åˆ° GET è¯·æ±‚æ—¶ï¼Œä¼šæ‰§è¡Œä¼ å…¥çš„åŒ¿åå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ HTTP å“åº”ä¸­è¿”å› JSON æ ¼å¼çš„å“åº” â€œokâ€ã€‚</li>
<li>è°ƒç”¨ <code>r.Run()</code> å¯åŠ¨ HTTP æœåŠ¡ï¼Œç›‘å¬åœ°å€ä¸º 0.0.0.0:8080ã€‚</li>
</ol>
</blockquote>
<h2 id="12ã€åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨-Goroutine"><a href="#12ã€åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨-Goroutine" class="headerlink" title="12ã€åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨ Goroutine"></a>12ã€åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨ Goroutine</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -10"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -10" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.Default()<br><br>    <span class="hljs-comment">// å®šä¹‰ /long_async è·¯ç”±</span><br>    r.GET(<span class="hljs-string">&quot;/long_async&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºåœ¨ goroutine ä¸­ä½¿ç”¨çš„å‰¯æœ¬</span><br>        cCp := c.Copy()<br>        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>            <span class="hljs-comment">// ç”¨ time.Sleep() æ¨¡æ‹Ÿä¸€ä¸ªé•¿ä»»åŠ¡ã€‚</span><br>            time.Sleep(<span class="hljs-number">5</span> * time.Second)<br><br>            <span class="hljs-comment">// è¯·æ³¨æ„æ‚¨ä½¿ç”¨çš„æ˜¯å¤åˆ¶çš„ä¸Šä¸‹æ–‡ &quot;cCp&quot;ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦</span><br>            log.Println(<span class="hljs-string">&quot;Done! in path &quot;</span> + cCp.Request.URL.Path)<br>        &#125;()<br>    &#125;)<br><br>    <span class="hljs-comment">// å®šä¹‰ /long_sync è·¯ç”±</span><br>    r.GET(<span class="hljs-string">&quot;/long_sync&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// ç”¨ time.Sleep() æ¨¡æ‹Ÿä¸€ä¸ªé•¿ä»»åŠ¡ã€‚</span><br>        time.Sleep(<span class="hljs-number">5</span> * time.Second)<br><br>        <span class="hljs-comment">// å› ä¸ºæ²¡æœ‰ä½¿ç”¨ goroutineï¼Œä¸éœ€è¦æ‹·è´ä¸Šä¸‹æ–‡</span><br>        log.Println(<span class="hljs-string">&quot;Done! in path &quot;</span> + c.Request.URL.Path)<br>    &#125;)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-10"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-10" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>c.Copy()</code>ï¼šåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡çš„å‰¯æœ¬ï¼Œç”¨äºåœ¨ goroutine ä¸­ä½¿ç”¨ã€‚åœ¨å¤šä¸ª goroutine ä¸­å¤„ç†è¯·æ±‚æ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡çš„å‰¯æœ¬ï¼Œä»¥é¿å…ç«æ€æ¡ä»¶å’Œå¹¶å‘è®¿é—®çš„é—®é¢˜ã€‚</li>
<li><code>go func() &#123; ... &#125;()</code>ï¼šè¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåŒ¿åçš„ Go è¯­è¨€åç¨‹ï¼ˆgoroutineï¼‰ï¼Œé€šè¿‡ <code>go</code> å…³é”®å­—å¼€å¯ä¸€ä¸ªæ–°çš„å¹¶å‘æ‰§è¡Œçš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¸­çš„é€»è¾‘å¾ˆç®€å•ï¼Œé¦–å…ˆé€šè¿‡ <code>time.Sleep(5 * time.Second)</code> æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶çš„æ“ä½œï¼Œå³æš‚åœå½“å‰ goroutine çš„æ‰§è¡Œ 5 ç§’é’Ÿã€‚åœ¨è¿™ä¸ªæš‚åœæœŸé—´ï¼Œå½“å‰çš„ goroutine ä¸ä¼šç»§ç»­æ‰§è¡Œï¼Œè€Œæ˜¯è®©å‡º CPU æ—¶é—´ç»™å…¶ä»– goroutineï¼Œä»è€Œå®ç°äº†å¹¶å‘æ‰§è¡Œã€‚å½“ <code>time.Sleep()</code> ç»“æŸåï¼Œè¯¥ goroutine ä¼šç»§ç»­æ‰§è¡Œå‰©ä¸‹çš„ä»£ç ã€‚è¿™æ®µä»£ç é€šè¿‡è°ƒç”¨ <code>log.Println()</code> åœ¨æ—¥å¿—ä¸­æ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼Œå†…å®¹ä¸º â€œDone! int path â€œ + cCp.Request.URL.Pathã€‚å…¶ä¸­ï¼Œ<code>cCp</code> æ˜¯åœ¨åˆ›å»ºè¿™ä¸ª goroutine æ—¶é€šè¿‡ <code>c.Copy()</code> åˆ›å»ºçš„å½“å‰è¯·æ±‚ä¸Šä¸‹æ–‡çš„å‰¯æœ¬ï¼Œç”¨äºè®°å½•è¯·æ±‚çš„è·¯å¾„ã€‚</li>
<li><code>time.Sleep()</code>ï¼šæ¨¡æ‹Ÿä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæš‚åœå½“å‰ goroutine çš„æ‰§è¡Œä¸€æ®µæ—¶é—´ï¼Œä»¥æ¨¡æ‹Ÿè€—æ—¶çš„æ“ä½œã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½¿ç”¨ <code>time.Sleep(5 * time.Second)</code> æš‚åœå½“å‰ goroutine çš„æ‰§è¡Œ 5 ç§’ã€‚</li>
<li><code>c.Request.URL.Path</code>ï¼šè·å–å½“å‰è¯·æ±‚çš„è·¯å¾„ï¼Œç”¨äºåœ¨æ—¥å¿—ä¸­è®°å½•å¤„ç†è¯·æ±‚çš„è·¯å¾„ã€‚</li>
<li>é€šè¿‡åˆ†åˆ«è®¿é—®<code>long_async</code>ç›®å½•å’Œ<code>long_sync</code>ç›®å½•ï¼Œä¼šå‘ç°ï¼šå‰è€…æ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œåå°å°±ä¼šç«‹å³æ‰“å°æ—¥å¿—ï¼Œè¿‡äº”ç§’åæ‰ä¼šæ‰“å°è¾“å‡ºè·¯å¾„ï¼›åè§‚åè€…ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éœ€è¦è¿‡äº”ç§’ï¼Œåå°æ‰ä¼šåŒæ—¶è¾“å‡ºæ—¥å¿—å’Œæ‰“å°è·¯å¾„ã€‚<code>long_async</code>å½“å‰çš„ goroutine ä¸ä¼šç»§ç»­æ‰§è¡Œï¼Œè€Œæ˜¯è®©å‡º CPU æ—¶é—´ç»™å…¶ä»– goroutineï¼Œä»è€Œå®ç°äº†å¹¶å‘æ‰§è¡Œã€‚</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-7"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-7" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>ä½¿ç”¨ <code>gin.Default()</code> åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin å¼•æ“ <code>r</code>ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚</li>
<li>å®šä¹‰äº†ä¸¤ä¸ªè·¯ç”±ï¼š<ul>
<li><code>/long_async</code> è·¯ç”±ï¼Œä½¿ç”¨ <code>r.GET</code> æ–¹æ³•æ³¨å†Œäº†ä¸€ä¸ªå¤„ç† GET è¯·æ±‚çš„å¤„ç†å‡½æ•°ã€‚åœ¨è¿™ä¸ªå¤„ç†å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>c.Copy()</code> åˆ›å»ºäº†ä¸€ä¸ªä¸Šä¸‹æ–‡å‰¯æœ¬ <code>cCp</code>ï¼Œç„¶åä½¿ç”¨ <code>go</code> å…³é”®å­—å¯åŠ¨äº†ä¸€ä¸ª goroutineï¼Œåœ¨ goroutine ä¸­ä½¿ç”¨ <code>time.Sleep()</code> æ¨¡æ‹Ÿäº†ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæœ€ååœ¨æ—¥å¿—ä¸­æ‰“å°äº†è¯·æ±‚è·¯å¾„ä¿¡æ¯ã€‚</li>
<li><code>/long_sync</code> è·¯ç”±ï¼ŒåŒæ ·ä½¿ç”¨ <code>r.GET</code> æ–¹æ³•æ³¨å†Œäº†ä¸€ä¸ªå¤„ç† GET è¯·æ±‚çš„å¤„ç†å‡½æ•°ã€‚åœ¨è¿™ä¸ªå¤„ç†å‡½æ•°ä¸­ï¼Œä¹Ÿä½¿ç”¨äº† <code>time.Sleep()</code> æ¨¡æ‹Ÿäº†ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œä½†æ²¡æœ‰ä½¿ç”¨ goroutineï¼Œå› æ­¤ä¸éœ€è¦æ‹·è´ä¸Šä¸‹æ–‡ï¼Œç›´æ¥é€šè¿‡ <code>c</code> è®¿é—®äº†è¯·æ±‚è·¯å¾„ä¿¡æ¯ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­æ‰“å°äº†è¯·æ±‚è·¯å¾„ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨ <code>r.Run(&quot;:8080&quot;)</code> å¯åŠ¨äº†ä¸€ä¸ª web æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨æœ¬åœ°çš„ 8080 ç«¯å£ä¸Šï¼Œç­‰å¾…æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h2 id="13ã€ä¼˜é›…åœ°é‡å¯æˆ–åœæ­¢"><a href="#13ã€ä¼˜é›…åœ°é‡å¯æˆ–åœæ­¢" class="headerlink" title="13ã€ä¼˜é›…åœ°é‡å¯æˆ–åœæ­¢"></a>13ã€ä¼˜é›…åœ°é‡å¯æˆ–åœæ­¢</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -11"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -11" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// +build go1.8</span><br><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;context&quot;</span><br>    <span class="hljs-string">&quot;log&quot;</span><br>    <span class="hljs-string">&quot;net/http&quot;</span><br>    <span class="hljs-string">&quot;os&quot;</span><br>    <span class="hljs-string">&quot;os/signal&quot;</span><br>    <span class="hljs-string">&quot;time&quot;</span><br><br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å®ä¾‹</span><br>    router := gin.Default()<br><br>    <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªå¤„ç†å‡½æ•°åˆ° &quot;/&quot; è·¯å¾„çš„ GET è¯·æ±‚</span><br>    router.GET(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªé•¿ä»»åŠ¡ï¼Œæš‚åœ 5 ç§’</span><br>        time.Sleep(<span class="hljs-number">5</span> * time.Second)<br>        c.String(http.StatusOK, <span class="hljs-string">&quot;Welcome Gin Server&quot;</span>)<br>    &#125;)<br><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª http.Server å®ä¾‹ï¼Œé…ç½®ç›‘å¬åœ°å€å’Œ Gin è·¯ç”±ä½œä¸ºå¤„ç†å™¨</span><br>    srv := &amp;http.Server&#123;<br>        Addr:    <span class="hljs-string">&quot;:8080&quot;</span>,<br>        Handler: router,<br>    &#125;<br><br>    <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ª goroutine ç›‘å¬å’Œå¤„ç† HTTP è¯·æ±‚</span><br>    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>        <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬å’Œå¤„ç†è¯·æ±‚</span><br>        <span class="hljs-keyword">if</span> err := srv.ListenAndServe(); err != <span class="hljs-literal">nil</span> &amp;&amp; err != http.ErrServerClosed &#123;<br>            log.Fatalf(<span class="hljs-string">&quot;listen: %s\n&quot;</span>, err)<br>        &#125;<br>    &#125;()<br><br>    <span class="hljs-comment">// ç­‰å¾…ä¸­æ–­ä¿¡å·ä»¥ä¼˜é›…åœ°å…³é—­æœåŠ¡å™¨ï¼ˆè®¾ç½® 5 ç§’çš„è¶…æ—¶æ—¶é—´ï¼‰</span><br>    quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> os.Signal)<br>    signal.Notify(quit, os.Interrupt)<br>    &lt;-quit<br>    log.Println(<span class="hljs-string">&quot;Shutdown Server ...&quot;</span>)<br><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè¶…æ—¶ä¸Šä¸‹æ–‡ï¼Œè®¾ç½® 5 ç§’è¶…æ—¶</span><br>    ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">5</span>*time.Second)<br>    <span class="hljs-keyword">defer</span> cancel()<br>    <span class="hljs-comment">// å…³é—­æœåŠ¡å™¨ï¼Œç­‰å¾…æœªå®Œæˆçš„è¯·æ±‚å®Œæˆæˆ–è¶…æ—¶</span><br>    <span class="hljs-keyword">if</span> err := srv.Shutdown(ctx); err != <span class="hljs-literal">nil</span> &#123;<br>        log.Fatal(<span class="hljs-string">&quot;Server Shutdown:&quot;</span>, err)<br>    &#125;<br>    log.Println(<span class="hljs-string">&quot;Server exiting&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-11"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-11" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>srv := &amp;http.Server&#123;        Addr:    &quot;:8080&quot;,        Handler: router,    &#125;</code>åˆ›å»ºäº†ä¸€ä¸ª <code>http.Server</code> å®ä¾‹ï¼Œç”¨äºé…ç½® HTTP æœåŠ¡å™¨çš„ç›‘å¬åœ°å€å’Œè¯·æ±‚å¤„ç†å™¨.<ul>
<li><code>Addr: &quot;:8080&quot;</code>ï¼šæŒ‡å®šäº†æœåŠ¡å™¨ç›‘å¬çš„åœ°å€å’Œç«¯å£å·ã€‚åœ¨è¿™é‡Œï¼ŒæœåŠ¡å™¨ä¼šç›‘å¬åœ¨æœ¬åœ°çš„ 8080 ç«¯å£ä¸Šï¼Œè¡¨ç¤ºå¯ä»¥é€šè¿‡è®¿é—® <code>http://localhost:8080</code> æ¥ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚</li>
<li><code>Handler: router</code>ï¼šæŒ‡å®šäº†æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†å™¨ã€‚åœ¨è¿™é‡Œï¼Œä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºçš„è·¯ç”±å®ä¾‹ <code>router</code> ä½œä¸ºæœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†å™¨ã€‚Gin è·¯ç”±å¯ä»¥ç”¨äºæ³¨å†Œä¸åŒçš„ HTTP è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œæ ¹æ®è¯·æ±‚çš„ URL è·¯å¾„å’Œ HTTP æ–¹æ³•æ¥è¿›è¡Œè·¯ç”±å’Œå¤„ç†ã€‚</li>
</ul>
</li>
<li><code>srv.ListenAndServe()</code>ï¼šè¿™æ˜¯ <code>http.Server</code> çš„æ–¹æ³•ï¼Œç”¨äºå¯åŠ¨æœåŠ¡å™¨å¹¶å¼€å§‹ç›‘å¬å’Œå¤„ç†è¯·æ±‚ã€‚å®ƒä¼šä¸€ç›´åœ¨åå°è¿è¡Œï¼Œç›´åˆ°æœåŠ¡å™¨å…³é—­æˆ–å‘ç”Ÿé”™è¯¯ã€‚</li>
<li><code>err := srv.ListenAndServe()</code>ï¼šå°† <code>srv.ListenAndServe()</code> çš„è¿”å›å€¼èµ‹ç»™å˜é‡ <code>err</code>ï¼Œç”¨äºæ•è·å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚</li>
<li><code>err != nil &amp;&amp; err != http.ErrServerClosed</code>ï¼šé€šè¿‡æ¡ä»¶åˆ¤æ–­è¯­å¥æ£€æŸ¥ <code>err</code> æ˜¯å¦ä¸ä¸ºç©ºä¸”ä¸ç­‰äº <code>http.ErrServerClosed</code>ï¼Œå³åˆ¤æ–­æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿä¸”é”™è¯¯ä¸æ˜¯å› ä¸ºæœåŠ¡å™¨è¢«å…³é—­å¯¼è‡´çš„ã€‚</li>
<li><code>log.Fatalf(&quot;listen: %s\n&quot;, err)</code>ï¼šå¦‚æœæœ‰é”™è¯¯å‘ç”Ÿï¼Œä½¿ç”¨ <code>log.Fatalf()</code> æ–¹æ³•å°†é”™è¯¯ä¿¡æ¯æ ¼å¼åŒ–å¹¶è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯ï¼ˆstderrï¼‰ï¼Œç„¶åè°ƒç”¨ <code>log.Fatal()</code> æ–¹æ³•ç»ˆæ­¢ç¨‹åºçš„è¿è¡Œã€‚<code>log.Fatalf()</code> æ˜¯ <code>log</code> åŒ…çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¾“å‡ºé”™è¯¯ä¿¡æ¯åç›´æ¥è°ƒç”¨ <code>os.Exit(1)</code> ç»ˆæ­¢ç¨‹åºã€‚</li>
<li><code>quit := make(chan os.Signal)</code>ï¼šåˆ›å»ºäº†ä¸€ä¸ªç”¨äºæ¥æ”¶ä¿¡å·çš„é€šé“ <code>quit</code>ï¼Œè¯¥é€šé“çš„ç±»å‹æ˜¯ <code>os.Signal</code>ï¼Œç”¨äºæ¥æ”¶æ“ä½œç³»ç»Ÿå‘é€çš„ä¿¡å·ã€‚</li>
<li><code>signal.Notify(quit, os.Interrupt)</code>ï¼šé€šè¿‡ <code>signal</code> åŒ…çš„ <code>Notify</code> å‡½æ•°ï¼Œå°† <code>os.Interrupt</code>ï¼ˆè¡¨ç¤ºä¸­æ–­ä¿¡å·ï¼Œé€šå¸¸ç”±ç”¨æˆ·åœ¨ç»ˆç«¯ä¸­æŒ‰ä¸‹ Ctrl+C äº§ç”Ÿï¼‰æ³¨å†Œåˆ° <code>quit</code> é€šé“ï¼Œè¡¨ç¤ºå½“æ”¶åˆ°ä¸­æ–­ä¿¡å·æ—¶ï¼Œå°†å‘ <code>quit</code> é€šé“å‘é€è¯¥ä¿¡å·ã€‚</li>
<li><code>&lt;-quit</code>ï¼šé€šè¿‡ä» <code>quit</code> é€šé“ä¸­æ¥æ”¶ä¿¡å·ï¼Œä»£ç ä¼šä¸€ç›´é˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æ¥æ”¶åˆ°ä¸­æ–­ä¿¡å·ã€‚ä¸€æ—¦æ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼Œä»£ç ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œã€‚</li>
<li><code>ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</code>ï¼šé€šè¿‡ <code>context.WithTimeout</code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰è¶…æ—¶çš„ä¸Šä¸‹æ–‡ <code>ctx</code>ï¼Œè¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 5 ç§’ã€‚<code>context.Background()</code> è¿”å›ä¸€ä¸ªç©ºçš„ä¸Šä¸‹æ–‡ä½œä¸ºçˆ¶ä¸Šä¸‹æ–‡ã€‚</li>
<li><code>defer cancel()</code>ï¼šä½¿ç”¨ <code>defer</code> è¯­å¥å»¶è¿Ÿè°ƒç”¨ <code>cancel()</code> å‡½æ•°ï¼Œç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆä¸Šä¸‹æ–‡ï¼Œä»¥é¿å…èµ„æºæ³„æ¼ã€‚</li>
<li><code>if err := srv.Shutdown(ctx); err != nil</code>ï¼šè°ƒç”¨ <code>srv.Shutdown</code> æ–¹æ³•æ¥ä¼˜é›…åœ°å…³é—­æœåŠ¡å™¨ï¼Œä¼ å…¥ä¹‹å‰åˆ›å»ºçš„å¸¦æœ‰è¶…æ—¶çš„ä¸Šä¸‹æ–‡ <code>ctx</code>ã€‚è¯¥æ–¹æ³•ä¼šç­‰å¾…æœåŠ¡å™¨å¤„ç†å®Œå½“å‰çš„è¯·æ±‚åå†å…³é—­æœåŠ¡å™¨ï¼Œä»¥å®ç°ä¼˜é›…å…³é—­ã€‚</li>
<li><code>log.Fatal(&quot;Server Shutdown:&quot;, err)</code>ï¼šå¦‚æœæœåŠ¡å™¨å…³é—­è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä½¿ç”¨ <code>log.Fatal</code> è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶ç»ˆæ­¢ç¨‹åºè¿è¡Œã€‚</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-8"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-8" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<p>é¦–å…ˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å®ä¾‹ï¼Œæ³¨å†Œäº†ä¸€ä¸ªå¤„ç†å‡½æ•°åˆ° â€œ&#x2F;â€œ è·¯å¾„çš„ GET è¯·æ±‚ï¼Œå…¶ä¸­æ¨¡æ‹Ÿäº†ä¸€ä¸ªé•¿ä»»åŠ¡ï¼Œæš‚åœ 5 ç§’ï¼Œç„¶åè¿”å› â€œWelcome Gin Serverâ€ å­—ç¬¦ä¸²ä½œä¸ºå“åº”ã€‚</p>
<p>æ¥ç€ï¼Œåˆ›å»ºäº†ä¸€ä¸ª http.Server å®ä¾‹ï¼Œé…ç½®äº†ç›‘å¬åœ°å€ä¸º â€œ:8080â€ï¼Œå¹¶å°† Gin è·¯ç”±ä½œä¸ºå¤„ç†å™¨ã€‚</p>
<p>ç„¶åï¼Œé€šè¿‡å¯åŠ¨ä¸€ä¸ª goroutine æ¥ç›‘å¬å’Œå¤„ç† HTTP è¯·æ±‚ï¼Œè°ƒç”¨ <code>srv.ListenAndServe()</code> æ–¹æ³•æ¥å¯åŠ¨ HTTP æœåŠ¡å™¨ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä½¿ç”¨ <code>os/signal</code> åŒ…æ¥ç­‰å¾…ä¸­æ–­ä¿¡å·ï¼ˆå¦‚ Ctrl+Cï¼‰ï¼Œä¸€æ—¦æ¥æ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼ŒæœåŠ¡å™¨å°†å¼€å§‹ä¼˜é›…åœ°å…³é—­ã€‚</p>
<p>åˆ›å»ºäº†ä¸€ä¸ªè¶…æ—¶ä¸Šä¸‹æ–‡ <code>ctx</code>ï¼Œè®¾ç½®äº† 5 ç§’çš„è¶…æ—¶æ—¶é—´ï¼Œå¹¶é€šè¿‡ <code>srv.Shutdown()</code> æ–¹æ³•æ¥ä¼˜é›…åœ°å…³é—­æœåŠ¡å™¨ï¼Œç­‰å¾…æœªå®Œæˆçš„è¯·æ±‚å®Œæˆæˆ–è¶…æ—¶ã€‚</p>
<p>æœ€åï¼Œä½¿ç”¨ <code>log.Fatal()</code> è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶ç»ˆæ­¢ç¨‹åºè¿è¡Œï¼Œæˆ–è€…è¾“å‡º â€œServer exitingâ€ æ¶ˆæ¯è¡¨ç¤ºæœåŠ¡å™¨æˆåŠŸé€€å‡ºã€‚</p>
</blockquote>
<h2 id="14ã€è·¯ç”±ç»„"><a href="#14ã€è·¯ç”±ç»„" class="headerlink" title="14ã€è·¯ç”±ç»„"></a>14ã€è·¯ç”±ç»„</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -12"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -12" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br><br>    <span class="hljs-comment">// ç®€å•çš„è·¯ç”±ç»„: v1</span><br>    v1 := router.Group(<span class="hljs-string">&quot;/v1&quot;</span>) <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåä¸º &quot;/v1&quot; çš„è·¯ç”±ç»„</span><br>    &#123;<br>        v1.POST(<span class="hljs-string">&quot;/login&quot;</span>, loginEndpoint) <span class="hljs-comment">// åœ¨ &quot;/v1&quot; è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± &quot;/login&quot;ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º loginEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®š</span><br>        v1.POST(<span class="hljs-string">&quot;/submit&quot;</span>, submitEndpoint) <span class="hljs-comment">// åœ¨ &quot;/v1&quot; è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± &quot;/submit&quot;ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º submitEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®š</span><br>        v1.POST(<span class="hljs-string">&quot;/read&quot;</span>, readEndpoint) <span class="hljs-comment">// åœ¨ &quot;/v1&quot; è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± &quot;/read&quot;ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º readEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®š</span><br>    &#125;<br><br>    <span class="hljs-comment">// ç®€å•çš„è·¯ç”±ç»„: v2</span><br>    v2 := router.Group(<span class="hljs-string">&quot;/v2&quot;</span>) <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåä¸º &quot;/v2&quot; çš„è·¯ç”±ç»„</span><br>    &#123;<br>        v2.POST(<span class="hljs-string">&quot;/login&quot;</span>, loginEndpoint) <span class="hljs-comment">// åœ¨ &quot;/v2&quot; è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± &quot;/login&quot;ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º loginEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®š</span><br>        v2.POST(<span class="hljs-string">&quot;/submit&quot;</span>, submitEndpoint) <span class="hljs-comment">// åœ¨ &quot;/v2&quot; è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± &quot;/submit&quot;ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º submitEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®š</span><br>        v2.POST(<span class="hljs-string">&quot;/read&quot;</span>, readEndpoint) <span class="hljs-comment">// åœ¨ &quot;/v2&quot; è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± &quot;/read&quot;ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º readEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®š</span><br>    &#125;<br><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-12"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-12" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>router.Group(&quot;/v1&quot;)&#123;...&#125;</code>: è¿™æ˜¯åˆ›å»ºäº†ä¸€ä¸ªåä¸º â€œ&#x2F;v1â€ çš„è·¯ç”±ç»„ã€‚è·¯ç”±ç»„å¯ä»¥ç”¨æ¥å¯¹ä¸€ç»„è·¯ç”±è¿›è¡Œåˆ†ç»„ï¼Œæ–¹ä¾¿ç®¡ç†å’Œé…ç½®å…±äº«çš„ä¸­é—´ä»¶ã€‚</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-9"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-9" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li><code>func main()</code>: è¿™æ˜¯ Go è¯­è¨€çš„å…¥å£å‡½æ•°ï¼Œæ˜¯ç¨‹åºçš„å…¥å£ç‚¹ã€‚</li>
<li><code>router := gin.Default()</code>: åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ã€‚<code>gin.Default()</code> å‡½æ•°è¿”å›ä¸€ä¸ªé»˜è®¤é…ç½®çš„ Gin è·¯ç”±å¼•æ“ï¼ŒåŒ…å«äº†å¸¸ç”¨çš„ä¸­é—´ä»¶ï¼Œå¦‚æ—¥å¿—ã€æ¢å¤ç­‰ã€‚</li>
<li><code>v1 := router.Group(&quot;/v1&quot;)</code>: åˆ›å»ºäº†ä¸€ä¸ªåä¸º â€œ&#x2F;v1â€ çš„è·¯ç”±ç»„ã€‚è·¯ç”±ç»„ç”¨äºå°†å¤šä¸ªè·¯ç”±è¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œå¯ä»¥å¯¹è¿™äº›è·¯ç”±åº”ç”¨ç›¸åŒçš„ä¸­é—´ä»¶ã€è·¯ç”±ç»„çº§åˆ«çš„å¤„ç†å‡½æ•°ç­‰ã€‚</li>
<li><code>v1.POST(&quot;/login&quot;, loginEndpoint)</code>: åœ¨ â€œ&#x2F;v1â€ è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;loginâ€ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º loginEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®šã€‚è¿™è¡¨ç¤ºå½“å®¢æˆ·ç«¯å‘é€ HTTP POST è¯·æ±‚åˆ° â€œ&#x2F;v1&#x2F;loginâ€ æ—¶ï¼Œå°†è°ƒç”¨ loginEndpoint å‡½æ•°æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚</li>
<li><code>v1.POST(&quot;/submit&quot;, submitEndpoint)</code>: åœ¨ â€œ&#x2F;v1â€ è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;submitâ€ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º submitEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®šã€‚è¿™è¡¨ç¤ºå½“å®¢æˆ·ç«¯å‘é€ HTTP POST è¯·æ±‚åˆ° â€œ&#x2F;v1&#x2F;submitâ€ æ—¶ï¼Œå°†è°ƒç”¨ submitEndpoint å‡½æ•°æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚</li>
<li><code>v1.POST(&quot;/read&quot;, readEndpoint)</code>: åœ¨ â€œ&#x2F;v1â€ è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;readâ€ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º readEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®šã€‚è¿™è¡¨ç¤ºå½“å®¢æˆ·ç«¯å‘é€ HTTP POST è¯·æ±‚åˆ° â€œ&#x2F;v1&#x2F;readâ€ æ—¶ï¼Œå°†è°ƒç”¨ readEndpoint å‡½æ•°æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚</li>
<li><code>v2 := router.Group(&quot;/v2&quot;)</code>: åˆ›å»ºäº†ä¸€ä¸ªåä¸º â€œ&#x2F;v2â€ çš„è·¯ç”±ç»„ï¼Œç±»ä¼¼äºä¸Šé¢çš„ â€œ&#x2F;v1â€ è·¯ç”±ç»„ã€‚</li>
<li><code>v2.POST(&quot;/login&quot;, loginEndpoint)</code>: åœ¨ â€œ&#x2F;v2â€ è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;loginâ€ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º loginEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®šã€‚</li>
<li><code>v2.POST(&quot;/submit&quot;, submitEndpoint)</code>: åœ¨ â€œ&#x2F;v2â€ è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;submitâ€ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º submitEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®šã€‚</li>
<li><code>v2.POST(&quot;/read&quot;, readEndpoint)</code>: åœ¨ â€œ&#x2F;v2â€ è·¯ç”±ç»„ä¸‹å®šä¹‰äº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;readâ€ï¼Œå¹¶å°†è¯¥è·¯ç”±ä¸åä¸º readEndpoint çš„å¤„ç†å‡½æ•°ç»‘å®šã€‚</li>
<li><code>router.Run(&quot;:8080&quot;)</code>: å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080ã€‚ä¸€æ—¦æœåŠ¡å™¨å¯åŠ¨ï¼Œå°±ä¼šå¼€å§‹æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶æ ¹æ®å®šä¹‰çš„è·¯ç”±è§„åˆ™å’Œå¤„ç†å‡½æ•°æ¥å¤„ç†è¿™äº›è¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h2 id="15ã€å¦‚ä½•è®°å½•æ—¥å¿—"><a href="#15ã€å¦‚ä½•è®°å½•æ—¥å¿—" class="headerlink" title="15ã€å¦‚ä½•è®°å½•æ—¥å¿—"></a>15ã€å¦‚ä½•è®°å½•æ—¥å¿—</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -13"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -13" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// ç¦ç”¨æ§åˆ¶å°é¢œè‰²ï¼Œå°†æ—¥å¿—å†™å…¥æ–‡ä»¶æ—¶ä¸éœ€è¦æ§åˆ¶å°é¢œè‰²ã€‚</span><br>    gin.DisableConsoleColor()<br><br>    <span class="hljs-comment">// è®°å½•åˆ°æ–‡ä»¶ã€‚</span><br>    f, _ := os.Create(<span class="hljs-string">&quot;gin.log&quot;</span>) <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåä¸º &quot;gin.log&quot; çš„æ–‡ä»¶ç”¨äºè®°å½•æ—¥å¿—</span><br>    gin.DefaultWriter = io.MultiWriter(f) <span class="hljs-comment">// è®¾ç½® Gin çš„é»˜è®¤æ—¥å¿—å†™å…¥å™¨ä¸ºåŒæ—¶å†™å…¥æ–‡ä»¶ f</span><br><br>    <span class="hljs-comment">// å¦‚æœéœ€è¦åŒæ—¶å°†æ—¥å¿—å†™å…¥æ–‡ä»¶å’Œæ§åˆ¶å°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä»£ç ã€‚</span><br>    <span class="hljs-comment">// gin.DefaultWriter = io.MultiWriter(f, os.Stdout)</span><br><br>    router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br>    router.GET(<span class="hljs-string">&quot;/ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª HTTP GET æ–¹æ³•çš„è·¯ç”± &quot;/ping&quot;</span><br>        c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;pong&quot;</span>) <span class="hljs-comment">// åœ¨è¯·æ±‚å¤„ç†å‡½æ•°ä¸­è¿”å›å­—ç¬¦ä¸² &quot;pong&quot;</span><br>    &#125;)<br><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-13"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-13" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><p><code>gin.DisableConsoleColor()</code>: ç¦ç”¨æ§åˆ¶å°é¢œè‰²è¾“å‡ºï¼Œè¿™æ ·åœ¨å°†æ—¥å¿—å†™å…¥æ–‡ä»¶æ—¶ä¸ä¼šåŒ…å«æ§åˆ¶å°é¢œè‰²ä¿¡æ¯ã€‚</p>
</li>
<li><p><code>f, _ := os.Create(&quot;gin.log&quot;)</code>: åˆ›å»ºä¸€ä¸ªåä¸º â€œgin.logâ€ çš„æ–‡ä»¶ç”¨äºè®°å½•æ—¥å¿—ï¼Œå¹¶å°†æ–‡ä»¶å¯¹è±¡ä¿å­˜åœ¨å˜é‡ f ä¸­ã€‚å¦‚æœåˆ›å»ºæ–‡ä»¶å‡ºç°é”™è¯¯ï¼Œé”™è¯¯ä¼šè¢«å¿½ç•¥ã€‚</p>
</li>
<li><p><code>gin.DefaultWriter = io.MultiWriter(f)</code>: å°†æ–‡ä»¶ f è®¾ç½®ä¸º Gin æ¡†æ¶çš„é»˜è®¤æ—¥å¿—å†™å…¥å™¨ï¼Œè¿™æ ·æ—¥å¿—å°†åŒæ—¶å†™å…¥æ–‡ä»¶ fã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">wd, err := os.Getwd()<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		fmt.Println(<span class="hljs-string">&quot;è·å–å½“å‰å·¥ä½œç›®å½•å¤±è´¥:&quot;</span>, err)<br>		<span class="hljs-keyword">return</span><br>	&#125;<br>	logFilePath := wd + <span class="hljs-string">&quot;/gin.log&quot;</span><br>	fmt.Println(<span class="hljs-string">&quot;gin.log æ–‡ä»¶è·¯å¾„:&quot;</span>, logFilePath)<br></code></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨è¿™æ®µä»£ç è·å–å½“å‰å·¥ä½œç›®å½•ï¼Œ<code>gin.log</code>æ–‡ä»¶å°±åœ¨è¯¥è·¯å¾„ä¸‹ã€‚</p>
</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-10"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-10" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>è°ƒç”¨ <code>gin.DisableConsoleColor()</code> ç¦ç”¨æ§åˆ¶å°é¢œè‰²è¾“å‡ºï¼Œå› ä¸ºæ—¥å¿—å°†è¢«å†™å…¥æ–‡ä»¶ï¼Œä¸éœ€è¦æ§åˆ¶å°é¢œè‰²ã€‚</li>
<li>è°ƒç”¨ <code>os.Create(&quot;gin.log&quot;)</code> åˆ›å»ºä¸€ä¸ªåä¸º â€œgin.logâ€ çš„æ–‡ä»¶ï¼Œç”¨äºè®°å½•æ—¥å¿—ï¼Œå¹¶å°†è¿”å›çš„æ–‡ä»¶å¯¹è±¡èµ‹å€¼ç»™å˜é‡ <code>f</code>ã€‚</li>
<li>å°† <code>f</code> è®¾ç½®ä¸º Gin æ¡†æ¶çš„é»˜è®¤æ—¥å¿—å†™å…¥å™¨ï¼Œé€šè¿‡è°ƒç”¨ <code>gin.DefaultWriter = io.MultiWriter(f)</code>ã€‚è¿™æ ·ï¼ŒGin æ¡†æ¶çš„æ—¥å¿—å°†åŒæ—¶å†™å…¥ <code>gin.log</code> æ–‡ä»¶å’Œæ§åˆ¶å°ï¼ˆå¦‚æœéœ€è¦åŒæ—¶å†™å…¥æ–‡ä»¶å’Œæ§åˆ¶å°ï¼Œå¯ä»¥æ³¨é‡Šæ‰å½“å‰è¡Œï¼Œå°†ä¸‹ä¸€è¡Œçš„æ³¨é‡Šå–æ¶ˆï¼‰ã€‚</li>
<li>è°ƒç”¨ <code>gin.Default()</code> åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼Œå¹¶å°†è¿”å›çš„å¼•æ“å¯¹è±¡èµ‹å€¼ç»™å˜é‡ <code>router</code>ã€‚</li>
<li>ä½¿ç”¨ <code>router.GET(&quot;/ping&quot;, ...)</code> å®šä¹‰ä¸€ä¸ª HTTP GET æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;pingâ€ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªè¯·æ±‚å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨æ”¶åˆ°è¯·æ±‚æ—¶è¿”å›å­—ç¬¦ä¸² â€œpongâ€ã€‚</li>
<li>è°ƒç”¨ <code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬åœ¨ç«¯å£ 8080ï¼Œç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ã€‚ä¸€æ—¦æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±ä¼šè°ƒç”¨ä¹‹å‰å®šä¹‰çš„è¯·æ±‚å¤„ç†å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</li>
</ol>
</blockquote>
<h2 id="16ã€HTMLæ¸²æŸ“"><a href="#16ã€HTMLæ¸²æŸ“" class="headerlink" title="16ã€HTMLæ¸²æŸ“"></a>16ã€HTMLæ¸²æŸ“</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -14"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -14" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><h2 id="17ã€HTTP2-server-æ¨é€"><a href="#17ã€HTTP2-server-æ¨é€" class="headerlink" title="17ã€HTTP2 server æ¨é€"></a>17ã€HTTP2 server æ¨é€</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -15"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -15" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>    <span class="hljs-string">&quot;html/template&quot;</span><br>    <span class="hljs-string">&quot;log&quot;</span><br><br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª HTML æ¨¡æ¿</span><br><span class="hljs-keyword">var</span> html = template.Must(template.New(<span class="hljs-string">&quot;https&quot;</span>).Parse(<span class="hljs-string">`</span><br><span class="hljs-string">&lt;html&gt;</span><br><span class="hljs-string">&lt;head&gt;</span><br><span class="hljs-string">  &lt;title&gt;Https Test&lt;/title&gt;</span><br><span class="hljs-string">  &lt;script src=&quot;/assets/app.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-string">&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">  &lt;h1 style=&quot;color:red;&quot;&gt;Welcome, Ginner!&lt;/h1&gt;</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;</span><br><span class="hljs-string">`</span>))<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br>    r.Static(<span class="hljs-string">&quot;/assets&quot;</span>, <span class="hljs-string">&quot;./assets&quot;</span>) <span class="hljs-comment">// å°†é™æ€æ–‡ä»¶å¤¹ &quot;./assets&quot; æ³¨å†Œä¸º &quot;/assets&quot; çš„é™æ€èµ„æºè·¯å¾„</span><br>    r.SetHTMLTemplate(html) <span class="hljs-comment">// è®¾ç½® HTML æ¨¡æ¿</span><br><br>    r.GET(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª HTTP GET æ–¹æ³•çš„è·¯ç”± &quot;/&quot;</span><br>        <span class="hljs-keyword">if</span> pusher := c.Writer.Pusher(); pusher != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒæœåŠ¡å™¨æ¨é€</span><br>            <span class="hljs-comment">// ä½¿ç”¨ pusher.Push() åšæœåŠ¡å™¨æ¨é€</span><br>            <span class="hljs-keyword">if</span> err := pusher.Push(<span class="hljs-string">&quot;/assets/app.js&quot;</span>, <span class="hljs-literal">nil</span>); err != <span class="hljs-literal">nil</span> &#123;<br>                log.Printf(<span class="hljs-string">&quot;Failed to push: %v&quot;</span>, err) <span class="hljs-comment">// å¦‚æœæ¨é€å¤±è´¥ï¼Œåˆ™è®°å½•æ—¥å¿—</span><br>            &#125;<br>        &#125;<br>        c.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;https&quot;</span>, gin.H&#123; <span class="hljs-comment">// è¿”å› HTML æ¨¡æ¿ï¼Œå¹¶è®¾ç½®çŠ¶æ€ç å’Œæ•°æ®</span><br>            <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>        &#125;)<br>    &#125;)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ https://127.0.0.1:8080 ä¸Šå¯åŠ¨æœåŠ¡ï¼Œä½¿ç”¨ TLS åŠ å¯†</span><br>    r.RunTLS(<span class="hljs-string">&quot;:8080&quot;</span>, <span class="hljs-string">&quot;./testdata/server.pem&quot;</span>, <span class="hljs-string">&quot;./testdata/server.key&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-14"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-14" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>var html = template.Must(template.New(&quot;https&quot;).Parse(...))</code>: å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>html</code> çš„ HTML æ¨¡æ¿ã€‚<code>template.Must</code> æ˜¯ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç”¨äºå°†æ¨¡æ¿è§£æä¸º <code>template.Template</code> å¯¹è±¡ï¼Œå¹¶åœ¨è§£æè¿‡ç¨‹ä¸­æ£€æŸ¥æ˜¯å¦å‡ºé”™ã€‚</li>
<li><code>r.Static(&quot;/assets&quot;, &quot;./assets&quot;)</code>: å°†é™æ€æ–‡ä»¶å¤¹ <code>&quot;./assets&quot;</code> æ³¨å†Œä¸º â€œ&#x2F;assetsâ€ çš„é™æ€èµ„æºè·¯å¾„ï¼Œè¿™æ ·å½“å®¢æˆ·ç«¯è¯·æ±‚ â€œ&#x2F;assets&#x2F;app.jsâ€ æ—¶ï¼Œä¼šè¿”å›ä½äºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„ â€œ.&#x2F;assets&#x2F;app.jsâ€ æ–‡ä»¶ä½œä¸ºå“åº”ã€‚</li>
<li><code>r.SetHTMLTemplate(html)</code>: è®¾ç½®ä¹‹å‰å®šä¹‰çš„ <code>html</code> æ¨¡æ¿ä¸º Gin æ¡†æ¶çš„ HTML æ¨¡æ¿ã€‚</li>
<li><code>r.GET(&quot;/&quot;, func(c *gin.Context) &#123; ... &#125;)</code>: å®šä¹‰ä¸€ä¸ª HTTP GET æ–¹æ³•çš„è·¯ç”± â€œ&#x2F;â€œï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªè¯·æ±‚å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨æ”¶åˆ°è¯·æ±‚æ—¶æ‰§è¡Œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯·æ±‚å¤„ç†å‡½æ•°ä¸­é€šè¿‡ <code>c.Writer.Pusher()</code> æ£€æŸ¥æ˜¯å¦æ”¯æŒæœåŠ¡å™¨æ¨é€ã€‚å¦‚æœæ”¯æŒï¼Œé€šè¿‡ <code>pusher.Push(&quot;/assets/app.js&quot;, nil)</code> è¿›è¡ŒæœåŠ¡å™¨æ¨é€ï¼Œæ¨é€çš„èµ„æºè·¯å¾„ä¸º â€œ&#x2F;assets&#x2F;app.jsâ€ã€‚ç„¶åä½¿ç”¨ <code>c.HTML()</code> è¿”å›ä¹‹å‰å®šä¹‰çš„ HTML æ¨¡æ¿ï¼Œå¹¶è®¾ç½®çŠ¶æ€ç ä¸º 200 å’Œæ•°æ®ä¸º <code>gin.H&#123;&quot;status&quot;: &quot;success&quot;&#125;</code>ã€‚</li>
<li><code>r.RunTLS(&quot;:8080&quot;, &quot;./testdata/server.pem&quot;, &quot;./testdata/server.key&quot;)</code>: å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œå¹¶ä½¿ç”¨ TLS åŠ å¯†è¿›è¡Œå®‰å…¨é€šä¿¡ã€‚ç¬¬äºŒä¸ªå‚æ•° â€œ.&#x2F;testdata&#x2F;server.pemâ€ æ˜¯ TLS è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° â€œ.&#x2F;testdata&#x2F;server.keyâ€ æ˜¯ TLS ç§é’¥æ–‡ä»¶çš„è·¯å¾„ï¼Œç”¨äºåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œ TLS æ¡æ‰‹å’ŒåŠ å¯†é€šä¿¡ã€‚è¿™æ ·ï¼ŒæœåŠ¡å™¨å°†é€šè¿‡ HTTPS ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-11"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-11" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å®šä¹‰ HTML æ¨¡æ¿ï¼šä½¿ç”¨ <code>template.Must</code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªåä¸º â€œhttpsâ€ çš„ HTML æ¨¡æ¿ï¼Œç”¨äºè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>åˆ›å»º Gin è·¯ç”±å¼•æ“å®ä¾‹ï¼šä½¿ç”¨ <code>gin.Default()</code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“å®ä¾‹ã€‚</li>
<li>æ³¨å†Œé™æ€æ–‡ä»¶è·¯å¾„ï¼šä½¿ç”¨ <code>r.Static()</code> æ–¹æ³•å°†é™æ€æ–‡ä»¶å¤¹ â€œ.&#x2F;assetsâ€ æ³¨å†Œä¸º â€œ&#x2F;assetsâ€ çš„é™æ€èµ„æºè·¯å¾„ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è®¿é—® â€œ&#x2F;assetsâ€ è·¯å¾„æ¥è·å–é™æ€æ–‡ä»¶ã€‚</li>
<li>è®¾ç½® HTML æ¨¡æ¿ï¼šä½¿ç”¨ <code>r.SetHTMLTemplate()</code> æ–¹æ³•è®¾ç½®äº†ä¹‹å‰å®šä¹‰çš„ HTML æ¨¡æ¿ã€‚</li>
<li>å®šä¹‰æ ¹è·¯ç”±å¤„ç†å‡½æ•°ï¼šä½¿ç”¨ <code>r.GET()</code> æ–¹æ³•å®šä¹‰äº†ä¸€ä¸ª HTTP GET æ–¹æ³•çš„æ ¹è·¯ç”±å¤„ç†å‡½æ•°ï¼Œè¯¥å¤„ç†å‡½æ•°ä¼šè¿”å›ä¹‹å‰å®šä¹‰çš„ HTML æ¨¡æ¿ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­è®¾ç½®äº†æ”¯æŒæœåŠ¡å™¨æ¨é€çš„ä¿¡æ¯ã€‚</li>
<li>å¯åŠ¨ HTTPS æœåŠ¡å™¨ï¼šä½¿ç”¨ <code>r.RunTLS()</code> æ–¹æ³•åœ¨ â€œ<a target="_blank" rel="noopener" href="https://127.0.0.1:8080/">https://127.0.0.1:8080</a>â€œ åœ°å€ä¸Šå¯åŠ¨äº†ä¸€ä¸ªç›‘å¬ TLS åŠ å¯†çš„ HTTPS æœåŠ¡å™¨ï¼Œä½¿ç”¨äº†ä¹‹å‰å®šä¹‰çš„ TLS è¯ä¹¦å’Œç§é’¥æ–‡ä»¶ã€‚</li>
</ol>
</blockquote>
<h2 id="18ã€-JSONP"><a href="#18ã€-JSONP" class="headerlink" title="18ã€ JSONP"></a>18ã€ JSONP</h2><blockquote>
<p>ä½¿ç”¨ JSONP å‘ä¸åŒåŸŸçš„æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚å¦‚æœæŸ¥è¯¢å‚æ•°å­˜åœ¨å›è°ƒï¼Œåˆ™å°†å›è°ƒæ·»åŠ åˆ°å“åº”ä½“ä¸­ã€‚</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -16"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -16" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;net/http&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br><br>	r.GET(<span class="hljs-string">&quot;/JSONP&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		data := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;&#123;<br>			<span class="hljs-string">&quot;foo&quot;</span>: <span class="hljs-string">&quot;bar&quot;</span>,<br>		&#125;<br><br>		<span class="hljs-comment">// è·å– callback å‚æ•°å€¼</span><br>		callback := c.Query(<span class="hljs-string">&quot;callback&quot;</span>)<br><br>		<span class="hljs-comment">// ä½¿ç”¨ JSONP æ ¼å¼è¿”å›æ•°æ®</span><br>		c.JSONP(http.StatusOK, gin.H&#123;<br>			<span class="hljs-string">&quot;callback&quot;</span>: callback,<br>			<span class="hljs-string">&quot;data&quot;</span>:     data,<br>		&#125;)<br>	&#125;)<br><br>	<span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>	r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-15"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-15" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>c.Query(&quot;callback&quot;)</code>: <code>c.Query</code> æ–¹æ³•ç”¨äºè·å– HTTP è¯·æ±‚ä¸­çš„æŸ¥è¯¢å‚æ•°ã€‚è¿™é‡Œä½¿ç”¨ <code>c.Query(&quot;callback&quot;)</code> è·å–äº†åä¸º â€œcallbackâ€ çš„æŸ¥è¯¢å‚æ•°çš„å€¼</li>
<li><code>c.JSONP(http.StatusOK, gin.H&#123;...&#125;)</code>: <code>c.JSONP</code> æ–¹æ³•ç”¨äºå°† JSON æ•°æ®ä»¥ JSONP æ ¼å¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<code>http.StatusOK</code> è¡¨ç¤º HTTP å“åº”çŠ¶æ€ç ä¸º 200ï¼Œ<code>gin.H&#123;...&#125;</code> è¡¨ç¤ºè¦è¿”å›çš„ JSON æ•°æ®ã€‚è¿™é‡Œè¿”å›äº†ä¸€ä¸ªåŒ…å« â€œcallbackâ€ å’Œ â€œdataâ€ ä¸¤ä¸ªå­—æ®µçš„ JSON æ•°æ®ï¼Œå…¶ä¸­ â€œcallbackâ€ å­—æ®µçš„å€¼ä¸ºä¸Šä¸€æ­¥è·å–çš„æŸ¥è¯¢å‚æ•° â€œcallbackâ€ çš„å€¼ï¼Œâ€dataâ€ å­—æ®µçš„å€¼ä¸ºä¸€ä¸ªåŒ…å« â€œfooâ€ å­—æ®µçš„ map æ•°æ®ã€‚</li>
</ul>
</blockquote>
<h2 id="19ã€Multipart-x2F-Urlencoded-ç»‘å®š"><a href="#19ã€Multipart-x2F-Urlencoded-ç»‘å®š" class="headerlink" title="19ã€Multipart&#x2F;Urlencoded ç»‘å®š"></a>19ã€Multipart&#x2F;Urlencoded ç»‘å®š</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -17"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -17" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> LoginForm <span class="hljs-keyword">struct</span> &#123;<br>	User     <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;user&quot; binding:&quot;required&quot;`</span>     <span class="hljs-comment">// è¡¨å•å­—æ®µ userï¼Œä½¿ç”¨ binding:&quot;required&quot; æ ‡ç­¾è¡¨ç¤ºå¿…å¡«</span><br>	Password <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;password&quot; binding:&quot;required&quot;`</span> <span class="hljs-comment">// è¡¨å•å­—æ®µ passwordï¼Œä½¿ç”¨ binding:&quot;required&quot; æ ‡ç­¾è¡¨ç¤ºå¿…å¡«</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default()<br>	router.POST(<span class="hljs-string">&quot;/login&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		<span class="hljs-comment">// ä½¿ç”¨ c.ShouldBind æ–¹æ³•å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° LoginForm ç»“æ„ä½“</span><br>		<span class="hljs-keyword">var</span> form LoginForm<br>		<span class="hljs-keyword">if</span> c.ShouldBind(&amp;form) == <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// å¦‚æœç»‘å®šæˆåŠŸ</span><br>			<span class="hljs-keyword">if</span> form.User == <span class="hljs-string">&quot;user&quot;</span> &amp;&amp; form.Password == <span class="hljs-string">&quot;password&quot;</span> &#123; <span class="hljs-comment">// åˆ¤æ–­ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®</span><br>				c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;you are logged in&quot;</span>&#125;)<br>			&#125; <span class="hljs-keyword">else</span> &#123;<br>				c.JSON(<span class="hljs-number">401</span>, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;unauthorized&quot;</span>&#125;)<br>			&#125;<br>		&#125; <span class="hljs-keyword">else</span> &#123;<br>			c.JSON(<span class="hljs-number">401</span>, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;missing params&quot;</span>&#125;) <span class="hljs-comment">// å¦‚æœè¯·æ±‚æ•°æ®ç¼ºå°‘å¿…å¡«å­—æ®µï¼Œåˆ™è¿”å›é”™è¯¯çŠ¶æ€</span><br>		&#125;<br>	&#125;)<br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-16"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-16" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>type LoginForm struct &#123; ... &#125;</code>: <code>LoginForm</code> æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ç»“æ„ä½“ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºç™»å½•è¡¨å•çš„æ•°æ®ç»“æ„ã€‚ç»“æ„ä½“ä¸­åŒ…å«äº†ä¸¤ä¸ªå­—æ®µï¼š<code>User</code> å’Œ <code>Password</code>ï¼Œåˆ†åˆ«å¯¹åº”è¡¨å•ä¸­çš„ â€œuserâ€ å’Œ â€œpasswordâ€ å­—æ®µã€‚</li>
<li><code>router.POST(&quot;/login&quot;, func(c *gin.Context) &#123; ... &#125;)</code>: <code>router.POST</code> æ–¹æ³•æ³¨å†Œäº†ä¸€ä¸ª HTTP POST æ–¹æ³•çš„è·¯ç”±ï¼Œè·¯ç”±è·¯å¾„ä¸º â€œ&#x2F;loginâ€ã€‚å½“å®¢æˆ·ç«¯å‘é€ HTTP POST è¯·æ±‚åˆ° â€œ&#x2F;loginâ€ è·¯å¾„æ—¶ï¼ŒGin ä¼šè°ƒç”¨ä¼ å…¥çš„åŒ¿åå‡½æ•°ä½œä¸ºè¯¥è·¯ç”±çš„å¤„ç†å‡½æ•°ã€‚</li>
<li><code>c.ShouldBind(&amp;form)</code>: <code>c.ShouldBind</code> æ–¹æ³•ç”¨äºå°† HTTP è¯·æ±‚ä¸­çš„æ•°æ®ç»‘å®šåˆ°æŒ‡å®šçš„ç»“æ„ä½“å¯¹è±¡ã€‚è¿™é‡Œä½¿ç”¨ <code>c.ShouldBind(&amp;form)</code> å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° <code>form</code> å˜é‡ï¼Œè¯¥å˜é‡æ˜¯ä¸Šä¸€æ­¥å®šä¹‰çš„ <code>LoginForm</code> ç»“æ„ä½“å¯¹è±¡ã€‚</li>
<li><code>c.JSON(200, gin.H&#123;...&#125;)</code>: <code>c.JSON</code> æ–¹æ³•ç”¨äºå°† JSON æ•°æ®ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚<code>200</code> è¡¨ç¤º HTTP å“åº”çŠ¶æ€ç ä¸º 200ï¼Œ<code>gin.H&#123;...&#125;</code> è¡¨ç¤ºè¦è¿”å›çš„ JSON æ•°æ®ã€‚è¿™é‡Œè¿”å›äº†ä¸€ä¸ªåŒ…å« â€œstatusâ€ å­—æ®µçš„ JSON æ•°æ®ï¼Œå­—æ®µçš„å€¼æ ¹æ®ç™»å½•è¡¨å•çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œåˆ¤æ–­è€Œå®šã€‚</li>
<li><code>c.JSON(401, gin.H&#123;...&#125;)</code>: åŒæ ·åœ°ï¼Œ<code>c.JSON</code> æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºè¿”å› HTTP å“åº”çŠ¶æ€ç ä¸º 401 çš„é”™è¯¯å“åº”ã€‚è¿™é‡Œé€šè¿‡ <code>c.JSON(401, gin.H&#123;&quot;status&quot;: &quot;unauthorized&quot;&#125;)</code> å’Œ <code>c.JSON(401, gin.H&#123;&quot;status&quot;: &quot;missing params&quot;&#125;)</code> åˆ†åˆ«è¿”å›äº†æœªæˆæƒå’Œç¼ºå°‘å¿…å¡«å­—æ®µçš„é”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-12"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-12" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å®šä¹‰äº†ä¸€ä¸ª LoginForm ç»“æ„ä½“ï¼Œç”¨äºç»‘å®š POST è¯·æ±‚ä¸­çš„è¡¨å•æ•°æ®ã€‚è¯¥ç»“æ„ä½“åŒ…å«äº†ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯ User å’Œ Passwordï¼Œä½¿ç”¨äº† Gin æ¡†æ¶çš„è¡¨å•ç»‘å®šæ ‡ç­¾è¿›è¡ŒéªŒè¯ï¼Œè¦æ±‚è¿™ä¸¤ä¸ªå­—æ®µéƒ½æ˜¯å¿…å¡«çš„ã€‚</li>
<li>åœ¨ main å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ª Gin è·¯ç”±å®ä¾‹ routerã€‚</li>
<li>è®¾ç½®äº†ä¸€ä¸ª POST è·¯ç”± â€œ&#x2F;loginâ€ï¼Œå¹¶å®šä¹‰äº†å¤„ç†å‡½æ•°ã€‚åœ¨è¯¥å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨ c.ShouldBind æ–¹æ³•å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ° LoginForm ç»“æ„ä½“ã€‚</li>
<li>å¦‚æœç»‘å®šæˆåŠŸï¼Œå³è¡¨å•æ•°æ®æ»¡è¶³è¦æ±‚ï¼Œé‚£ä¹ˆè¿›ä¸€æ­¥åˆ¤æ–­ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ­£ç¡®ï¼Œåˆ™è¿”å› HTTP çŠ¶æ€ç  200 å’Œä¸€ä¸ª JSON æ ¼å¼çš„æˆåŠŸæ¶ˆæ¯ï¼›å¦åˆ™ï¼Œè¿”å› HTTP çŠ¶æ€ç  401 å’Œä¸€ä¸ª JSON æ ¼å¼çš„æœªæˆæƒæ¶ˆæ¯ã€‚</li>
<li>å¦‚æœè¯·æ±‚æ•°æ®ç¼ºå°‘å¿…å¡«å­—æ®µï¼Œå³ç»‘å®šå¤±è´¥ï¼Œé‚£ä¹ˆè¿”å› HTTP çŠ¶æ€ç  401 å’Œä¸€ä¸ª JSON æ ¼å¼çš„ç¼ºå°‘å‚æ•°æ¶ˆæ¯ã€‚</li>
<li>æœ€åï¼Œé€šè¿‡è°ƒç”¨ router.Run(â€œ:8080â€) å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h2 id="20ã€è¡¨å•"><a href="#20ã€è¡¨å•" class="headerlink" title="20ã€è¡¨å•"></a>20ã€è¡¨å•</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -18"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -18" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default()<br><br>	router.POST(<span class="hljs-string">&quot;/form_post&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		message := c.PostForm(<span class="hljs-string">&quot;message&quot;</span>) <span class="hljs-comment">// è·å–è¡¨å•ä¸­çš„ &quot;message&quot; å­—æ®µå€¼</span><br>		nick := c.DefaultPostForm(<span class="hljs-string">&quot;nick&quot;</span>, <span class="hljs-string">&quot;anonymous&quot;</span>) <span class="hljs-comment">// è·å–è¡¨å•ä¸­çš„ &quot;nick&quot; å­—æ®µå€¼ï¼Œå¦‚æœä¸ºç©ºåˆ™é»˜è®¤ä¸º &quot;anonymous&quot;</span><br><br>		c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;status&quot;</span>:  <span class="hljs-string">&quot;posted&quot;</span>,<br>			<span class="hljs-string">&quot;message&quot;</span>: message,<br>			<span class="hljs-string">&quot;nick&quot;</span>:    nick,<br>		&#125;)<br>	&#125;)<br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-17"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹-17" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹"></a>ï¼ˆ2ï¼‰çŸ¥è¯†ç‚¹</h4><blockquote>
<ul>
<li><code>c.PostForm(&quot;message&quot;)</code>: ä½¿ç”¨ <code>c</code> ä¸Šä¸‹æ–‡å¯¹è±¡çš„ <code>PostForm</code> æ–¹æ³•è·å–è¡¨å•ä¸­åä¸º â€œmessageâ€ çš„å­—æ®µçš„å€¼ã€‚</li>
<li><code>c.DefaultPostForm(&quot;nick&quot;, &quot;anonymous&quot;)</code>: ä½¿ç”¨ <code>c</code> ä¸Šä¸‹æ–‡å¯¹è±¡çš„ <code>DefaultPostForm</code> æ–¹æ³•è·å–è¡¨å•ä¸­åä¸º â€œnickâ€ çš„å­—æ®µçš„å€¼ï¼Œå¦‚æœè¯¥å­—æ®µä¸ºç©ºï¼Œåˆ™è¿”å›é»˜è®¤å€¼ â€œanonymousâ€ã€‚</li>
</ul>
</blockquote>
<h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-13"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„-13" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹å¤§æ„</h4><blockquote>
<ol>
<li>å¯¼å…¥äº† â€œgithub.com&#x2F;gin-gonic&#x2F;ginâ€ åŒ…ï¼Œå¼•å…¥ Gin æ¡†æ¶çš„ä¾èµ–ã€‚</li>
<li>åˆ›å»ºäº†ä¸€ä¸ª Gin è·¯ç”±å¼•æ“ï¼Œä½¿ç”¨äº†é»˜è®¤çš„ä¸­é—´ä»¶ã€‚</li>
<li>å®šä¹‰äº†ä¸€ä¸ªå¤„ç† POST è¯·æ±‚çš„è·¯ç”± â€œ&#x2F;form_postâ€ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚</li>
<li>åœ¨å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨äº† c.PostForm æ–¹æ³•è·å–è¡¨å•ä¸­çš„ â€œmessageâ€ å­—æ®µå€¼ï¼Œå¹¶ä¿å­˜åˆ°å˜é‡ message ä¸­ã€‚</li>
<li>ä½¿ç”¨äº† c.DefaultPostForm æ–¹æ³•è·å–è¡¨å•ä¸­çš„ â€œnickâ€ å­—æ®µå€¼ï¼Œå¹¶ä¿å­˜åˆ°å˜é‡ nick ä¸­ï¼Œå¦‚æœ â€œnickâ€ å­—æ®µä¸ºç©ºï¼Œåˆ™é»˜è®¤å€¼ä¸º â€œanonymousâ€ã€‚</li>
<li>ä½¿ç”¨äº† c.JSON æ–¹æ³•è¿”å› JSON æ ¼å¼çš„å“åº”ï¼ŒåŒ…å«äº†ä¸‰ä¸ªé”®å€¼å¯¹ï¼š â€œstatusâ€ã€â€messageâ€ å’Œ â€œnickâ€ã€‚</li>
<li>è°ƒç”¨ router.Run æ–¹æ³•å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8080ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h2 id="21ã€åªç»‘å®š-url-æŸ¥è¯¢å­—ç¬¦ä¸²"><a href="#21ã€åªç»‘å®š-url-æŸ¥è¯¢å­—ç¬¦ä¸²" class="headerlink" title="21ã€åªç»‘å®š url æŸ¥è¯¢å­—ç¬¦ä¸²"></a>21ã€åªç»‘å®š url æŸ¥è¯¢å­—ç¬¦ä¸²</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -19"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -19" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;log&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> &#123;<br>	Name    <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;name&quot;`</span><br>	Address <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;address&quot;`</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default()<br><br>	<span class="hljs-comment">// å®šä¹‰è·¯ç”± &quot;/testing&quot;ï¼Œå¹¶å°†è¯·æ±‚äº¤ç»™ startPage å‡½æ•°å¤„ç†</span><br>	router.Any(<span class="hljs-string">&quot;/testing&quot;</span>, startPage)<br><br>	router.Run(<span class="hljs-string">&quot;:8085&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ç«¯å£ 8085</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">startPage</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> person Person<br><br>	<span class="hljs-comment">// ä½¿ç”¨ ShouldBindQuery æ–¹æ³•å°†è¯·æ±‚ä¸­çš„ Query String ç»‘å®šåˆ° person å¯¹è±¡</span><br>	<span class="hljs-keyword">if</span> c.ShouldBindQuery(&amp;person) == <span class="hljs-literal">nil</span> &#123;<br>		log.Println(<span class="hljs-string">&quot;====== Only Bind By Query String ======&quot;</span>)<br>		log.Println(person.Name)<br>		log.Println(person.Address)<br>	&#125;<br><br>	c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;Success&quot;</span>) <span class="hljs-comment">// è¿”å› &quot;Success&quot; å­—ç¬¦ä¸²ä½œä¸ºå“åº”</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-1"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-1" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªè·¯ç”±å¤„ç†å‡½æ•° <code>startPage</code> ç”¨äºå¤„ç† â€œ&#x2F;testingâ€ çš„è¯·æ±‚ï¼Œå¯ä»¥å¤„ç† GETã€POSTã€PUTã€DELETE ç­‰ä»»ä½•è¯·æ±‚æ–¹æ³•ã€‚åœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>c.ShouldBindQuery()</code> æ–¹æ³•å°†è¯·æ±‚ä¸­çš„ Query String ç»‘å®šåˆ° <code>person</code> å¯¹è±¡ï¼Œå…¶ä¸­ <code>person.Name</code> å’Œ <code>person.Address</code> åˆ†åˆ«å¯¹åº”äº†è¯·æ±‚ä¸­çš„ â€œnameâ€ å’Œ â€œaddressâ€ å‚æ•°ã€‚</p>
<p>æ¥ç€ä½¿ç”¨ <code>log.Println()</code> æ–¹æ³•è¾“å‡ºç»‘å®šåçš„å­—æ®µå€¼åˆ°æ§åˆ¶å°ã€‚</p>
<p>æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>c.String()</code> æ–¹æ³•è¿”å›çŠ¶æ€ç  200 å’Œ â€œSuccessâ€ å­—ç¬¦ä¸²ä½œä¸ºå“åº”ï¼Œè¡¨ç¤ºå¤„ç†æˆåŠŸã€‚HTTP æœåŠ¡å™¨ç›‘å¬åœ¨ç«¯å£ 8085ï¼Œå¹¶é€šè¿‡ <code>router.Run()</code> å¯åŠ¨ã€‚</p>
</blockquote>
<h2 id="22ã€è·¯å¾„ä¸­çš„å‚æ•°"><a href="#22ã€è·¯å¾„ä¸­çš„å‚æ•°" class="headerlink" title="22ã€è·¯å¾„ä¸­çš„å‚æ•°"></a>22ã€è·¯å¾„ä¸­çš„å‚æ•°</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -20"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -20" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;net/http&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default()<br><br>	<span class="hljs-comment">// è¿™ä¸ªå¤„ç†å‡½æ•°å°†åŒ¹é… /user/johnï¼Œä½†ä¸ä¼šåŒ¹é… /user/ æˆ– /user</span><br>	router.GET(<span class="hljs-string">&quot;/user/:name&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		name := c.Param(<span class="hljs-string">&quot;name&quot;</span>)<br>		c.String(http.StatusOK, <span class="hljs-string">&quot;Hello %s&quot;</span>, name)<br>	&#125;)<br><br>	<span class="hljs-comment">// è¿™ä¸ªå¤„ç†å‡½æ•°å°†åŒ¹é… /user/john/ å’Œ /user/john/send</span><br>	<span class="hljs-comment">// å¦‚æœæ²¡æœ‰å…¶ä»–è·¯ç”±åŒ¹é… /user/johnï¼Œå®ƒå°†é‡å®šå‘åˆ° /user/john/</span><br>	router.GET(<span class="hljs-string">&quot;/user/:name/*action&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		name := c.Param(<span class="hljs-string">&quot;name&quot;</span>)<br>		action := c.Param(<span class="hljs-string">&quot;action&quot;</span>)<br>		message := name + <span class="hljs-string">&quot; is &quot;</span> + action<br>		c.String(http.StatusOK, message)<br>	&#125;)<br><br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-2"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-2" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸¤ä¸ªè·¯ç”±å¤„ç†å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå¤„ç†å‡½æ•°é€šè¿‡è·¯ç”± â€œ&#x2F;user&#x2F;:nameâ€ åŒ¹é… URL ä¸­çš„ â€œ:nameâ€ å‚æ•°ï¼Œå¹¶å°†å…¶å€¼ç»‘å®šåˆ°å˜é‡ name ä¸­ï¼Œç„¶åé€šè¿‡ <code>c.String()</code> æ–¹æ³•è¿”å› â€œHello %sâ€ å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ %s ä¼šè¢« name çš„å€¼æ›¿ä»£ã€‚</p>
<p>ç¬¬äºŒä¸ªå¤„ç†å‡½æ•°é€šè¿‡è·¯ç”± â€œ&#x2F;user&#x2F;:name&#x2F;*actionâ€ åŒ¹é… URL ä¸­çš„ â€œ:nameâ€ å‚æ•°å’Œ â€œ*actionâ€ å‚æ•°ï¼Œâ€*actionâ€ è¡¨ç¤ºåŒ¹é… â€œ&#x2F;user&#x2F;:nameâ€ åé¢çš„ä»»æ„è·¯å¾„ï¼Œå°†å…¶å€¼ç»‘å®šåˆ°å˜é‡ name å’Œ action ä¸­ï¼Œç„¶åé€šè¿‡ <code>c.String()</code> æ–¹æ³•è¿”å›åŒ…å« name å’Œ action çš„æ¶ˆæ¯å­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨ Gin æ¡†æ¶ä¸­ï¼Œè·¯ç”±å‚æ•°å¯ä»¥é€šè¿‡ <code>:paramName</code> çš„æ–¹å¼å®šä¹‰ï¼Œè¡¨ç¤ºåœ¨ URL ä¸­åŒ¹é…è¯¥ä½ç½®çš„ä»»æ„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™è·¯ç”±å¤„ç†å‡½æ•°ã€‚åŒæ—¶ï¼ŒGin è¿˜æ”¯æŒé€šé…ç¬¦ â€œ*â€ï¼Œå¯ä»¥åŒ¹é…ä»»æ„è·¯å¾„ç‰‡æ®µï¼Œç”¨äºå¤„ç†è¾ƒä¸ºå¤æ‚çš„è·¯ç”±éœ€æ±‚ã€‚</p>
</blockquote>
<h2 id="23ã€PureJSON"><a href="#23ã€PureJSON" class="headerlink" title="23ã€PureJSON"></a>23ã€PureJSON</h2><blockquote>
<p>â€‹	é€šå¸¸ï¼ŒJSON ä½¿ç”¨ unicode æ›¿æ¢ç‰¹æ®Š HTML å­—ç¬¦ï¼Œä¾‹å¦‚ &lt; å˜ä¸º \ u003cã€‚å¦‚æœè¦æŒ‰å­—é¢å¯¹è¿™äº›å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ PureJSONã€‚Go 1.6 åŠæ›´ä½ç‰ˆæœ¬æ— æ³•ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -21"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -21" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br><br>	<span class="hljs-comment">// æä¾› unicode å®ä½“</span><br>	r.GET(<span class="hljs-string">&quot;/json&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;html&quot;</span>: <span class="hljs-string">&quot;&lt;b&gt;Hello, world!&lt;/b&gt;&quot;</span>,<br>		&#125;)<br>	&#125;)<br><br>	<span class="hljs-comment">// æä¾›å­—é¢å­—ç¬¦</span><br>	r.GET(<span class="hljs-string">&quot;/purejson&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.PureJSON(<span class="hljs-number">200</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;html&quot;</span>: <span class="hljs-string">&quot;&lt;b&gt;Hello, world!&lt;/b&gt;&quot;</span>,<br>		&#125;)<br>	&#125;)<br><br>	<span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>	r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-3"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-3" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸‰ä¸ªè·¯ç”±å¤„ç†å‡½æ•°ã€‚å…¶ä¸­ <code>/json</code> è·¯ç”±ä½¿ç”¨ <code>c.JSON()</code> æ–¹æ³•è¿”å› JSON æ ¼å¼çš„å“åº”ä½“ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåä¸º â€œhtmlâ€ çš„å­—æ®µï¼Œå€¼ä¸º â€œ<b>Hello, world!</b>â€œã€‚<code>c.JSON()</code> æ–¹æ³•ä¼šå°†å“åº”ä½“åºåˆ—åŒ–ä¸º JSON æ ¼å¼å¹¶è®¾ç½®ç›¸åº”çš„ Content-Type å¤´ï¼Œä½¿å¾—è¿”å›çš„å“åº”ä½“åœ¨å®¢æˆ·ç«¯ä»¥ JSON æ ¼å¼å±•ç¤ºã€‚</p>
<p>è€Œ <code>/purejson</code> è·¯ç”±ä½¿ç”¨ <code>c.PureJSON()</code> æ–¹æ³•åŒæ ·è¿”å› JSON æ ¼å¼çš„å“åº”ä½“ï¼Œä½†ä¸ä¼šå¯¹å“åº”ä½“ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œä¿ç•™åŸå§‹å­—ç¬¦ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æœ‰ç”¨ï¼Œä¾‹å¦‚å½“éœ€è¦è¿”å›åŒ…å« HTML æ ‡ç­¾ç­‰ç‰¹æ®Šå­—ç¬¦çš„å“åº”ä½“æ—¶ã€‚</p>
<p>æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>r.Run()</code> æ–¹æ³•åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬è¯·æ±‚ã€‚Gin æ¡†æ¶çš„ <code>Run()</code> æ–¹æ³•ä¼šè‡ªåŠ¨é€‰æ‹©å¯ç”¨çš„ç«¯å£å¹¶å¯åŠ¨æœåŠ¡å™¨ã€‚</p>
</blockquote>
<h2 id="24ã€POST-è¡¨å•ä¸­çš„-URL-å‚æ•°"><a href="#24ã€POST-è¡¨å•ä¸­çš„-URL-å‚æ•°" class="headerlink" title="24ã€POST è¡¨å•ä¸­çš„ URL å‚æ•°"></a>24ã€POST è¡¨å•ä¸­çš„ URL å‚æ•°</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">POST /post?id=<span class="hljs-number">1234</span>&amp;page=<span class="hljs-number">1</span> HTTP/<span class="hljs-number">1.1</span><br>Content-Type: application/x-www-form-urlencoded<br><br>name=manu&amp;message=this_is_great<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -22"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -22" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;fmt&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default()<br><br>	router.POST(<span class="hljs-string">&quot;/post&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br><br>		id := c.Query(<span class="hljs-string">&quot;id&quot;</span>)               <span class="hljs-comment">// è·å– URL æŸ¥è¯¢å‚æ•° &quot;id&quot;</span><br>		page := c.DefaultQuery(<span class="hljs-string">&quot;page&quot;</span>, <span class="hljs-string">&quot;0&quot;</span>) <span class="hljs-comment">// è·å– URL æŸ¥è¯¢å‚æ•° &quot;page&quot;ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™é»˜è®¤ä¸º &quot;0&quot;</span><br>		name := c.PostForm(<span class="hljs-string">&quot;name&quot;</span>)         <span class="hljs-comment">// è·å– POST è¡¨å•å­—æ®µ &quot;name&quot;</span><br>		message := c.PostForm(<span class="hljs-string">&quot;message&quot;</span>)   <span class="hljs-comment">// è·å– POST è¡¨å•å­—æ®µ &quot;message&quot;</span><br><br>		fmt.Printf(<span class="hljs-string">&quot;id: %s; page: %s; name: %s; message: %s&quot;</span>, id, page, name, message)<br>	&#125;)<br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-4"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-4" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªå¤„ç† POST è¯·æ±‚çš„è·¯ç”±å¤„ç†å‡½æ•°ã€‚è¯¥å¤„ç†å‡½æ•°ä»è¯·æ±‚ä¸­è·å– URL æŸ¥è¯¢å‚æ•° â€œidâ€ å’Œ â€œpageâ€ï¼Œä»¥åŠ POST è¡¨å•å­—æ®µ â€œnameâ€ å’Œ â€œmessageâ€ çš„å€¼ï¼Œå¹¶å°†å…¶æ‰“å°è¾“å‡ºã€‚</p>
<p>ä½¿ç”¨ <code>c.Query()</code> æ–¹æ³•å¯ä»¥è·å– URL æŸ¥è¯¢å‚æ•°çš„å€¼ï¼Œå…¶ä¸­å‚æ•°ä¸ºå‚æ•°åã€‚è€Œä½¿ç”¨ <code>c.PostForm()</code> æ–¹æ³•å¯ä»¥è·å– POST è¡¨å•å­—æ®µçš„å€¼ï¼ŒåŒæ ·å‚æ•°ä¸ºå­—æ®µåã€‚å¦‚æœ POST è¡¨å•ä¸­æ²¡æœ‰æŒ‡å®šçš„å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨ <code>c.DefaultPostForm()</code> æ–¹æ³•è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<p>æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>router.Run()</code> æ–¹æ³•åœ¨ â€œ:8080â€ ä¸Šå¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬è¯·æ±‚ã€‚Gin æ¡†æ¶çš„ <code>Run()</code> æ–¹æ³•ä¼šè‡ªåŠ¨é€‰æ‹©å¯ç”¨çš„ç«¯å£å¹¶å¯åŠ¨æœåŠ¡å™¨ã€‚</p>
</blockquote>
<h2 id="25ã€æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°"><a href="#25ã€æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°" class="headerlink" title="25ã€æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°"></a>25ã€æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -23"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -23" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>	<span class="hljs-string">&quot;net/http&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default()<br><br>	<span class="hljs-comment">// ä½¿ç”¨ç°æœ‰çš„åŸºç¡€è¯·æ±‚å¯¹è±¡è§£ææŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ã€‚</span><br>	<span class="hljs-comment">// ç¤ºä¾‹ URLï¼š /welcome?firstname=Jane&amp;lastname=Doe</span><br>	router.GET(<span class="hljs-string">&quot;/welcome&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		firstname := c.DefaultQuery(<span class="hljs-string">&quot;firstname&quot;</span>, <span class="hljs-string">&quot;Guest&quot;</span>) <span class="hljs-comment">// è·å–æŸ¥è¯¢å‚æ•° &quot;firstname&quot;ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™é»˜è®¤ä¸º &quot;Guest&quot;</span><br>		lastname := c.Query(<span class="hljs-string">&quot;lastname&quot;</span>)                   <span class="hljs-comment">// è·å–æŸ¥è¯¢å‚æ•° &quot;lastname&quot;</span><br><br>		c.String(http.StatusOK, <span class="hljs-string">&quot;Hello %s %s&quot;</span>, firstname, lastname)<br>	&#125;)<br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-5"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-5" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªå¤„ç† GET è¯·æ±‚çš„è·¯ç”±å¤„ç†å‡½æ•°ã€‚è¯¥å¤„ç†å‡½æ•°ä» URL æŸ¥è¯¢å‚æ•° â€œfirstnameâ€ å’Œ â€œlastnameâ€ çš„å€¼ï¼Œå¹¶å°†å…¶ç»„åˆæˆå­—ç¬¦ä¸²åä½œä¸ºå“åº”è¿”å›ã€‚</p>
<p>ä½¿ç”¨ <code>c.Query()</code> æ–¹æ³•å¯ä»¥è·å– URL æŸ¥è¯¢å‚æ•°çš„å€¼ï¼Œå…¶ä¸­å‚æ•°ä¸ºå‚æ•°åã€‚è€Œä½¿ç”¨ <code>c.DefaultQuery()</code> æ–¹æ³•å¯ä»¥è·å– URL æŸ¥è¯¢å‚æ•°çš„å€¼ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå½“æŸ¥è¯¢å‚æ•°ä¸å­˜åœ¨æ—¶ä½¿ç”¨ã€‚è¿™åœ¨ç¤ºä¾‹ä¸­ç”¨äºè·å– â€œfirstnameâ€ çš„å€¼ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ä¸º â€œGuestâ€ã€‚</p>
<p>Gin æ¡†æ¶çš„ <code>Run()</code> æ–¹æ³•ä¼šè‡ªåŠ¨é€‰æ‹©å¯ç”¨çš„ç«¯å£å¹¶å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œé€šè¿‡è°ƒç”¨ <code>router.Run(&quot;:8080&quot;)</code> åœ¨ â€œ:8080â€ ä¸Šå¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬è¯·æ±‚ã€‚</p>
</blockquote>
<h2 id="26ã€é‡å®šå‘"><a href="#26ã€é‡å®šå‘" class="headerlink" title="26ã€é‡å®šå‘"></a>26ã€é‡å®šå‘</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/test&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>    c.Redirect(http.StatusMovedPermanently, <span class="hljs-string">&quot;http://www.google.com/&quot;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -24"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -24" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/test&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>    c.Request.URL.Path = <span class="hljs-string">&quot;/test2&quot;</span><br>    r.HandleContext(c)<br>&#125;)<br>r.GET(<span class="hljs-string">&quot;/test2&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>    c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;hello&quot;</span>: <span class="hljs-string">&quot;world&quot;</span>&#125;)<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-6"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-6" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>â€‹	å½“è®¿é—® <code>/test</code> æ—¶ï¼Œè¯·æ±‚çš„ URL è·¯å¾„è¢«ä¿®æ”¹ä¸º <code>/test2</code>ï¼Œç„¶åå†æ¬¡å¤„ç†è¯·æ±‚ã€‚ç”±äº <code>/test2</code> è·¯å¾„æœ‰å¯¹åº”çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥ä¼šè¿”å› <code>&#123;&quot;hello&quot;: &quot;world&quot;&#125;</code> JSON å“åº”ã€‚</p>
</blockquote>
<h2 id="27ã€è¿è¡Œå¤šä¸ªæœåŠ¡"><a href="#27ã€è¿è¡Œå¤šä¸ªæœåŠ¡" class="headerlink" title="27ã€è¿è¡Œå¤šä¸ªæœåŠ¡"></a>27ã€è¿è¡Œå¤šä¸ªæœåŠ¡</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -25"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -25" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;log&quot;</span><br>	<span class="hljs-string">&quot;net/http&quot;</span><br>	<span class="hljs-string">&quot;time&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>	<span class="hljs-string">&quot;golang.org/x/sync/errgroup&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br>	g errgroup.Group <span class="hljs-comment">// å…¨å±€ errgroup.Group å¯¹è±¡ï¼Œç”¨äºç®¡ç†å¤šä¸ª Goroutine</span><br>)<br><br><span class="hljs-comment">// åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª Gin å®ä¾‹ï¼Œä½œä¸º server01 çš„è·¯ç”±å¤„ç†å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">router01</span><span class="hljs-params">()</span></span> http.Handler &#123;<br>	e := gin.New() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Gin å®ä¾‹</span><br>	e.Use(gin.Recovery()) <span class="hljs-comment">// æ·»åŠ  Recovery ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç†è¯·æ±‚ä¸­çš„é”™è¯¯</span><br>	e.GET(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// å®šä¹‰æ ¹è·¯å¾„çš„ GET è¯·æ±‚å¤„ç†å‡½æ•°</span><br>		c.JSON(<br>			http.StatusOK,<br>			gin.H&#123;<br>				<span class="hljs-string">&quot;code&quot;</span>:  http.StatusOK,<br>				<span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-string">&quot;Welcome server 01&quot;</span>,<br>			&#125;,<br>		)<br>	&#125;)<br><br>	<span class="hljs-keyword">return</span> e<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª Gin å®ä¾‹ï¼Œä½œä¸º server02 çš„è·¯ç”±å¤„ç†å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">router02</span><span class="hljs-params">()</span></span> http.Handler &#123;<br>	e := gin.New() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Gin å®ä¾‹</span><br>	e.Use(gin.Recovery()) <span class="hljs-comment">// æ·»åŠ  Recovery ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç†è¯·æ±‚ä¸­çš„é”™è¯¯</span><br>	e.GET(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// å®šä¹‰æ ¹è·¯å¾„çš„ GET è¯·æ±‚å¤„ç†å‡½æ•°</span><br>		c.JSON(<br>			http.StatusOK,<br>			gin.H&#123;<br>				<span class="hljs-string">&quot;code&quot;</span>:  http.StatusOK,<br>				<span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-string">&quot;Welcome server 02&quot;</span>,<br>			&#125;,<br>		)<br>	&#125;)<br><br>	<span class="hljs-keyword">return</span> e<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	server01 := &amp;http.Server&#123;<br>		Addr:         <span class="hljs-string">&quot;:8080&quot;</span>,         <span class="hljs-comment">// server01 ç›‘å¬çš„åœ°å€å’Œç«¯å£</span><br>		Handler:      router01(),      <span class="hljs-comment">// server01 ä½¿ç”¨ router01 ä½œä¸ºè·¯ç”±å¤„ç†å™¨</span><br>		ReadTimeout:  <span class="hljs-number">5</span> * time.Second, <span class="hljs-comment">// server01 è¯»å–è¶…æ—¶æ—¶é—´</span><br>		WriteTimeout: <span class="hljs-number">10</span> * time.Second, <span class="hljs-comment">// server01 å†™å…¥è¶…æ—¶æ—¶é—´</span><br>	&#125;<br><br>	server02 := &amp;http.Server&#123;<br>		Addr:         <span class="hljs-string">&quot;:8081&quot;</span>,         <span class="hljs-comment">// server02 ç›‘å¬çš„åœ°å€å’Œç«¯å£</span><br>		Handler:      router02(),      <span class="hljs-comment">// server02 ä½¿ç”¨ router02 ä½œä¸ºè·¯ç”±å¤„ç†å™¨</span><br>		ReadTimeout:  <span class="hljs-number">5</span> * time.Second, <span class="hljs-comment">// server02 è¯»å–è¶…æ—¶æ—¶é—´</span><br>		WriteTimeout: <span class="hljs-number">10</span> * time.Second, <span class="hljs-comment">// server02 å†™å…¥è¶…æ—¶æ—¶é—´</span><br>	&#125;<br><br>	<span class="hljs-comment">// ä½¿ç”¨ errgroup ç®¡ç†å¤šä¸ª Goroutineï¼Œåˆ†åˆ«å¯åŠ¨ server01 å’Œ server02</span><br>	g.Go(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> &#123;<br>		<span class="hljs-keyword">return</span> server01.ListenAndServe()<br>	&#125;)<br><br>	g.Go(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> &#123;<br>		<span class="hljs-keyword">return</span> server02.ListenAndServe()<br>	&#125;)<br><br>	<span class="hljs-keyword">if</span> err := g.Wait(); err != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// ç­‰å¾…ä¸¤ä¸ª Goroutine ç»“æŸ</span><br>		log.Fatal(err) <span class="hljs-comment">// å¦‚æœæœ‰é”™è¯¯å‘ç”Ÿï¼Œåˆ™è¾“å‡ºé”™è¯¯æ—¥å¿—</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-7"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-7" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸¤ä¸ªç‹¬ç«‹çš„ HTTP æœåŠ¡å™¨ï¼Œåˆ†åˆ«ç›‘å¬ä¸åŒçš„ç«¯å£ã€‚<code>router01</code> å’Œ <code>router02</code> å‡½æ•°åˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ª Gin è·¯ç”±å¤„ç†å™¨ï¼Œåˆ†åˆ«å¤„ç†æ ¹è·¯å¾„çš„ GET è¯·æ±‚ï¼Œå¹¶è¿”å›ä¸åŒçš„ JSON å“åº”ã€‚</p>
<p>é€šè¿‡ <code>errgroup</code> åŒ…ç®¡ç†ä¸¤ä¸ª Goroutineï¼Œåˆ†åˆ«å¯åŠ¨äº† <code>server01</code> å’Œ <code>server02</code> çš„ç›‘å¬æ“ä½œã€‚æ¯ä¸ªæœåŠ¡å™¨éƒ½ä½¿ç”¨äº†ä¸åŒçš„ç›‘å¬åœ°å€å’Œç«¯å£ï¼Œä»¥åŠä¸åŒçš„è·¯ç”±å¤„ç†å™¨ã€‚</p>
<p>å¦‚æœæœ‰é”™è¯¯å‘ç”Ÿï¼Œ<code>errgroup.Wait()</code> æ–¹æ³•ä¼šç­‰å¾…ä¸¤ä¸ª Goroutine ç»“æŸï¼Œå¹¶è¿”å›é”™è¯¯ã€‚å¦‚æœè¿”å›çš„é”™è¯¯ä¸ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ <code>log.Fatal()</code> è¾“å‡ºé”™è¯¯æ—¥å¿—å¹¶ç»ˆæ­¢ç¨‹åºè¿è¡Œã€‚</p>
<p>è¿™æ®µä»£ç çš„ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºå¹¶åŒæ—¶å¯åŠ¨ä¸¤ä¸ªç‹¬ç«‹çš„ HTTP æœåŠ¡å™¨ï¼Œå®ƒä»¬åˆ†åˆ«ç›‘å¬ä¸åŒçš„ç«¯å£ï¼Œå¹¶ä½¿ç”¨ Gin æ¡†æ¶å¤„ç†è·¯ç”±è¯·æ±‚ã€‚ä½¿ç”¨ <code>errgroup</code> åŒ…å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†å¤šä¸ª Goroutineï¼Œå¹¶åœ¨ä»»ä½•ä¸€ä¸ª Goroutine å‘ç”Ÿé”™è¯¯æ—¶åŠæ—¶æ•è·å’Œå¤„ç†ã€‚è¿™ç§æ–¹å¼å¯ä»¥æœ‰æ•ˆåœ°æé«˜æœåŠ¡å™¨çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚</p>
</blockquote>
<h2 id="28ã€SecureJSON"><a href="#28ã€SecureJSON" class="headerlink" title="28ã€SecureJSON"></a>28ã€SecureJSON</h2><blockquote>
<p>ä½¿ç”¨ SecureJSON é˜²æ­¢ json åŠ«æŒã€‚å¦‚æœç»™å®šçš„ç»“æ„æ˜¯æ•°ç»„å€¼ï¼Œåˆ™é»˜è®¤é¢„ç½® <code>&quot;while(1),&quot;</code> åˆ°å“åº”ä½“ã€‚</p>
</blockquote>
<h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -26"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -26" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.Default()  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin å®ä¾‹</span><br><br>    <span class="hljs-comment">// ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„ SecureJSON å‰ç¼€</span><br>    <span class="hljs-comment">// r.SecureJsonPrefix(&quot;)]&#125;&#x27;,\n&quot;)</span><br><br>    r.GET(<span class="hljs-string">&quot;/someJSON&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <span class="hljs-comment">// æ³¨å†Œå¤„ç†è·¯ç”± &quot;/someJSON&quot; çš„ GET è¯·æ±‚çš„å¤„ç†å‡½æ•°</span><br>        names := []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;lena&quot;</span>, <span class="hljs-string">&quot;austin&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>&#125;  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ names</span><br><br>        <span class="hljs-comment">// å°† names åˆ‡ç‰‡ä½œä¸º JSON å“åº”è¿”å›ç»™å®¢æˆ·ç«¯</span><br>        <span class="hljs-comment">// ä½¿ç”¨ http.StatusOK è¡¨ç¤º HTTP å“åº”çš„çŠ¶æ€ç ä¸º 200 OK</span><br>        <span class="hljs-comment">// å¹¶åœ¨è¿”å›çš„ JSON æ•°æ®å‰åŠ ä¸Šå®‰å…¨å‰ç¼€ï¼Œé˜²æ­¢ JSON åŠ«æŒæ”»å‡»</span><br>        c.SecureJSON(http.StatusOK, names)<br>    &#125;)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-8"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-8" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªè·¯ç”±å¤„ç†å‡½æ•°ã€‚ä»£ç çš„ä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä½¿ç”¨ <code>gin.Default()</code> åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin å®ä¾‹ <code>r</code>ï¼Œå®ƒåŒ…å«äº†ä¸€äº›å¸¸ç”¨çš„ä¸­é—´ä»¶ï¼Œå¦‚æ—¥å¿—ã€æ¢å¤ç­‰ã€‚</li>
<li>æ³¨å†Œä¸€ä¸ªå¤„ç†è·¯ç”± <code>/someJSON</code> çš„ GET è¯·æ±‚çš„å¤„ç†å‡½æ•°ã€‚è¯¥å¤„ç†å‡½æ•°æ¥æ”¶ä¸€ä¸ª <code>gin.Context</code> å¯¹è±¡ <code>c</code>ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œæ„å»º HTTP å“åº”ã€‚</li>
<li>åœ¨å¤„ç†å‡½æ•°ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ <code>names</code>ï¼ŒåŒ…å«äº†ä¸‰ä¸ªå­—ç¬¦ä¸²å…ƒç´ ã€‚</li>
<li>ä½¿ç”¨ <code>c.SecureJSON(http.StatusOK, names)</code> å°† <code>names</code> åˆ‡ç‰‡ä½œä¸º JSON å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™é‡Œä½¿ç”¨äº† <code>http.StatusOK</code> è¡¨ç¤º HTTP å“åº”çš„çŠ¶æ€ç ä¸º 200 OKï¼Œå¹¶ä¸”åœ¨è¿”å›çš„ JSON æ•°æ®å‰åŠ ä¸Šäº†å®‰å…¨å‰ç¼€ï¼Œé˜²æ­¢ JSON åŠ«æŒæ”»å‡»ã€‚</li>
<li>è°ƒç”¨ <code>r.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 0.0.0.0:8080 åœ°å€ä¸Šã€‚</li>
</ol>
<p>è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡ <code>/someJSON</code> è·¯å¾„å‘é€ GET è¯·æ±‚æ—¶ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„ JSON æ•°ç»„ä½œä¸ºå“åº”ã€‚æœåŠ¡å™¨ç›‘å¬åœ¨ 0.0.0.0:8080 åœ°å€ä¸Šï¼Œå¹¶ä½¿ç”¨ Gin æ¡†æ¶å¤„ç†è·¯ç”±å’Œæ„å»º HTTP å“åº”ã€‚</p>
</blockquote>
<h2 id="29ã€ä»-reader-è¯»å–æ•°æ®"><a href="#29ã€ä»-reader-è¯»å–æ•°æ®" class="headerlink" title="29ã€ä» reader è¯»å–æ•°æ®"></a>29ã€ä» reader è¯»å–æ•°æ®</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -27"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -27" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;net/http&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“</span><br>	router := gin.Default()<br><br>	<span class="hljs-comment">// å®šä¹‰å¤„ç†è·¯ç”± /someDataFromReader çš„ GET è¯·æ±‚çš„å¤„ç†å‡½æ•°</span><br>	router.GET(<span class="hljs-string">&quot;/someDataFromReader&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		<span class="hljs-comment">// å‘èµ· HTTP GET è¯·æ±‚è·å–è¿œç¨‹æ–‡ä»¶</span><br>		response, err := http.Get(<span class="hljs-string">&quot;https://raw.githubusercontent.com/gin-gonic/logo/master/color.png&quot;</span>)<br>		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> || response.StatusCode != http.StatusOK &#123;<br>			<span class="hljs-comment">// å¦‚æœè¯·æ±‚å‡ºé”™æˆ–è€…å“åº”çŠ¶æ€ç ä¸æ˜¯ 200 OKï¼Œåˆ™è¿”å› 503 Service Unavailable çŠ¶æ€ç </span><br>			c.Status(http.StatusServiceUnavailable)<br>			<span class="hljs-keyword">return</span><br>		&#125;<br><br>		<span class="hljs-comment">// è·å–å“åº”çš„ Bodyã€ContentLength å’Œ ContentType</span><br>		reader := response.Body<br>		contentLength := response.ContentLength<br>		contentType := response.Header.Get(<span class="hljs-string">&quot;Content-Type&quot;</span>)<br><br>		<span class="hljs-comment">// æ„å»ºé¢å¤–çš„å“åº”å¤´</span><br>		extraHeaders := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>&#123;<br>			<span class="hljs-string">&quot;Content-Disposition&quot;</span>: <span class="hljs-string">`attachment; filename=&quot;gopher.png&quot;`</span>,<br>		&#125;<br><br>		<span class="hljs-comment">// ä½¿ç”¨ c.DataFromReader æ–¹æ³•å°†æ–‡ä»¶æ•°æ®ä½œä¸ºå“åº”è¿”å›ç»™å®¢æˆ·ç«¯</span><br>		c.DataFromReader(http.StatusOK, contentLength, contentType, reader, extraHeaders)<br>	&#125;)<br><br>	<span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ :8080 åœ°å€ä¸Š</span><br>	router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-9"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-9" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>è¿™æ®µä»£ç ä½¿ç”¨äº† Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ªå¤„ç†è·¯ç”± â€œ&#x2F;someDataFromReaderâ€ çš„ GET è¯·æ±‚çš„å¤„ç†å‡½æ•°ã€‚</p>
<ol>
<li><code>gin.Default()</code> åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“ã€‚</li>
<li><code>router.GET(&quot;/someDataFromReader&quot;, func(c *gin.Context) &#123; ... &#125;)</code> å®šä¹‰äº†å¤„ç†è·¯ç”± â€œ&#x2F;someDataFromReaderâ€ çš„ GET è¯·æ±‚çš„å¤„ç†å‡½æ•°ã€‚å‡½æ•°ä½“ä¸­çš„ä»£ç ä¼šåœ¨æ¥æ”¶åˆ° â€œ&#x2F;someDataFromReaderâ€ çš„ GET è¯·æ±‚æ—¶æ‰§è¡Œã€‚</li>
<li><code>http.Get(&quot;https://raw.githubusercontent.com/gin-gonic/logo/master/color.png&quot;)</code> å‘èµ·äº†ä¸€ä¸ª HTTP GET è¯·æ±‚ï¼Œè·å–è¿œç¨‹æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœè¯·æ±‚å‡ºé”™æˆ–è€…å“åº”çŠ¶æ€ç ä¸æ˜¯ 200 OKï¼Œä¼šè¿”å› 503 Service Unavailable çŠ¶æ€ç ç»™å®¢æˆ·ç«¯ã€‚</li>
<li><code>c.DataFromReader(http.StatusOK, contentLength, contentType, reader, extraHeaders)</code> ä½¿ç”¨ Gin æä¾›çš„ <code>c.DataFromReader</code> æ–¹æ³•å°†æ–‡ä»¶æ•°æ®ä½œä¸ºå“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<code>http.StatusOK</code> æ˜¯å“åº”çš„çŠ¶æ€ç ï¼Œ<code>contentLength</code> æ˜¯æ–‡ä»¶çš„é•¿åº¦ï¼Œ<code>contentType</code> æ˜¯æ–‡ä»¶çš„ MIME ç±»å‹ï¼Œ<code>reader</code> æ˜¯æ–‡ä»¶çš„å†…å®¹ï¼Œ<code>extraHeaders</code> æ˜¯ä¸€äº›é¢å¤–çš„å“åº”å¤´ï¼Œè¿™é‡Œè®¾ç½®äº† Content-Disposition å¤´ï¼ŒæŒ‡å®šæ–‡ä»¶åä¸º â€œgopher.pngâ€ã€‚</li>
<li><code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ â€œ:8080â€ åœ°å€ä¸Šï¼Œå¼€å§‹æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ol>
<p>æ€»ä½“æ¥è¯´ï¼Œè¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œé€šè¿‡å¤„ç† GET è¯·æ±‚è·å–è¿œç¨‹æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†æ–‡ä»¶æ•°æ®ä½œä¸ºå“åº”è¿”å›ç»™å®¢æˆ·ç«¯ï¼ŒåŒæ—¶è®¾ç½®äº†æ–‡ä»¶çš„ Content-Disposition å¤´ï¼ŒæŒ‡å®šæ–‡ä»¶åä¸º â€œgopher.pngâ€ã€‚</p>
</blockquote>
<h2 id="30ã€-é™æ€æ–‡ä»¶æœåŠ¡"><a href="#30ã€-é™æ€æ–‡ä»¶æœåŠ¡" class="headerlink" title="30ã€ é™æ€æ–‡ä»¶æœåŠ¡"></a>30ã€ é™æ€æ–‡ä»¶æœåŠ¡</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -28"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -28" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br><br>    <span class="hljs-comment">// æ³¨å†Œé™æ€æ–‡ä»¶è·¯ç”±ï¼Œå°†è¯·æ±‚ &quot;/assets&quot; çš„é™æ€æ–‡ä»¶ä»å½“å‰ç›®å½•ä¸‹çš„ &quot;./assets&quot; ç›®å½•ä¸­è¿”å›ç»™å®¢æˆ·ç«¯</span><br>    router.Static(<span class="hljs-string">&quot;/assets&quot;</span>, <span class="hljs-string">&quot;./assets&quot;</span>)<br><br>    <span class="hljs-comment">// æ³¨å†ŒåŸºäºæ–‡ä»¶ç³»ç»Ÿçš„é™æ€æ–‡ä»¶è·¯ç”±ï¼Œå°†è¯·æ±‚ &quot;/more_static&quot; çš„é™æ€æ–‡ä»¶ä»æŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ &quot;my_file_system&quot; ä¸­è¿”å›ç»™å®¢æˆ·ç«¯</span><br>    router.StaticFS(<span class="hljs-string">&quot;/more_static&quot;</span>, http.Dir(<span class="hljs-string">&quot;my_file_system&quot;</span>))<br><br>    <span class="hljs-comment">// æ³¨å†Œå•ä¸ªæ–‡ä»¶çš„é™æ€æ–‡ä»¶è·¯ç”±ï¼Œå°†è¯·æ±‚ &quot;/favicon.ico&quot; çš„é™æ€æ–‡ä»¶ä»å½“å‰ç›®å½•ä¸‹çš„ &quot;./resources/favicon.ico&quot; æ–‡ä»¶è¿”å›ç»™å®¢æˆ·ç«¯</span><br>    router.StaticFile(<span class="hljs-string">&quot;/favicon.ico&quot;</span>, <span class="hljs-string">&quot;./resources/favicon.ico&quot;</span>)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-10"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-10" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>ä»¥ä¸Šä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„é™æ€æ–‡ä»¶æœåŠ¡å™¨ã€‚é€šè¿‡æ³¨å†Œé™æ€æ–‡ä»¶è·¯ç”±ï¼Œå¯ä»¥å°†æŒ‡å®šç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚å›¾ç‰‡ã€CSSã€JavaScript ç­‰èµ„æºæ–‡ä»¶ï¼Œä»¥ä¾›å®¢æˆ·ç«¯çš„æµè§ˆå™¨è¿›è¡Œè®¿é—®å’ŒåŠ è½½ã€‚è¿™å¯¹äºæ„å»ºå‰ç«¯åº”ç”¨æˆ–è€…æä¾›é™æ€èµ„æºæ–‡ä»¶çš„éœ€æ±‚éå¸¸æœ‰ç”¨ã€‚åœ¨ä»£ç ä¸­ä½¿ç”¨äº†ä¸åŒçš„é™æ€æ–‡ä»¶è·¯ç”±æ³¨å†Œæ–¹å¼ï¼ŒåŒ…æ‹¬ <code>router.Static()</code>ã€<code>router.StaticFS()</code> å’Œ <code>router.StaticFile()</code>ï¼Œç”¨äºå¤„ç†ä¸åŒçš„é™æ€æ–‡ä»¶è¯·æ±‚ã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ°å€ä¸º â€œ0.0.0.0:8080â€ï¼Œå¹¶å¼€å§‹æ¥æ”¶å¹¶å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
</blockquote>
<h2 id="31ã€-è®¾ç½®å’Œè·å–-Cookie"><a href="#31ã€-è®¾ç½®å’Œè·å–-Cookie" class="headerlink" title="31ã€ è®¾ç½®å’Œè·å– Cookie"></a>31ã€ è®¾ç½®å’Œè·å– Cookie</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -29"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -29" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;fmt&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br><br>	router.GET(<span class="hljs-string">&quot;/cookie&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// æ³¨å†Œ &quot;/cookie&quot; è·¯ç”±çš„ GET æ–¹æ³•å¤„ç†å‡½æ•°</span><br>		cookie, err := c.Cookie(<span class="hljs-string">&quot;gin_cookie&quot;</span>) <span class="hljs-comment">// è·å–åä¸º &quot;gin_cookie&quot; çš„ Cookie</span><br><br>		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// å¦‚æœè·å– Cookie å‘ç”Ÿé”™è¯¯ï¼Œåˆ™è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼</span><br>			cookie = <span class="hljs-string">&quot;NotSet&quot;</span><br>			c.SetCookie(<span class="hljs-string">&quot;gin_cookie&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-number">3600</span>, <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// è®¾ç½®åä¸º &quot;gin_cookie&quot; çš„ Cookie å€¼ä¸º &quot;test&quot;ï¼Œè¿‡æœŸæ—¶é—´ä¸º 3600 ç§’ï¼Œè·¯å¾„ä¸º &quot;/&quot;ï¼ŒåŸŸåä¸º &quot;localhost&quot;ï¼Œä¸é™åˆ¶ HTTPS è¿æ¥ï¼Œå…è®¸ JS è®¿é—®</span><br>		&#125;<br><br>		fmt.Printf(<span class="hljs-string">&quot;Cookie value: %s \n&quot;</span>, cookie) <span class="hljs-comment">// åœ¨æ§åˆ¶å°æ‰“å° Cookie çš„å€¼</span><br>	&#125;)<br><br>	router.Run() <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œå¼€å§‹æ¥æ”¶å¹¶å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-11"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-11" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>â€‹	ä»¥ä¸Šä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ª â€œ&#x2F;cookieâ€ è·¯ç”±çš„ GET æ–¹æ³•å¤„ç†å‡½æ•°ã€‚åœ¨å¤„ç†å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>c.Cookie(&quot;gin_cookie&quot;)</code> è·å–åä¸º â€œgin_cookieâ€ çš„ Cookie å€¼ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥ã€‚å¦‚æœè·å– Cookie å‘ç”Ÿé”™è¯¯ï¼ˆä¾‹å¦‚ä¸å­˜åœ¨ï¼‰ï¼Œåˆ™è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¹¶é€šè¿‡ <code>c.SetCookie()</code> æ–¹æ³•è®¾ç½®åä¸º â€œgin_cookieâ€ çš„ Cookie å€¼ä¸º â€œtestâ€ï¼Œè¿‡æœŸæ—¶é—´ä¸º 3600 ç§’ï¼Œè·¯å¾„ä¸º â€œ&#x2F;â€œï¼ŒåŸŸåä¸º â€œlocalhostâ€ï¼Œä¸é™åˆ¶ HTTPS è¿æ¥ï¼Œå…è®¸ JS è®¿é—®ã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>router.Run()</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬é»˜è®¤çš„åœ°å€å’Œç«¯å£ï¼ˆ0.0.0.0:8080ï¼‰ï¼Œå¹¶å¼€å§‹æ¥æ”¶å¹¶å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
</blockquote>
<h2 id="32ã€æ”¯æŒ-Letâ€™s-Encrypt"><a href="#32ã€æ”¯æŒ-Letâ€™s-Encrypt" class="headerlink" title="32ã€æ”¯æŒ Letâ€™s Encrypt"></a>32ã€æ”¯æŒ Letâ€™s Encrypt</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -30"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -30" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><blockquote>
<p>ä¸€è¡Œä»£ç æ”¯æŒ LetsEncrypt HTTPS servers ç¤ºä¾‹ã€‚</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;log&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/autotls&quot;</span><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br><br>	<span class="hljs-comment">// æ³¨å†Œ &quot;/ping&quot; è·¯ç”±çš„ GET æ–¹æ³•å¤„ç†å‡½æ•°</span><br>	r.GET(<span class="hljs-string">&quot;/ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;pong&quot;</span>)<br>	&#125;)<br><br>	<span class="hljs-comment">// ä½¿ç”¨ Autotls å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åŸŸå &quot;example1.com&quot; å’Œ &quot;example2.com&quot;</span><br>	log.Fatal(autotls.Run(r, <span class="hljs-string">&quot;example1.com&quot;</span>, <span class="hljs-string">&quot;example2.com&quot;</span>))<br>&#125;<br></code></pre></td></tr></table></figure>



<blockquote>
<p>è‡ªå®šä¹‰ autocert manager ç¤ºä¾‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;log&quot;</span><br><br>	<span class="hljs-string">&quot;github.com/gin-gonic/autotls&quot;</span><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>	<span class="hljs-string">&quot;golang.org/x/crypto/acme/autocert&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Gin è·¯ç”±å¼•æ“å®ä¾‹</span><br><br>	<span class="hljs-comment">// æ³¨å†Œ &quot;/ping&quot; è·¯ç”±çš„ GET æ–¹æ³•å¤„ç†å‡½æ•°</span><br>	r.GET(<span class="hljs-string">&quot;/ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		c.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;pong&quot;</span>)<br>	&#125;)<br><br>	<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Autocert ç®¡ç†å™¨ï¼Œç”¨äºé…ç½® Let&#x27;s Encrypt è‡ªåŠ¨è¯ä¹¦ç®¡ç†</span><br>	m := autocert.Manager&#123;<br>		Prompt:     autocert.AcceptTOS,                    <span class="hljs-comment">// æ¥å—æœåŠ¡æ¡æ¬¾</span><br>		HostPolicy: autocert.HostWhitelist(<span class="hljs-string">&quot;example1.com&quot;</span>, <span class="hljs-string">&quot;example2.com&quot;</span>), <span class="hljs-comment">// å…è®¸çš„åŸŸåç™½åå•</span><br>		Cache:      autocert.DirCache(<span class="hljs-string">&quot;/var/www/.cache&quot;</span>),   <span class="hljs-comment">// è¯ä¹¦ç¼“å­˜ç›®å½•</span><br>	&#125;<br><br>	<span class="hljs-comment">// ä½¿ç”¨ Autotls å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åŸŸå &quot;example1.com&quot; å’Œ &quot;example2.com&quot;ï¼Œå¹¶é…ç½®è‡ªåŠ¨è¯ä¹¦ç®¡ç†å™¨</span><br>	log.Fatal(autotls.RunWithManager(r, &amp;m))<br>&#125;<br></code></pre></td></tr></table></figure>


</blockquote>
<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-12"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-12" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>ä»¥ä¸Šä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ª â€œ&#x2F;pingâ€ è·¯ç”±çš„ GET æ–¹æ³•å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç† â€œ&#x2F;pingâ€ è·¯å¾„çš„è¯·æ±‚ï¼Œå¹¶è¿”å› â€œpongâ€ å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œé€šè¿‡è°ƒç”¨ <code>autotls.Run()</code> æ–¹æ³•ä½¿ç”¨ Autotls å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åŸŸå â€œexample1.comâ€ å’Œ â€œexample2.comâ€ï¼Œè¿™å°†è‡ªåŠ¨ä¸ºè¿™ä¸¤ä¸ªåŸŸåé…ç½® HTTPSï¼Œå¹¶ä½¿ç”¨ Letâ€™s Encrypt è¯ä¹¦è¿›è¡Œ TLS åŠ å¯†ã€‚å¦‚æœå¯åŠ¨æœåŠ¡å™¨å‡ºç°é”™è¯¯ï¼Œä¼šé€šè¿‡ <code>log.Fatal()</code> æ–¹æ³•è®°å½•å¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç»ˆæ­¢ç¨‹åºçš„è¿è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>ä»¥ä¸Šä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå¹¶æ³¨å†Œäº†ä¸€ä¸ª â€œ&#x2F;pingâ€ è·¯ç”±çš„ GET æ–¹æ³•å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç† â€œ&#x2F;pingâ€ è·¯å¾„çš„è¯·æ±‚ï¼Œå¹¶è¿”å› â€œpongâ€ å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ª Autocert ç®¡ç†å™¨æ¥é…ç½® Letâ€™s Encrypt è‡ªåŠ¨è¯ä¹¦ç®¡ç†ï¼ŒåŒ…æ‹¬æ¥å—æœåŠ¡æ¡æ¬¾ã€å…è®¸çš„åŸŸåç™½åå•å’Œè¯ä¹¦ç¼“å­˜ç›®å½•ç­‰å‚æ•°ã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>autotls.RunWithManager()</code> æ–¹æ³•ä½¿ç”¨ Autotls å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åŸŸå â€œexample1.comâ€ å’Œ â€œexample2.comâ€ï¼Œå¹¶é…ç½®è‡ªåŠ¨è¯ä¹¦ç®¡ç†å™¨ã€‚å¦‚æœå¯åŠ¨æœåŠ¡å™¨å‡ºç°é”™è¯¯ï¼Œä¼šé€šè¿‡ <code>log.Fatal()</code> æ–¹æ³•è®°å½•å¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç»ˆæ­¢ç¨‹åºçš„è¿è¡Œã€‚</p>
</blockquote>
<h2 id="33ã€å°†-request-body-ç»‘å®šåˆ°ä¸åŒçš„ç»“æ„ä½“ä¸­"><a href="#33ã€å°†-request-body-ç»‘å®šåˆ°ä¸åŒçš„ç»“æ„ä½“ä¸­" class="headerlink" title="33ã€å°† request body ç»‘å®šåˆ°ä¸åŒçš„ç»“æ„ä½“ä¸­"></a>33ã€å°† request body ç»‘å®šåˆ°ä¸åŒçš„ç»“æ„ä½“ä¸­</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -31"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -31" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><blockquote>
<p>ä¸€èˆ¬é€šè¿‡è°ƒç”¨ <code>c.Request.Body</code> æ–¹æ³•ç»‘å®šæ•°æ®ï¼Œä½†ä¸èƒ½å¤šæ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> formA <span class="hljs-keyword">struct</span> &#123;<br>	Foo <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;foo&quot; xml:&quot;foo&quot; binding:&quot;required&quot;`</span><br>&#125;<br><br><span class="hljs-keyword">type</span> formB <span class="hljs-keyword">struct</span> &#123;<br>	Bar <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;bar&quot; xml:&quot;bar&quot; binding:&quot;required&quot;`</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">SomeHandler</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>	objA := formA&#123;&#125;<br>	objB := formB&#123;&#125;<br>	<br>	<span class="hljs-comment">// å°è¯•ä½¿ç”¨ c.ShouldBind() æ–¹æ³•å°†è¯·æ±‚ä½“ç»‘å®šåˆ° formA ç»“æ„ä½“å¯¹è±¡</span><br>	<span class="hljs-keyword">if</span> errA := c.ShouldBind(&amp;objA); errA == <span class="hljs-literal">nil</span> &#123;<br>		c.String(http.StatusOK, <span class="hljs-string">`the body should be formA`</span>)<br>	<span class="hljs-comment">// å¦‚æœç»‘å®šå¤±è´¥ï¼Œåˆ™å°è¯•å°†è¯·æ±‚ä½“ç»‘å®šåˆ° formB ç»“æ„ä½“å¯¹è±¡</span><br>	&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> errB := c.ShouldBind(&amp;objB); errB == <span class="hljs-literal">nil</span> &#123;<br>		c.String(http.StatusOK, <span class="hljs-string">`the body should be formB`</span>)<br>	<span class="hljs-comment">// å¦‚æœä¸¤æ¬¡ç»‘å®šéƒ½å¤±è´¥ï¼Œåˆ™æ‰§è¡Œå…¶ä»–é€»è¾‘</span><br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		...<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-13"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-13" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>ä»¥ä¸Šä»£ç æ˜¯ä¸€ä¸ªä½¿ç”¨ Gin æ¡†æ¶çš„ HTTP è¯·æ±‚å¤„ç†å‡½æ•° SomeHandlerï¼Œå®ƒé€šè¿‡ä¸¤æ¬¡è°ƒç”¨ c.ShouldBind() æ–¹æ³•å°è¯•å°†è¯·æ±‚ä½“ç»‘å®šåˆ°ä¸¤ä¸ªä¸åŒçš„ç»“æ„ä½“å¯¹è±¡ formA å’Œ formBã€‚é¦–å…ˆå°è¯•å°†è¯·æ±‚ä½“ç»‘å®šåˆ° formA å¯¹è±¡ï¼Œå¦‚æœç»‘å®šæˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² â€œthe body should be formAâ€ã€‚å¦‚æœç»‘å®šå¤±è´¥ï¼Œåˆ™å°è¯•å°†è¯·æ±‚ä½“ç»‘å®šåˆ° formB å¯¹è±¡ï¼Œå¦‚æœç»‘å®šæˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² â€œthe body should be formBâ€ã€‚å¦‚æœä¸¤æ¬¡ç»‘å®šéƒ½å¤±è´¥ï¼Œåˆ™æ‰§è¡Œå…¶ä»–é€»è¾‘ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œc.ShouldBind() æ–¹æ³•ä½¿ç”¨äº† c.Request.Bodyï¼Œä¸€æ—¦è¯»å–ï¼Œè¯·æ±‚ä½“å°†å˜ä¸º EOFï¼Œæ— æ³•å†æ¬¡ä½¿ç”¨ï¼Œå› æ­¤åœ¨ä½¿ç”¨è¯¥æ–¹æ³•æ—¶éœ€è¦æ³¨æ„ä¸å¯é‡ç”¨çš„ç‰¹æ€§ã€‚</p>
</blockquote>
<h2 id="34ã€-å•æ–‡ä»¶ä¸Šä¼ "><a href="#34ã€-å•æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="34ã€ å•æ–‡ä»¶ä¸Šä¼ "></a>34ã€ å•æ–‡ä»¶ä¸Šä¼ </h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -32"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -32" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    router := gin.Default()<br><br>    <span class="hljs-comment">// ä¸º multipart forms è®¾ç½®è¾ƒä½çš„å†…å­˜é™åˆ¶ (é»˜è®¤æ˜¯ 32 MiB)</span><br>    <span class="hljs-comment">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB</span><br><br>    <span class="hljs-comment">// å®šä¹‰ä¸Šä¼ æ–‡ä»¶çš„æ¥å£è·¯ç”±ä¸º &quot;/upload&quot;ï¼Œä½¿ç”¨ POST æ–¹æ³•</span><br>    router.POST(<span class="hljs-string">&quot;/upload&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡</span><br>        file, _ := c.FormFile(<span class="hljs-string">&quot;file&quot;</span>) <span class="hljs-comment">// é€šè¿‡ c.FormFile() æ–¹æ³•è·å–ä¸Šä¼ çš„æ–‡ä»¶ï¼Œ&quot;file&quot; æ˜¯ä¸Šä¼ æ–‡ä»¶çš„å­—æ®µå</span><br>        log.Println(file.Filename) <span class="hljs-comment">// æ‰“å°ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å</span><br><br>        <span class="hljs-comment">// ä¸Šä¼ æ–‡ä»¶è‡³æŒ‡å®šç›®å½•</span><br>        <span class="hljs-comment">// c.SaveUploadedFile(file, dst) // ä½¿ç”¨ c.SaveUploadedFile() æ–¹æ³•å°†æ–‡ä»¶ä¿å­˜åˆ°æŒ‡å®šçš„ç›®å½•</span><br><br>        c.String(http.StatusOK, fmt.Sprintf(<span class="hljs-string">&quot;&#x27;%s&#x27; uploaded!&quot;</span>, file.Filename)) <span class="hljs-comment">// è¿”å›ä¸Šä¼ æˆåŠŸçš„ä¿¡æ¯</span><br>    &#125;)<br><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ Gin æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 8080 ç«¯å£</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-14"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-14" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>é¦–å…ˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“ <code>router := gin.Default()</code>ã€‚</li>
<li>è®¾ç½®äº†ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„æ¥å£è·¯ç”±ä¸º â€œ&#x2F;uploadâ€ï¼Œå¹¶ä½¿ç”¨ POST æ–¹æ³•å¤„ç†æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼š<code>router.POST(&quot;/upload&quot;, func(c *gin.Context) &#123;...&#125;)</code>ã€‚è¿™é‡Œä½¿ç”¨äº†åŒ¿åå‡½æ•°ä½œä¸ºè·¯ç”±å¤„ç†å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ª <code>c *gin.Context</code> å‚æ•°ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚</li>
<li>åœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>c.FormFile(&quot;file&quot;)</code> è·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡ã€‚<code>c.FormFile</code> æ–¹æ³•æ˜¯ Gin æ¡†æ¶æä¾›çš„ç”¨äºè·å–ä¸Šä¼ æ–‡ä»¶çš„æ–¹æ³•ï¼Œå…¶ä¸­ â€œfileâ€ æ˜¯ä¸Šä¼ æ–‡ä»¶çš„å­—æ®µåã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶å­—æ®µï¼Œä¼šè¿”å›é”™è¯¯ã€‚</li>
<li>ä½¿ç”¨ <code>log.Println(file.Filename)</code> æ‰“å°ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶åã€‚è¿™é‡Œåªæ˜¯ç®€å•åœ°å°†æ–‡ä»¶åæ‰“å°åˆ°æ§åˆ¶å°ï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ ¹æ®éœ€æ±‚è¿›è¡Œæ–‡ä»¶åçš„å¤„ç†ã€‚</li>
<li>å¯ä»¥é€šè¿‡ <code>c.SaveUploadedFile(file, dst)</code> å°†æ–‡ä»¶ä¿å­˜åˆ°æŒ‡å®šç›®å½•ã€‚å…¶ä¸­ <code>file</code> æ˜¯ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡ï¼Œ<code>dst</code> æ˜¯ç›®æ ‡ä¿å­˜è·¯å¾„ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®éœ€æ±‚è®¾ç½®åˆé€‚çš„ç›®æ ‡ä¿å­˜è·¯å¾„ï¼Œå¹¶å¤„ç†æ–‡ä»¶åé‡å¤ç­‰æƒ…å†µã€‚</li>
<li>ä½¿ç”¨ <code>c.String(http.StatusOK, fmt.Sprintf(&quot;&#39;%s&#39; uploaded!&quot;, file.Filename))</code> è¿”å›ä¸Šä¼ æˆåŠŸçš„ä¿¡æ¯ã€‚è¿™é‡Œä½¿ç”¨äº† Gin æ¡†æ¶æä¾›çš„ <code>c.String</code> æ–¹æ³•ï¼Œè®¾ç½® HTTP å“åº”çŠ¶æ€ç ä¸º 200ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå“åº”ä½“ï¼Œå…¶ä¸­åŒ…å«ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶åã€‚</li>
<li>æœ€åï¼Œé€šè¿‡ <code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨ Gin æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œç­‰å¾…æ¥æ”¶æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h2 id="35ã€-å¤šæ–‡ä»¶ä¸Šä¼ "><a href="#35ã€-å¤šæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="35ã€ å¤šæ–‡ä»¶ä¸Šä¼ "></a>35ã€ å¤šæ–‡ä»¶ä¸Šä¼ </h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -33"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -33" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“</span><br>    router := gin.Default()<br><br>    <span class="hljs-comment">// ä¸º multipart forms è®¾ç½®è¾ƒä½çš„å†…å­˜é™åˆ¶ (é»˜è®¤æ˜¯ 32 MiB)</span><br>    <span class="hljs-comment">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB</span><br><br>    <span class="hljs-comment">// è®¾ç½®æ–‡ä»¶ä¸Šä¼ çš„æ¥å£è·¯ç”±ä¸º &quot;/upload&quot;ï¼Œä½¿ç”¨ POST æ–¹æ³•å¤„ç†æ–‡ä»¶ä¸Šä¼ è¯·æ±‚</span><br>    router.POST(<span class="hljs-string">&quot;/upload&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// è·å–ä¸Šä¼ çš„ multipart form æ•°æ®</span><br>        form, _ := c.MultipartForm()<br><br>        <span class="hljs-comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡åˆ—è¡¨</span><br>        files := form.File[<span class="hljs-string">&quot;upload[]&quot;</span>]<br><br>        <span class="hljs-comment">// éå†æ–‡ä»¶å¯¹è±¡åˆ—è¡¨</span><br>        <span class="hljs-keyword">for</span> _, file := <span class="hljs-keyword">range</span> files &#123;<br>            log.Println(file.Filename)<br>            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ ¹æ®éœ€æ±‚å¤„ç†æ–‡ä»¶ï¼Œæ¯”å¦‚ä¿å­˜æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ã€å¤„ç†æ–‡ä»¶åé‡å¤ç­‰æƒ…å†µ</span><br>            <span class="hljs-comment">// c.SaveUploadedFile(file, dst)</span><br>        &#125;<br><br>        <span class="hljs-comment">// è¿”å›ä¸Šä¼ æˆåŠŸçš„ä¿¡æ¯ï¼ŒåŒ…å«ä¸Šä¼ çš„æ–‡ä»¶æ•°é‡</span><br>        c.String(http.StatusOK, fmt.Sprintf(<span class="hljs-string">&quot;%d files uploaded!&quot;</span>, <span class="hljs-built_in">len</span>(files)))<br>    &#125;)<br><br>    <span class="hljs-comment">// å¯åŠ¨ Gin æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œç­‰å¾…æ¥æ”¶æ–‡ä»¶ä¸Šä¼ è¯·æ±‚</span><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br><br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-15"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-15" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>åˆ›å»º Gin è·¯ç”±å¼•æ“ï¼šé€šè¿‡ <code>gin.Default()</code> åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ã€‚</li>
<li>è®¾ç½®æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼šä½¿ç”¨ <code>router.POST(&quot;/upload&quot;, ...)</code> å°†æ–‡ä»¶ä¸Šä¼ æ¥å£è®¾ç½®ä¸º â€œ&#x2F;uploadâ€ï¼Œå¹¶æŒ‡å®š HTTP æ–¹æ³•ä¸º POSTã€‚è¿™æ„å‘³ç€è¯¥æ¥å£å°†å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ POST è¯·æ±‚ã€‚</li>
<li>è·å–ä¸Šä¼ çš„ multipart form æ•°æ®ï¼šåœ¨æ¥å£çš„å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>c.MultipartForm()</code> æ–¹æ³•è·å–ä¸Šä¼ çš„ multipart form æ•°æ®ï¼Œå…¶ä¸­ <code>c</code> æ˜¯ <code>*gin.Context</code> ç±»å‹çš„è¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</li>
<li>è·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡åˆ—è¡¨ï¼šä» <code>multipart.Form</code> ç»“æ„ä½“ä¸­çš„ <code>File</code> å­—æ®µè·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡åˆ—è¡¨ã€‚è¿™é‡Œä½¿ç”¨äº† â€œupload[]â€ ä½œä¸ºæ–‡ä»¶å­—æ®µçš„åç§°ï¼Œè¡¨ç¤ºå¯ä»¥ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œä¸”å­—æ®µåä¸º â€œupload[]â€ã€‚</li>
<li>å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼šé€šè¿‡éå†æ–‡ä»¶å¯¹è±¡åˆ—è¡¨ï¼Œå¯ä»¥å¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚è·å–æ–‡ä»¶åã€ä¿å­˜æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ã€å¤„ç†æ–‡ä»¶åé‡å¤ç­‰ã€‚è¿™é‡Œçš„å¤„ç†é€»è¾‘é€šè¿‡æ³¨é‡Šè¿›è¡Œäº†ç®€å•è¯´æ˜ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®éœ€æ±‚è¿›è¡Œå…·ä½“å¤„ç†ã€‚</li>
<li>è¿”å›ä¸Šä¼ æˆåŠŸçš„ä¿¡æ¯ï¼šé€šè¿‡ <code>c.String()</code> æ–¹æ³•è¿”å›ä¸Šä¼ æˆåŠŸçš„ä¿¡æ¯ï¼ŒåŒ…å«ä¸Šä¼ çš„æ–‡ä»¶æ•°é‡ã€‚</li>
<li>å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼šä½¿ç”¨ <code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 8080 ç«¯å£ï¼Œç­‰å¾…æ¥æ”¶æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ã€‚</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ®µä»£ç è¿˜æœ‰ä¸€éƒ¨åˆ†æ³¨é‡Šæ‰çš„ä»£ç ï¼ŒåŒ…æ‹¬äº†è®¾ç½® <code>router.MaxMultipartMemory</code> é™åˆ¶å†…å­˜å¤§å°çš„åŠŸèƒ½ã€‚å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚å–æ¶ˆæ³¨é‡Šå¹¶è®¾ç½®åˆé€‚çš„å†…å­˜é™åˆ¶ã€‚åŒæ—¶ï¼Œè¿™æ®µä»£ç è¿˜æ²¡æœ‰å¤„ç†æ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯æƒ…å†µï¼Œå¦‚æ–‡ä»¶å¤§å°é™åˆ¶ã€æ–‡ä»¶ç±»å‹é™åˆ¶ç­‰ï¼Œéœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œå®Œå–„ã€‚</p>
</blockquote>
<h2 id="36ã€-ä½¿ç”¨-BasicAuth-ä¸­é—´ä»¶"><a href="#36ã€-ä½¿ç”¨-BasicAuth-ä¸­é—´ä»¶" class="headerlink" title="36ã€  ä½¿ç”¨ BasicAuth ä¸­é—´ä»¶"></a>36ã€  ä½¿ç”¨ BasicAuth ä¸­é—´ä»¶</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -34"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -34" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›ç§äººæ•°æ®</span><br><span class="hljs-keyword">var</span> secrets = gin.H&#123;<br>    <span class="hljs-string">&quot;foo&quot;</span>:    gin.H&#123;<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;foo@bar.com&quot;</span>, <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;123433&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;austin&quot;</span>: gin.H&#123;<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;austin@example.com&quot;</span>, <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;666&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;lena&quot;</span>:   gin.H&#123;<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;lena@guapa.com&quot;</span>, <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;523443&quot;</span>&#125;,<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.Default()<br><br>    <span class="hljs-comment">// è·¯ç”±ç»„ä½¿ç”¨ gin.BasicAuth() ä¸­é—´ä»¶</span><br>    <span class="hljs-comment">// gin.Accounts æ˜¯ map[string]string çš„ä¸€ç§å¿«æ·æ–¹å¼</span><br>    authorized := r.Group(<span class="hljs-string">&quot;/admin&quot;</span>, gin.BasicAuth(gin.Accounts&#123;<br>        <span class="hljs-string">&quot;foo&quot;</span>:    <span class="hljs-string">&quot;bar&quot;</span>,<br>        <span class="hljs-string">&quot;austin&quot;</span>: <span class="hljs-string">&quot;1234&quot;</span>,<br>        <span class="hljs-string">&quot;lena&quot;</span>:   <span class="hljs-string">&quot;hello2&quot;</span>,<br>        <span class="hljs-string">&quot;manu&quot;</span>:   <span class="hljs-string">&quot;4321&quot;</span>,<br>    &#125;))<br><br>    <span class="hljs-comment">// /admin/secrets ç«¯ç‚¹</span><br>    <span class="hljs-comment">// è§¦å‘ &quot;localhost:8080/admin/secrets</span><br>    authorized.GET(<span class="hljs-string">&quot;/secrets&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// è·å–ç”¨æˆ·ï¼Œå®ƒæ˜¯ç”± BasicAuth ä¸­é—´ä»¶è®¾ç½®çš„</span><br>        <span class="hljs-comment">// ä½¿ç”¨ c.MustGet() æ–¹æ³•è·å–ç»è¿‡ BasicAuth ä¸­é—´ä»¶å¤„ç†åçš„ç”¨æˆ·ä¿¡æ¯</span><br>        user := c.MustGet(gin.AuthUserKey).(<span class="hljs-type">string</span>)<br>        <span class="hljs-keyword">if</span> secret, ok := secrets[user]; ok &#123;<br>            <span class="hljs-comment">// æ ¹æ®ç”¨æˆ·ä¿¡æ¯è·å–å¯¹åº”çš„ç§äººæ•°æ®</span><br>            c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;user&quot;</span>: user, <span class="hljs-string">&quot;secret&quot;</span>: secret&#125;)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// å¦‚æœç”¨æˆ·ä¿¡æ¯ä¸å­˜åœ¨äºç§äººæ•°æ®ä¸­ï¼Œè¿”å›é»˜è®¤çš„ä¿¡æ¯</span><br>            c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;user&quot;</span>: user, <span class="hljs-string">&quot;secret&quot;</span>: <span class="hljs-string">&quot;NO SECRET :(&quot;</span>&#125;)<br>        &#125;<br>    &#125;)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-16"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-16" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>å®šä¹‰äº†ä¸€ä¸ª <code>secrets</code> å˜é‡ï¼Œæ¨¡æ‹Ÿäº†ä¸€äº›ç§äººæ•°æ®ï¼Œä½¿ç”¨äº† <code>gin.H</code> æ¥è¡¨ç¤º key-value ç»“æ„çš„ mapã€‚</li>
<li>åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å¼•æ“ <code>r</code>ã€‚</li>
<li>ä½¿ç”¨ <code>r.Group()</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªè·¯ç”±ç»„ <code>/admin</code>ï¼Œå¹¶åœ¨è¯¥è·¯ç”±ç»„ä¸Šåº”ç”¨äº† <code>gin.BasicAuth()</code> ä¸­é—´ä»¶ã€‚<code>gin.BasicAuth()</code> ä¸­é—´ä»¶ç”¨äºè¿›è¡Œ HTTP åŸºæœ¬èº«ä»½éªŒè¯ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ª <code>gin.Accounts</code> ç±»å‹çš„å‚æ•°ï¼Œå…¶ä¸­åŒ…å«äº†å…è®¸è®¿é—®çš„ç”¨æˆ·åå’Œå¯†ç çš„é”®å€¼å¯¹ã€‚</li>
<li>åœ¨è·¯ç”±ç»„ä¸­å®šä¹‰äº†ä¸€ä¸ª GET è¯·æ±‚çš„å¤„ç†å‡½æ•°ï¼Œå¤„ç† <code>/admin/secrets</code> è·¯å¾„çš„è¯·æ±‚ã€‚åœ¨è¯¥å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>c.MustGet()</code> æ–¹æ³•è·å–ç»è¿‡ <code>gin.BasicAuth()</code> ä¸­é—´ä»¶å¤„ç†åçš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…¶ä¸­ <code>gin.AuthUserKey</code> æ˜¯ Gin æ¡†æ¶ä¸­ç”¨äºå­˜å‚¨ç»è¿‡è®¤è¯çš„ç”¨æˆ·ä¿¡æ¯çš„ä¸Šä¸‹æ–‡é”®åã€‚</li>
<li>æ ¹æ®ç”¨æˆ·ä¿¡æ¯ä» <code>secrets</code> å˜é‡ä¸­è·å–å¯¹åº”çš„ç§äººæ•°æ®ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œç§äººæ•°æ®ï¼Œå¦åˆ™è¿”å›é»˜è®¤çš„ä¿¡æ¯ã€‚</li>
<li>ä½¿ç”¨ <code>r.Run()</code> æ–¹æ³•å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 0.0.0.0:8080 åœ°å€ä¸Šã€‚</li>
</ol>
</blockquote>
<h2 id="37ã€-ä½¿ç”¨-HTTP-æ–¹æ³•"><a href="#37ã€-ä½¿ç”¨-HTTP-æ–¹æ³•" class="headerlink" title="37ã€   ä½¿ç”¨ HTTP æ–¹æ³•"></a>37ã€   ä½¿ç”¨ HTTP æ–¹æ³•</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -35"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -35" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// ç¦ç”¨æ§åˆ¶å°é¢œè‰²</span><br>    <span class="hljs-comment">// gin.DisableConsoleColor()</span><br><br>    <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤ä¸­é—´ä»¶ï¼ˆlogger å’Œ recovery ä¸­é—´ä»¶ï¼‰åˆ›å»º gin è·¯ç”±</span><br>    router := gin.Default()<br><br>    <span class="hljs-comment">// æ³¨å†Œä¸åŒçš„ HTTP æ–¹æ³•å¯¹åº”çš„å¤„ç†å‡½æ•°</span><br>    router.GET(<span class="hljs-string">&quot;/someGet&quot;</span>, getting)       <span class="hljs-comment">// å¤„ç† HTTP GET è¯·æ±‚</span><br>    router.POST(<span class="hljs-string">&quot;/somePost&quot;</span>, posting)     <span class="hljs-comment">// å¤„ç† HTTP POST è¯·æ±‚</span><br>    router.PUT(<span class="hljs-string">&quot;/somePut&quot;</span>, putting)       <span class="hljs-comment">// å¤„ç† HTTP PUT è¯·æ±‚</span><br>    router.DELETE(<span class="hljs-string">&quot;/someDelete&quot;</span>, deleting) <span class="hljs-comment">// å¤„ç† HTTP DELETE è¯·æ±‚</span><br>    router.PATCH(<span class="hljs-string">&quot;/somePatch&quot;</span>, patching)   <span class="hljs-comment">// å¤„ç† HTTP PATCH è¯·æ±‚</span><br>    router.HEAD(<span class="hljs-string">&quot;/someHead&quot;</span>, head)         <span class="hljs-comment">// å¤„ç† HTTP HEAD è¯·æ±‚</span><br>    router.OPTIONS(<span class="hljs-string">&quot;/someOptions&quot;</span>, options) <span class="hljs-comment">// å¤„ç† HTTP OPTIONS è¯·æ±‚</span><br><br>    <span class="hljs-comment">// é»˜è®¤åœ¨ 8080 ç«¯å£å¯åŠ¨æœåŠ¡ï¼Œé™¤éå®šä¹‰äº†ä¸€ä¸ª PORT çš„ç¯å¢ƒå˜é‡ã€‚</span><br>    router.Run()<br>    <span class="hljs-comment">// router.Run(&quot;:3000&quot;) å¯ä»¥ç¡¬ç¼–ç æŒ‡å®šç«¯å£å·</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-17"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-17" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>ä»¥ä¸Šä»£ç ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶æ³¨å†Œäº†ä¸åŒçš„ HTTP æ–¹æ³•å¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚æ¯ä¸ªå¤„ç†å‡½æ•°åœ¨æ¥æ”¶åˆ°å¯¹åº”çš„ HTTP è¯·æ±‚æ—¶ä¼šè¢«è°ƒç”¨ï¼Œä»è€Œè¿›è¡Œç›¸åº”çš„å¤„ç†é€»è¾‘ã€‚<code>router.Run()</code> å‡½æ•°ä¼šåœ¨é»˜è®¤ç«¯å£ 8080 ä¸Šå¯åŠ¨ HTTP æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ <code>PORT</code> æ¥ä¿®æ”¹ç«¯å£å·ã€‚å¦‚æœéœ€è¦å›ºå®šç«¯å£å·ï¼Œå¯ä»¥é€šè¿‡ <code>router.Run(&quot;:3000&quot;)</code> æ¥æŒ‡å®šç‰¹å®šçš„ç«¯å£å·</li>
</ol>
</blockquote>
<h2 id="38ã€ä½¿ç”¨ä¸­é—´ä»¶"><a href="#38ã€ä½¿ç”¨ä¸­é—´ä»¶" class="headerlink" title="38ã€ä½¿ç”¨ä¸­é—´ä»¶"></a>38ã€ä½¿ç”¨ä¸­é—´ä»¶</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -36"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -36" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// æ–°å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±</span><br>    r := gin.New()<br><br>    <span class="hljs-comment">// å…¨å±€ä¸­é—´ä»¶</span><br>    <span class="hljs-comment">// Logger ä¸­é—´ä»¶å°†æ—¥å¿—å†™å…¥ gin.DefaultWriterï¼Œå³ä½¿ä½ å°† GIN_MODE è®¾ç½®ä¸º releaseã€‚</span><br>    <span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹ gin.DefaultWriter = os.Stdout</span><br>    r.Use(gin.Logger())<br><br>    <span class="hljs-comment">// Recovery ä¸­é—´ä»¶ä¼š recover ä»»ä½• panicã€‚å¦‚æœæœ‰ panic çš„è¯ï¼Œä¼šå†™å…¥ 500ã€‚</span><br>    r.Use(gin.Recovery())<br><br>    <span class="hljs-comment">// ä½ å¯ä»¥ä¸ºæ¯ä¸ªè·¯ç”±æ·»åŠ ä»»æ„æ•°é‡çš„ä¸­é—´ä»¶ã€‚</span><br>    r.GET(<span class="hljs-string">&quot;/benchmark&quot;</span>, MyBenchLogger(), benchEndpoint)<br><br>    <span class="hljs-comment">// è®¤è¯è·¯ç”±ç»„</span><br>    <span class="hljs-comment">// authorized := r.Group(&quot;/&quot;, AuthRequired())</span><br>    <span class="hljs-comment">// å’Œä½¿ç”¨ä»¥ä¸‹ä¸¤è¡Œä»£ç çš„æ•ˆæœå®Œå…¨ä¸€æ ·:</span><br>    authorized := r.Group(<span class="hljs-string">&quot;/&quot;</span>)<br>    <span class="hljs-comment">// è·¯ç”±ç»„ä¸­é—´ä»¶! åœ¨æ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ &quot;authorized&quot; è·¯ç”±ç»„ä¸­ä½¿ç”¨è‡ªå®šä¹‰åˆ›å»ºçš„ </span><br>    <span class="hljs-comment">// AuthRequired() ä¸­é—´ä»¶</span><br>    authorized.Use(AuthRequired())<br>    &#123;<br>        authorized.POST(<span class="hljs-string">&quot;/login&quot;</span>, loginEndpoint)<br>        authorized.POST(<span class="hljs-string">&quot;/submit&quot;</span>, submitEndpoint)<br>        authorized.POST(<span class="hljs-string">&quot;/read&quot;</span>, readEndpoint)<br><br>        <span class="hljs-comment">// åµŒå¥—è·¯ç”±ç»„</span><br>        testing := authorized.Group(<span class="hljs-string">&quot;testing&quot;</span>)<br>        testing.GET(<span class="hljs-string">&quot;/analytics&quot;</span>, analyticsEndpoint)<br>    &#125;<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-18"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-18" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>åˆ›å»º Gin è·¯ç”±ï¼šä»£ç é€šè¿‡ <code>gin.New()</code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å®ä¾‹ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡ <code>r</code>ã€‚è¿™ä¸ªè·¯ç”±å®ä¾‹æ²¡æœ‰ä»»ä½•é»˜è®¤çš„ä¸­é—´ä»¶ã€‚</li>
<li>å…¨å±€ä¸­é—´ä»¶ï¼šä»£ç é€šè¿‡ <code>r.Use()</code> å‡½æ•°æ³¨å†Œäº†ä¸¤ä¸ªå…¨å±€ä¸­é—´ä»¶ï¼Œåˆ†åˆ«æ˜¯ <code>gin.Logger()</code> å’Œ <code>gin.Recovery()</code>ã€‚<code>gin.Logger()</code> ç”¨äºè®°å½•æ—¥å¿—ï¼Œ<code>gin.Recovery()</code> ç”¨äºæ¢å¤ä»å¤„ç†å‡½æ•°ä¸­çš„ panicã€‚</li>
<li>è·¯ç”±å’Œå¤„ç†å‡½æ•°ï¼šä»£ç é€šè¿‡ <code>r.GET()</code>ã€<code>r.POST()</code> ç­‰æ–¹æ³•æ³¨å†Œäº†å¤šä¸ªè·¯ç”±ï¼Œå¹¶æŒ‡å®šäº†ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>r.GET(&quot;/benchmark&quot;, MyBenchLogger(), benchEndpoint)</code> æ³¨å†Œäº†ä¸€ä¸ª GET è¯·æ±‚çš„è·¯ç”± â€œ&#x2F;benchmarkâ€ï¼Œå¹¶ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ä¸­é—´ä»¶ <code>MyBenchLogger()</code> å’Œå¤„ç†å‡½æ•° <code>benchEndpoint()</code>ã€‚</li>
<li>è·¯ç”±ç»„å’ŒåµŒå¥—è·¯ç”±ç»„ï¼šä»£ç é€šè¿‡ <code>r.Group()</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªåä¸º â€œauthorizedâ€ çš„è·¯ç”±ç»„ï¼Œå¹¶åœ¨å…¶ä¸­æ³¨å†Œäº†å¤šä¸ªè·¯ç”±å’Œå¤„ç†å‡½æ•°ã€‚è¿™äº›è·¯ç”±å’Œå¤„ç†å‡½æ•°éƒ½ä½äº â€œauthorizedâ€ è·¯ç”±ç»„ä¸‹ï¼Œå¹¶ä¸”å…±äº«è·¯ç”±ç»„ä¸­æ³¨å†Œçš„ä¸­é—´ä»¶ <code>AuthRequired()</code>ï¼Œç”¨äºè®¤è¯æˆæƒã€‚å¦å¤–ï¼Œä»£ç è¿˜æ¼”ç¤ºäº†å¦‚ä½•åœ¨è·¯ç”±ç»„å†…åˆ›å»ºåµŒå¥—çš„è·¯ç”±ç»„ï¼Œä¾‹å¦‚ <code>testing := authorized.Group(&quot;testing&quot;)</code>ã€‚</li>
<li>å¯åŠ¨ HTTP æœåŠ¡ï¼šä»£ç é€šè¿‡ <code>r.Run(&quot;:8080&quot;)</code> å¯åŠ¨äº†ä¸€ä¸ª HTTP æœåŠ¡ï¼Œå¹¶ç›‘å¬åœ¨ 0.0.0.0:8080 ä¸Šã€‚è¿™å°†ä½¿æœåŠ¡åœ¨è¿™ä¸ªåœ°å€ä¸Šæ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ol>
</blockquote>
<h2 id="39ã€-æ˜ å°„æŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•å‚æ•°"><a href="#39ã€-æ˜ å°„æŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•å‚æ•°" class="headerlink" title="39ã€ æ˜ å°„æŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•å‚æ•°"></a>39ã€ æ˜ å°„æŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è¡¨å•å‚æ•°</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -37"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -37" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-19"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-19" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
</blockquote>
<h2 id="40ã€æ¨¡å‹ç»‘å®šå’ŒéªŒè¯"><a href="#40ã€æ¨¡å‹ç»‘å®šå’ŒéªŒè¯" class="headerlink" title="40ã€æ¨¡å‹ç»‘å®šå’ŒéªŒè¯"></a>40ã€æ¨¡å‹ç»‘å®šå’ŒéªŒè¯</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -38"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -38" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Login æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨äºç»‘å®šç™»å½•è¯·æ±‚çš„ JSONã€XMLã€HTML è¡¨å•æ•°æ®</span><br><span class="hljs-keyword">type</span> Login <span class="hljs-keyword">struct</span> &#123;<br>    User     <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;user&quot; json:&quot;user&quot; xml:&quot;user&quot;  binding:&quot;required&quot;`</span> <span class="hljs-comment">// User å­—æ®µï¼Œå¯¹åº”è¯·æ±‚ä¸­çš„ &quot;user&quot; å‚æ•°ï¼Œä½¿ç”¨ formã€jsonã€xml æ ¼å¼è¿›è¡Œç»‘å®šï¼Œå¹¶è®¾ç½®ä¸ºå¿…éœ€å­—æ®µ</span><br>    Password <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;password&quot; json:&quot;password&quot; xml:&quot;password&quot; binding:&quot;required&quot;`</span> <span class="hljs-comment">// Password å­—æ®µï¼Œå¯¹åº”è¯·æ±‚ä¸­çš„ &quot;password&quot; å‚æ•°ï¼Œä½¿ç”¨ formã€jsonã€xml æ ¼å¼è¿›è¡Œç»‘å®šï¼Œå¹¶è®¾ç½®ä¸ºå¿…éœ€å­—æ®µ</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    router := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å®ä¾‹</span><br><br>    <span class="hljs-comment">// ç»‘å®š JSON è¯·æ±‚ (&quot;/loginJSON&quot;)</span><br>    router.POST(<span class="hljs-string">&quot;/loginJSON&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-keyword">var</span> json Login<br>        <span class="hljs-keyword">if</span> err := c.ShouldBindJSON(&amp;json); err != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// ä½¿ç”¨ ShouldBindJSON æ–¹æ³•å°†è¯·æ±‚ä¸­çš„ JSON æ•°æ®ç»‘å®šåˆ° Login ç»“æ„ä½“ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å‡ºç°é”™è¯¯</span><br>            c.JSON(http.StatusBadRequest, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err.Error()&#125;) <span class="hljs-comment">// è‹¥ç»‘å®šå¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯</span><br>            <span class="hljs-keyword">return</span><br>        &#125;<br><br>        <span class="hljs-keyword">if</span> json.User != <span class="hljs-string">&quot;manu&quot;</span> || json.Password != <span class="hljs-string">&quot;123&quot;</span> &#123; <span class="hljs-comment">// æ£€æŸ¥ç™»å½•ä¿¡æ¯æ˜¯å¦åŒ¹é…</span><br>            c.JSON(http.StatusUnauthorized, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;unauthorized&quot;</span>&#125;) <span class="hljs-comment">// è‹¥ç™»å½•ä¿¡æ¯ä¸åŒ¹é…ï¼Œè¿”å›æœªæˆæƒçŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯</span><br>            <span class="hljs-keyword">return</span><br>        &#125;<br><br>        c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;you are logged in&quot;</span>&#125;) <span class="hljs-comment">// ç™»å½•æˆåŠŸï¼Œè¿”å›çŠ¶æ€ç å’Œç™»å½•æˆåŠŸä¿¡æ¯åˆ°å®¢æˆ·ç«¯</span><br>    &#125;)<br><br>    <span class="hljs-comment">// ç»‘å®š XML è¯·æ±‚ (&quot;/loginXML&quot;)</span><br>    router.POST(<span class="hljs-string">&quot;/loginXML&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-keyword">var</span> xml Login<br>        <span class="hljs-keyword">if</span> err := c.ShouldBindXML(&amp;xml); err != <span class="hljs-literal">nil</span> &#123; <span class="hljs-comment">// ä½¿ç”¨ ShouldBindXML æ–¹æ³•å°†è¯·æ±‚ä¸­çš„ XML æ•°æ®ç»‘å®šåˆ° Login ç»“æ„ä½“ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å‡ºç°é”™è¯¯</span><br>            c.JSON(http.StatusBadRequest, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err.Error()&#125;) <span class="hljs-comment">// è‹¥ç»‘å®šå¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯</span><br>            <span class="hljs-keyword">return</span><br>        &#125;<br><br>        <span class="hljs-keyword">if</span> xml.User != <span class="hljs-string">&quot;manu&quot;</span> || xml.Password != <span class="hljs-string">&quot;123&quot;</span> &#123; <span class="hljs-comment">// æ£€æŸ¥ç™»å½•ä¿¡æ¯æ˜¯å¦åŒ¹é…</span><br>            c.JSON(http.StatusUnauthorized, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;unauthorized&quot;</span>&#125;) <span class="hljs-comment">// è‹¥ç™»å½•ä¿¡æ¯ä¸åŒ¹é…ï¼Œè¿”å›æœªæˆæƒçŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯åˆ°å®¢æˆ·ç«¯</span><br>            <span class="hljs-keyword">return</span><br>        &#125;<br><br>        c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;you are logged in&quot;</span>&#125;) <span class="hljs-comment">// ç™»å½•æˆåŠŸï¼Œè¿”å›çŠ¶æ€ç å’Œç™»å½•æˆåŠŸä¿¡æ¯åˆ°å®¢æˆ·ç«¯</span><br>    &#125;)<br>	<span class="hljs-comment">// ç»‘å®š HTML è¡¨å• (user=manu&amp;password=123)</span><br>    router.POST(<span class="hljs-string">&quot;/loginForm&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-keyword">var</span> form Login<br>        <span class="hljs-comment">// æ ¹æ® Content-Type Header æ¨æ–­ä½¿ç”¨å“ªä¸ªç»‘å®šå™¨ã€‚</span><br>        <span class="hljs-keyword">if</span> err := c.ShouldBind(&amp;form); err != <span class="hljs-literal">nil</span> &#123;<br>            c.JSON(http.StatusBadRequest, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err.Error()&#125;)<br>            <span class="hljs-keyword">return</span><br>        &#125;<br><br>        <span class="hljs-keyword">if</span> form.User != <span class="hljs-string">&quot;manu&quot;</span> || form.Password != <span class="hljs-string">&quot;123&quot;</span> &#123;<br>            c.JSON(http.StatusUnauthorized, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;unauthorized&quot;</span>&#125;)<br>            <span class="hljs-keyword">return</span><br>        &#125; <br><br>        c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;you are logged in&quot;</span>&#125;)<br>    &#125;)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-20"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-20" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Login</code> çš„ç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«äº† <code>User</code> å’Œ <code>Password</code> ä¸¤ä¸ªå­—æ®µï¼Œç”¨äºæ¥æ”¶ç™»å½•è¯·æ±‚ä¸­çš„ç”¨æˆ·å’Œå¯†ç ä¿¡æ¯ã€‚ç»“æ„ä½“ä¸­ä½¿ç”¨äº†æ ‡ç­¾ï¼ˆtagï¼‰æ¥æŒ‡å®šäº†å­—æ®µåœ¨ä¸åŒè¯·æ±‚ä¸­çš„ç»‘å®šæ–¹å¼ï¼Œå¦‚ <code>form:&quot;user&quot;</code> è¡¨ç¤ºåœ¨ HTML è¡¨å•ä¸­ä½¿ç”¨ <code>user</code> å­—æ®µåè¿›è¡Œç»‘å®šï¼Œ<code>json:&quot;user&quot;</code> è¡¨ç¤ºåœ¨ JSON ä¸­ä½¿ç”¨ <code>user</code> å­—æ®µåè¿›è¡Œç»‘å®šï¼Œ<code>xml:&quot;user&quot;</code> è¡¨ç¤ºåœ¨ XML ä¸­ä½¿ç”¨ <code>user</code> å­—æ®µåè¿›è¡Œç»‘å®šã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å®ä¾‹ï¼Œå¹¶æ³¨å†Œäº†ä¸‰ä¸ªè·¯ç”±å¤„ç†å‡½æ•°åˆ†åˆ«å¤„ç† <code>/loginJSON</code>ã€<code>/loginXML</code>ã€<code>/loginForm</code> è¿™ä¸‰ä¸ªä¸åŒçš„è·¯ç”±ã€‚</li>
<li><code>/loginJSON</code> è·¯ç”±å¤„ç†å‡½æ•°é€šè¿‡ <code>c.ShouldBindJSON(&amp;json)</code> æ–¹æ³•å°†è¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®ç»‘å®šåˆ° <code>json</code> ç»“æ„ä½“å˜é‡ä¸­ï¼Œå¦‚æœç»‘å®šå¤±è´¥ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯ï¼›å¦‚æœç»‘å®šæˆåŠŸï¼Œåˆ™åˆ¤æ–­ <code>json.User</code> å’Œ <code>json.Password</code> æ˜¯å¦ç¬¦åˆé¢„æœŸçš„å€¼ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œåˆ™è¿”å›æœªæˆæƒçš„çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™è¿”å›ç™»å½•æˆåŠŸçš„çŠ¶æ€ç å’Œä¿¡æ¯ã€‚</li>
<li><code>/loginXML</code> è·¯ç”±å¤„ç†å‡½æ•°é€šè¿‡ <code>c.ShouldBindXML(&amp;xml)</code> æ–¹æ³•å°†è¯·æ±‚ä½“ä¸­çš„ XML æ•°æ®ç»‘å®šåˆ° <code>xml</code> ç»“æ„ä½“å˜é‡ä¸­ï¼Œå¦‚æœç»‘å®šå¤±è´¥ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯ï¼›å¦‚æœç»‘å®šæˆåŠŸï¼Œåˆ™åˆ¤æ–­ <code>xml.User</code> å’Œ <code>xml.Password</code> æ˜¯å¦ç¬¦åˆé¢„æœŸçš„å€¼ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œåˆ™è¿”å›æœªæˆæƒçš„çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™è¿”å›ç™»å½•æˆåŠŸçš„çŠ¶æ€ç å’Œä¿¡æ¯ã€‚</li>
<li><code>/loginForm</code> è·¯ç”±å¤„ç†å‡½æ•°é€šè¿‡ <code>c.ShouldBind(&amp;form)</code> æ–¹æ³•æ ¹æ®è¯·æ±‚å¤´ä¸­çš„ <code>Content-Type</code> åˆ¤æ–­è¯·æ±‚ä½“ä¸­çš„æ•°æ®ç±»å‹ï¼Œå¹¶å°†æ•°æ®ç»‘å®šåˆ° <code>form</code> ç»“æ„ä½“å˜é‡ä¸­ï¼Œå¦‚æœç»‘å®šå¤±è´¥ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯ï¼›å¦‚æœç»‘å®šæˆåŠŸï¼Œåˆ™åˆ¤æ–­ <code>form.User</code> å’Œ <code>form.Password</code> æ˜¯å¦ç¬¦åˆé¢„æœŸçš„å€¼ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œåˆ™è¿”å›æœªæˆæƒçš„çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™è¿”å›ç™»å½•æˆåŠŸçš„çŠ¶æ€ç å’Œä¿¡æ¯ã€‚</li>
<li>æœ€åé€šè¿‡ <code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨äº†æœåŠ¡ï¼Œç›‘å¬åœ¨ <code>0.0.0.0:8080</code> åœ°å€ä¸Šã€‚</li>
</ol>
</blockquote>
<h2 id="41ã€-è·¯ç”±å‚æ•°"><a href="#41ã€-è·¯ç”±å‚æ•°" class="headerlink" title="41ã€ è·¯ç”±å‚æ•°"></a>41ã€ è·¯ç”±å‚æ•°</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -39"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -39" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ gin è·¯ç”±å¼•æ“</span><br>    router := gin.Default()<br><br>    <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªå¤„ç†å™¨å‡½æ•°ï¼Œå¤„ç†åŒ¹é…åˆ°çš„è·¯ç”± /user/:name</span><br>    <span class="hljs-comment">// :name è¡¨ç¤ºè¯¥è·¯ç”±æ®µä¸ºå‚æ•°ï¼Œå¯ä»¥åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¤„ç†å™¨å‡½æ•°</span><br>    router.GET(<span class="hljs-string">&quot;/user/:name&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// ä»è·¯ç”±å‚æ•°ä¸­è·å–åå­—å‚æ•°å€¼</span><br>        name := c.Param(<span class="hljs-string">&quot;name&quot;</span>)<br>        <span class="hljs-comment">// åœ¨å“åº”ä¸­è¿”å› &quot;Hello &#123;name&#125;&quot; å­—ç¬¦ä¸²</span><br>        c.String(http.StatusOK, <span class="hljs-string">&quot;Hello %s&quot;</span>, name)<br>    &#125;)<br><br>    <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªå¤„ç†å™¨å‡½æ•°ï¼Œå¤„ç†åŒ¹é…åˆ°çš„è·¯ç”± /user/:name/*action</span><br>    <span class="hljs-comment">// :name å’Œ *action éƒ½è¡¨ç¤ºå‚æ•°ï¼Œ:name åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ*action åŒ¹é…å¤šä¸ªå­—ç¬¦ä¸²</span><br>    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å…¶ä»–è·¯ç”±åŒ¹é… /user/:nameï¼Œè¯¥å¤„ç†å™¨å‡½æ•°å°†å¤„ç†è¯¥è¯·æ±‚å¹¶è¿›è¡Œé‡å®šå‘åˆ° /user/:name/</span><br>    router.GET(<span class="hljs-string">&quot;/user/:name/*action&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// ä»è·¯ç”±å‚æ•°ä¸­è·å–åå­—å’ŒåŠ¨ä½œå‚æ•°å€¼</span><br>        name := c.Param(<span class="hljs-string">&quot;name&quot;</span>)<br>        action := c.Param(<span class="hljs-string">&quot;action&quot;</span>)<br>        <span class="hljs-comment">// æ ¹æ®å‚æ•°å€¼æ„å»ºæ¶ˆæ¯å­—ç¬¦ä¸²</span><br>        message := name + <span class="hljs-string">&quot; is &quot;</span> + action<br>        <span class="hljs-comment">// åœ¨å“åº”ä¸­è¿”å›æ¶ˆæ¯å­—ç¬¦ä¸²</span><br>        c.String(http.StatusOK, message)<br>    &#125;)<br><br>    <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ :8080 ä¸Š</span><br>    router.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-21"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-21" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>ç¬¬ä¸€ä¸ªå¤„ç†å™¨å‡½æ•°å¤„ç†äº†è·¯ç”± <code>/user/:name</code>ã€‚<code>:name</code> è¡¨ç¤ºè¯¥è·¯ç”±æ®µä¸ºå‚æ•°ï¼Œå¯ä»¥åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¤„ç†å™¨å‡½æ•°ã€‚åœ¨å¤„ç†å™¨å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>c.Param(&quot;name&quot;)</code> è·å–è·¯ç”±å‚æ•°ä¸­çš„ <code>name</code> å€¼ï¼Œå¹¶ä½¿ç”¨ <code>c.String(http.StatusOK, &quot;Hello %s&quot;, name)</code> åœ¨å“åº”ä¸­è¿”å› â€œHello {name}â€ å­—ç¬¦ä¸²ã€‚</li>
<li>ç¬¬äºŒä¸ªå¤„ç†å™¨å‡½æ•°å¤„ç†äº†è·¯ç”± <code>/user/:name/*action</code>ã€‚<code>:name</code> å’Œ <code>*action</code> éƒ½è¡¨ç¤ºå‚æ•°ï¼Œå…¶ä¸­ <code>:name</code> åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ<code>*action</code> åŒ¹é…å¤šä¸ªå­—ç¬¦ä¸²ã€‚åœ¨å¤„ç†å™¨å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>c.Param(&quot;name&quot;)</code> å’Œ <code>c.Param(&quot;action&quot;)</code> è·å–è·¯ç”±å‚æ•°ä¸­çš„ <code>name</code> å’Œ <code>action</code> å€¼ï¼Œå¹¶æ ¹æ®è¿™äº›å‚æ•°å€¼æ„å»ºæ¶ˆæ¯å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œä½¿ç”¨ <code>c.String(http.StatusOK, message)</code> åœ¨å“åº”ä¸­è¿”å›è¯¥æ¶ˆæ¯å­—ç¬¦ä¸²ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–è·¯ç”±åŒ¹é… <code>/user/:name</code>ï¼Œè¯¥å¤„ç†å™¨å‡½æ•°å°†å¤„ç†è¯¥è¯·æ±‚å¹¶è¿›è¡Œé‡å®šå‘åˆ° <code>/user/:name/</code>ã€‚</li>
</ol>
<p>æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>router.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬åœ¨ <code>:8080</code> ç«¯å£ä¸Šã€‚ä¸€æ—¦æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œå®ƒå°†å¼€å§‹ç›‘å¬æ¥è‡ªå®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚ï¼Œå¹¶æ ¹æ®æ³¨å†Œçš„è·¯ç”±å¤„ç†å™¨å‡½æ•°æ¥å¤„ç†è¿™äº›è¯·æ±‚ã€‚Gin æ¡†æ¶æä¾›äº†å¾ˆå¤šæ–¹ä¾¿çš„æ–¹æ³•æ¥å¤„ç†è·¯ç”±ã€è¯·æ±‚å’Œå“åº”ï¼Œä½¿å¾—æ„å»º HTTP æœåŠ¡å™¨å˜å¾—ç®€å•å’Œé«˜æ•ˆã€‚</p>
</blockquote>
<h2 id="42ã€é™æ€èµ„æºåµŒå…¥"><a href="#42ã€é™æ€èµ„æºåµŒå…¥" class="headerlink" title="42ã€é™æ€èµ„æºåµŒå…¥"></a>42ã€é™æ€èµ„æºåµŒå…¥</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -40"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -40" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.New() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å®ä¾‹</span><br><br>    t, err := loadTemplate() <span class="hljs-comment">// è°ƒç”¨ loadTemplate() å‡½æ•°åŠ è½½æ¨¡æ¿</span><br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-built_in">panic</span>(err) <span class="hljs-comment">// å¦‚æœåŠ è½½æ¨¡æ¿è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™è§¦å‘ panic</span><br>    &#125;<br>    r.SetHTMLTemplate(t) <span class="hljs-comment">// å°†åŠ è½½å¥½çš„æ¨¡æ¿è®¾ç½®åˆ° Gin è·¯ç”±å®ä¾‹çš„ HTML æ¨¡æ¿ä¸­</span><br><br>    r.GET(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123; <span class="hljs-comment">// å®šä¹‰è·¯ç”±å¤„ç†å‡½æ•°ï¼Œå¤„ç† HTTP GET è¯·æ±‚ï¼Œè·¯å¾„ä¸º &quot;/&quot;</span><br>        c.HTML(http.StatusOK, <span class="hljs-string">&quot;/html/index.tmpl&quot;</span>, <span class="hljs-literal">nil</span>) <span class="hljs-comment">// è¿”å› HTML å“åº”ï¼Œä½¿ç”¨åŠ è½½çš„æ¨¡æ¿æ¸²æŸ“æ•°æ®ï¼Œå¹¶è®¾ç½® HTTP çŠ¶æ€ç ä¸º 200</span><br>    &#125;)<br><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>) <span class="hljs-comment">// å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ç«¯å£ 8080 ä¸Š</span><br>&#125;<br><br><span class="hljs-comment">// loadTemplate åŠ è½½ç”± go-assets-builder åµŒå…¥çš„æ¨¡æ¿</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">loadTemplate</span><span class="hljs-params">()</span></span> (*template.Template, <span class="hljs-type">error</span>) &#123;<br>    t := template.New(<span class="hljs-string">&quot;&quot;</span>) <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç©ºçš„æ¨¡æ¿</span><br>    <span class="hljs-keyword">for</span> name, file := <span class="hljs-keyword">range</span> Assets.Files &#123; <span class="hljs-comment">// éå†ç”± go-assets-builder åµŒå…¥çš„æ–‡ä»¶</span><br>        <span class="hljs-keyword">if</span> file.IsDir() || !strings.HasSuffix(name, <span class="hljs-string">&quot;.tmpl&quot;</span>) &#123;<br>            <span class="hljs-keyword">continue</span> <span class="hljs-comment">// å¦‚æœæ–‡ä»¶æ˜¯ç›®å½•æˆ–è€…ä¸æ˜¯ä»¥ .tmpl åç¼€ç»“å°¾ï¼Œåˆ™è·³è¿‡</span><br>        &#125;<br>        h, err := ioutil.ReadAll(file) <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span><br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err <span class="hljs-comment">// å¦‚æœè¯»å–æ–‡ä»¶å†…å®¹è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™è¿”å›é”™è¯¯</span><br>        &#125;<br>        t, err = t.New(name).Parse(<span class="hljs-type">string</span>(h)) <span class="hljs-comment">// å°†æ–‡ä»¶å†…å®¹è§£æä¸ºæ¨¡æ¿ï¼Œå¹¶å°†å…¶å‘½åä¸º nameï¼Œä¸ä¹‹å‰çš„æ¨¡æ¿å½¢æˆæ¨¡æ¿é“¾</span><br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err <span class="hljs-comment">// å¦‚æœè§£æè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™è¿”å›é”™è¯¯</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> t, <span class="hljs-literal">nil</span> <span class="hljs-comment">// è¿”å›åŠ è½½å¥½çš„æ¨¡æ¿å’Œ nil é”™è¯¯ï¼Œè¡¨ç¤ºåŠ è½½æ¨¡æ¿æˆåŠŸ</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-22"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-22" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<p>ä¸Šè¿°ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„ Go è¯­è¨€ç¨‹åºï¼Œä½¿ç”¨äº† Gin æ¡†æ¶å’Œ go-assets-builder åº“æ¥åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶åŠ è½½åµŒå…¥åœ¨ç¨‹åºä¸­çš„æ¨¡æ¿æ–‡ä»¶è¿›è¡Œæ¸²æŸ“ã€‚ä¸‹é¢å¯¹ä»£ç è¿›è¡Œè¯¦ç»†çš„åˆ†æï¼š</p>
<ol>
<li><code>func main()</code> æ˜¯ Go è¯­è¨€ç¨‹åºçš„å…¥å£å‡½æ•°ï¼Œç¨‹åºä»è¿™é‡Œå¼€å§‹æ‰§è¡Œã€‚</li>
<li><code>gin.New()</code> åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Gin è·¯ç”±å®ä¾‹ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œå®šä¹‰è·¯ç”±ã€‚</li>
<li><code>loadTemplate()</code> å‡½æ•°ç”¨äºåŠ è½½ç”± go-assets-builder åµŒå…¥çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶è¿”å›è§£æåçš„æ¨¡æ¿å’Œå¯èƒ½çš„é”™è¯¯ã€‚</li>
<li><code>r.SetHTMLTemplate(t)</code> å°†åŠ è½½å¥½çš„æ¨¡æ¿è®¾ç½®åˆ° Gin è·¯ç”±å®ä¾‹çš„ HTML æ¨¡æ¿ä¸­ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ã€‚</li>
<li><code>r.GET(&quot;/&quot;, func(c *gin.Context) &#123; ... &#125;)</code> å®šä¹‰äº†ä¸€ä¸ªè·¯ç”±å¤„ç†å‡½æ•°ï¼Œå¤„ç†æ ¹è·¯å¾„çš„ HTTP GET è¯·æ±‚ã€‚å½“ç”¨æˆ·è®¿é—®æ ¹è·¯å¾„æ—¶ï¼ŒGin æ¡†æ¶ä¼šè°ƒç”¨è¿™ä¸ªå¤„ç†å‡½æ•°æ¥å¤„ç†è¯·æ±‚ã€‚</li>
<li><code>c.HTML(http.StatusOK, &quot;/html/index.tmpl&quot;, nil)</code> åœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ <code>c.HTML()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª HTML å“åº”ã€‚è¿™ä¸ªæ–¹æ³•ä½¿ç”¨åŠ è½½çš„æ¨¡æ¿æ¸²æŸ“æ•°æ®ï¼Œå¹¶è®¾ç½® HTTP çŠ¶æ€ç ä¸º 200ï¼ˆhttp.StatusOKï¼‰ã€‚</li>
<li><code>r.Run(&quot;:8080&quot;)</code> å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨ 8080 ç«¯å£ä¸Šï¼Œå¼€å§‹æ¥æ”¶å’Œå¤„ç† HTTP è¯·æ±‚ã€‚</li>
<li><code>loadTemplate()</code> å‡½æ•°éå†ç”± go-assets-builder åµŒå…¥çš„æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹å¹¶è§£æä¸ºæ¨¡æ¿ï¼Œå¹¶å°†å…¶å‘½åä¸ºæ–‡ä»¶åï¼Œå½¢æˆä¸€ä¸ªæ¨¡æ¿é“¾ã€‚æœ€ç»ˆè¿”å›åŠ è½½å¥½çš„æ¨¡æ¿å’Œå¯èƒ½çš„é”™è¯¯ã€‚</li>
</ol>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™æ®µä»£ç é€šè¿‡ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼ŒåŠ è½½äº†ç”± go-assets-builder åµŒå…¥çš„æ¨¡æ¿æ–‡ä»¶ï¼Œç”¨äºæ¸²æŸ“ HTML å“åº”ã€‚è¿™ç§æ–¹å¼å¯ä»¥å°†æ¨¡æ¿æ–‡ä»¶åµŒå…¥åˆ° Go è¯­è¨€ç¨‹åºä¸­ï¼Œæ–¹ä¾¿éƒ¨ç½²å’Œåˆ†å‘ï¼ŒåŒæ—¶é¿å…äº†å¤–éƒ¨æ–‡ä»¶çš„ä¾èµ–å’Œç®¡ç†ã€‚</p>
</blockquote>
<h2 id="43ã€ä¸ä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶"><a href="#43ã€ä¸ä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶" class="headerlink" title="43ã€ä¸ä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶"></a>43ã€ä¸ä½¿ç”¨é»˜è®¤çš„ä¸­é—´ä»¶</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -41"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -41" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">r := gin.New()<br>ä»£æ›¿<br><span class="hljs-comment">// Default ä½¿ç”¨ Logger å’Œ Recovery ä¸­é—´ä»¶</span><br>r := gin.Default()<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-23"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-23" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><h2 id="44ã€-XML-x2F-JSON-x2F-YAML-x2F-ProtoBuf-æ¸²æŸ“"><a href="#44ã€-XML-x2F-JSON-x2F-YAML-x2F-ProtoBuf-æ¸²æŸ“" class="headerlink" title="44ã€ XML&#x2F;JSON&#x2F;YAML&#x2F;ProtoBuf æ¸²æŸ“"></a>44ã€ XML&#x2F;JSON&#x2F;YAML&#x2F;ProtoBuf æ¸²æŸ“</h2><h4 id="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -42"><a href="#ï¼ˆ1ï¼‰å®Œæ•´ä»£ç -42" class="headerlink" title="ï¼ˆ1ï¼‰å®Œæ•´ä»£ç "></a>ï¼ˆ1ï¼‰å®Œæ•´ä»£ç </h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    r := gin.Default() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin è·¯ç”±å®ä¾‹</span><br><br>    r.GET(<span class="hljs-string">&quot;/someJSON&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;hey&quot;</span>, <span class="hljs-string">&quot;status&quot;</span>: http.StatusOK&#125;)<br>        <span class="hljs-comment">// å¤„ç† &quot;/someJSON&quot; è·¯ç”±çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª JSON å“åº”</span><br>        <span class="hljs-comment">// ä½¿ç”¨ gin.H å¿«æ·æ–¹å¼åˆ›å»ºä¸€ä¸ª map[string]interface&#123;&#125; ç±»å‹çš„æ•°æ®ä½œä¸º JSON æ•°æ®</span><br>        <span class="hljs-comment">// JSON æ•°æ®åŒ…å« &quot;message&quot; å’Œ &quot;status&quot; ä¸¤ä¸ªå­—æ®µï¼Œå€¼åˆ†åˆ«ä¸º &quot;hey&quot; å’Œ http.StatusOK</span><br>        <span class="hljs-comment">// HTTP çŠ¶æ€ç è®¾ç½®ä¸º http.StatusOK</span><br>    &#125;)<br><br>    r.GET(<span class="hljs-string">&quot;/moreJSON&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ç»“æ„ä½“æ¥å®šä¹‰ JSON æ•°æ®</span><br>        <span class="hljs-keyword">var</span> msg <span class="hljs-keyword">struct</span> &#123;<br>            Name    <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;user&quot;`</span> <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ `json:&quot;...&quot;` æ ‡ç­¾å®šä¹‰ JSON å­—æ®µå</span><br>            Message <span class="hljs-type">string</span><br>            Number  <span class="hljs-type">int</span><br>        &#125;<br>        msg.Name = <span class="hljs-string">&quot;Lena&quot;</span><br>        msg.Message = <span class="hljs-string">&quot;hey&quot;</span><br>        msg.Number = <span class="hljs-number">123</span><br>        <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“å˜é‡ msgï¼Œè®¾ç½®å…¶å­—æ®µçš„å€¼</span><br>        <span class="hljs-comment">// æ³¨æ„ msg.Name åœ¨ JSON ä¸­å˜æˆäº† &quot;user&quot;</span><br>        <span class="hljs-comment">// å°†è¾“å‡ºï¼š&#123;&quot;user&quot;: &quot;Lena&quot;, &quot;Message&quot;: &quot;hey&quot;, &quot;Number&quot;: 123&#125;</span><br>        c.JSON(http.StatusOK, msg)<br>        <span class="hljs-comment">// å¤„ç† &quot;/moreJSON&quot; è·¯ç”±çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª JSON å“åº”</span><br>        <span class="hljs-comment">// ä½¿ç”¨ç»“æ„ä½“å˜é‡ msg ä½œä¸º JSON æ•°æ®</span><br>        <span class="hljs-comment">// JSON æ•°æ®åŒ…å«ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º &quot;user&quot;ã€&quot;Message&quot; å’Œ &quot;Number&quot;ï¼Œå¯¹åº”ç»“æ„ä½“çš„å­—æ®µå€¼</span><br>        <span class="hljs-comment">// HTTP çŠ¶æ€ç è®¾ç½®ä¸º http.StatusOK</span><br>    &#125;)<br><br>    r.GET(<span class="hljs-string">&quot;/someXML&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        c.XML(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;hey&quot;</span>, <span class="hljs-string">&quot;status&quot;</span>: http.StatusOK&#125;)<br>        <span class="hljs-comment">// å¤„ç† &quot;/someXML&quot; è·¯ç”±çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª XML å“åº”</span><br>        <span class="hljs-comment">// ä½¿ç”¨ gin.H å¿«æ·æ–¹å¼åˆ›å»ºä¸€ä¸ª map[string]interface&#123;&#125; ç±»å‹çš„æ•°æ®ä½œä¸º XML æ•°æ®</span><br>        <span class="hljs-comment">// XML æ•°æ®åŒ…å« &quot;message&quot; å’Œ &quot;status&quot; ä¸¤ä¸ªå­—æ®µï¼Œå€¼åˆ†åˆ«ä¸º &quot;hey&quot; å’Œ http.StatusOK</span><br>        <span class="hljs-comment">// HTTP çŠ¶æ€ç è®¾ç½®ä¸º http.StatusOK</span><br>    &#125;)<br><br>    r.GET(<span class="hljs-string">&quot;/someYAML&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        c.YAML(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;hey&quot;</span>, <span class="hljs-string">&quot;status&quot;</span>: http.StatusOK&#125;)<br>        <span class="hljs-comment">// å¤„ç† &quot;/someYAML&quot; è·¯ç”±çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª YAML å“åº”</span><br>        <span class="hljs-comment">// ä½¿ç”¨ gin.H å¿«æ·æ–¹å¼åˆ›å»ºä¸€ä¸ª map[string]interface&#123;&#125; ç±»å‹çš„æ•°æ®ä½œä¸º YAML æ•°æ®</span><br>        <span class="hljs-comment">// YAML æ•°æ®åŒ…å« &quot;message&quot; å’Œ &quot;status&quot; ä¸¤ä¸ªå­—æ®µï¼Œå€¼åˆ†åˆ«ä¸º &quot;hey&quot; å’Œ http.StatusOK</span><br>        <span class="hljs-comment">// HTTP çŠ¶æ€ç è®¾ç½®ä¸º http.StatusOK</span><br>    &#125;)<br><br>    r.GET(<span class="hljs-string">&quot;/someProtoBuf&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>        reps := []<span class="hljs-type">int64</span>&#123;<span class="hljs-type">int64</span>(<span class="hljs-number">1</span>), <span class="hljs-type">int64</span>(<span class="hljs-number">2</span>)&#125;<br>        label := <span class="hljs-string">&quot;test&quot;</span><br>        <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡ reps å’Œä¸€ä¸ªå­—ç¬¦ä¸² label</span><br>        <span class="hljs-comment">// ç”¨äºåˆ›å»ºä¸€ä¸ª protoexample.Test ç»“æ„ä½“å˜é‡ data</span><br><br>        data := &amp;protoexample.Test&#123;<br>            Label: &amp;label,<br>            Reps:  reps,<br>        &#125;<br>        <span class="hljs-comment">// è¯·æ³¨æ„ï¼Œæ•°æ®åœ¨å“åº”ä¸­å˜ä¸ºäºŒè¿›åˆ¶æ•°æ®</span><br>        <span class="hljs-comment">// å°†è¾“å‡ºè¢« protoexample.Test protobuf åºåˆ—åŒ–äº†çš„æ•°æ®</span><br>        c.ProtoBuf(http.StatusOK, data)<br>    &#125;)<br><br>    <span class="hljs-comment">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡</span><br>    r.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-24"><a href="#ï¼ˆ2ï¼‰ä»£ç è§£é‡Š-24" class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç è§£é‡Š"></a>ï¼ˆ2ï¼‰ä»£ç è§£é‡Š</h4><blockquote>
<ol>
<li>å¯¼å…¥äº† Gin æ¡†æ¶å’Œ net&#x2F;http åŒ…ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„ Protocol Buffers æ–‡ä»¶åŒ… protoexampleã€‚</li>
<li>åˆ›å»ºäº†ä¸€ä¸ª Gin çš„é»˜è®¤å¼•æ“å®ä¾‹ rï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ã€‚</li>
<li>å®šä¹‰äº†è·¯ç”±å¤„ç†å‡½æ•°ï¼Œé€šè¿‡ r.GET() æ–¹æ³•å°†è·¯ç”±è·¯å¾„å’Œå¤„ç†å‡½æ•°ç»‘å®šèµ·æ¥ã€‚</li>
<li>ç¬¬ä¸€ä¸ªè·¯ç”±å¤„ç†å‡½æ•°å¤„ç† â€œ&#x2F;someJSONâ€ è·¯å¾„çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª JSON æ ¼å¼çš„å“åº”ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª â€œmessageâ€ å­—æ®µå’Œä¸€ä¸ª â€œstatusâ€ å­—æ®µï¼Œå€¼åˆ†åˆ«ä¸º â€œheyâ€ å’Œ http.StatusOKã€‚</li>
<li>ç¬¬äºŒä¸ªè·¯ç”±å¤„ç†å‡½æ•°å¤„ç† â€œ&#x2F;moreJSONâ€ è·¯å¾„çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª JSON æ ¼å¼çš„å“åº”ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç»“æ„ä½“ msgï¼Œç»“æ„ä½“æœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º â€œNameâ€ã€â€Messageâ€ å’Œ â€œNumberâ€ï¼Œé€šè¿‡ç»“æ„ä½“å­—é¢é‡èµ‹å€¼åä½œä¸ºå“åº”çš„å†…å®¹ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªè·¯ç”±å¤„ç†å‡½æ•°å¤„ç† â€œ&#x2F;someXMLâ€ è·¯å¾„çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª XML æ ¼å¼çš„å“åº”ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª â€œmessageâ€ å­—æ®µå’Œä¸€ä¸ª â€œstatusâ€ å­—æ®µï¼Œå€¼åˆ†åˆ«ä¸º â€œheyâ€ å’Œ http.StatusOKã€‚</li>
<li>ç¬¬å››ä¸ªè·¯ç”±å¤„ç†å‡½æ•°å¤„ç† â€œ&#x2F;someYAMLâ€ è·¯å¾„çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª YAML æ ¼å¼çš„å“åº”ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª â€œmessageâ€ å­—æ®µå’Œä¸€ä¸ª â€œstatusâ€ å­—æ®µï¼Œå€¼åˆ†åˆ«ä¸º â€œheyâ€ å’Œ http.StatusOKã€‚</li>
<li>ç¬¬äº”ä¸ªè·¯ç”±å¤„ç†å‡½æ•°å¤„ç† â€œ&#x2F;someProtoBufâ€ è·¯å¾„çš„ GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª Protocol Buffers æ ¼å¼çš„å“åº”ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ Test ç»“æ„ä½“ï¼Œç»“æ„ä½“æœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º â€œLabelâ€ å’Œ â€œRepsâ€ï¼Œé€šè¿‡ç»“æ„ä½“å­—é¢é‡èµ‹å€¼åä½œä¸ºå“åº”çš„å†…å®¹ã€‚</li>
<li>æœ€åé€šè¿‡ r.Run() æ–¹æ³•å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œåœ¨åœ°å€ 0.0.0.0:8080 ä¸Šç›‘å¬è¯·æ±‚ã€‚</li>
</ol>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Go/" class="category-chain-item">Go</a>
  
  
    <span>></span>
    
  <a href="/categories/Go/Gin%E6%A1%86%E6%9E%B6/" class="category-chain-item">Ginæ¡†æ¶</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E5%8E%9F%E5%88%9B/">#åŸåˆ›</a>
      
        <a href="/tags/Gin/">#Gin</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Ginæ¡†æ¶ç¤ºä¾‹</div>
      <div>http://example.com/2023/04/11/Go/Ginæ¡†æ¶ç¤ºä¾‹/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Feng Tao</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´4æœˆ11æ—¥</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>æ›´æ–°äº</div>
          <div>2023å¹´4æœˆ21æ—¥</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/04/11/test./index/" title="test">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">test</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/04/11/Go/go%E7%9A%84HTTP%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="goçš„HTTPç½‘ç»œç¼–ç¨‹">
                        <span class="hidden-mobile">goçš„HTTPç½‘ç»œç¼–ç¨‹</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"n0H6ZjcwsAdPc2zfOJM4bxV4-gzGzoHsz","appKey":"rwjeQIHfYJqQvjh2iWuPkYev","path":"window.location.pathname","placeholder":"åŒ¿åè¯„è®ºï¼Œç•…æ‰€æ¬²è¨€","avatar":"robohash","meta":["nick","mail"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":true},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="leancloud-site-pv"></span>
         æ¬¡
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="leancloud-site-uv"></span>
         äºº
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>

<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/love.js"></script>

<!--åŠ¨æ€çº¿æ¡èƒŒæ™¯-->
<script type="text/javascript"
color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>

<!-- é›ªèŠ±ç‰¹æ•ˆ -->
<script type="text/javascript" src="\js\snow.js"></script>